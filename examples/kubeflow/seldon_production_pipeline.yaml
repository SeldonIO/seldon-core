---
apiVersion: machinelearning.seldon.io/v1alpha2
kind: SeldonDeployment
metadata:
  labels:
    app: seldon
  name: nlp-example
  namespace: kubeflow
spec:
  name: nlp-pipeline
  predictors:
  - componentSpecs:
    - spec:
        containers:
        - name: clean_text
          image: clean_text_transformer:0.1
        - name: spacy_tokenizer
          image: spacy_tokenizer:0.1
        - name: tfidf_vectorizer
          image: tfidf_vectorizer:0.1
        - name: lr_classifier
          image: lr_text_classifier:0.2
        terminationGracePeriodSeconds: 1
    graph:
      name: clean_text
      endpoint:
        type: REST
      type: MODEL
      children:
      - name: spacy_tokenizer
        endpoint:
          type: REST
        type: MODEL
        children:
        - name: tfidf_vectorizer
          endpoint:
            type: REST
          type: MODEL
          children:
          - name: lr_classifier
            endpoint:
              type: REST
            type: MODEL
            children: []
    name: nlp-pipeline
    replicas: 1
    svcOrchSpec:
      env: []

