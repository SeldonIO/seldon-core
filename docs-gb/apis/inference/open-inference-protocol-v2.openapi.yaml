openapi: 3.0.3
info:
  title: Data Plane
  version: "2.0"
  contact:
    name: Seldon Technologies Ltd.
    url: https://www.seldon.io/
    email: hello@seldon.io
  description: REST protocol to interact with inference servers.
  license:
    name: Business Source License 1.1
servers: []
paths:
  /v2/health/live:
    get:
      summary: Server Live
      description: >
        Indicates the inference server process is up and able to accept HTTP connections.
        Use this endpoint for Kubernetes livenessProbe. This endpoint does not validate model load state.
      operationId: server-live
      tags:
        - health
        - server
      responses:
        "200":
          description: OK — process is alive.
        "503":
          description: Unhealthy — process is not live.

  /v2/health/ready:
    get:
      summary: Server Ready
      description: >
        Indicates the server is ready to receive requests (HTTP stack initialized, dependencies available).
        This does not guarantee any specific model is loaded. Use this endpoint for Kubernetes readinessProbe.
        To check a model's readiness, use the Model Ready endpoints (observability only).
      tags:
        - health
        - server
      operationId: server-ready
      responses:
        "200":
          description: OK — server is ready to receive traffic.
        "503":
          description: Not Ready — server is not yet ready to receive traffic.

  "/v2/models/{model_name}/versions/{model_version}/ready":
    parameters:
      - name: model_name
        in: path
        required: true
        schema:
          type: string
      - name: model_version
        in: path
        required: true
        schema:
          type: string
    get:
      summary: Model Ready (Specific Version)
      description: >
        Indicates whether the specified model version is ready for inferencing.
        Intended for client/user observability and orchestration flows.
        Not intended for Kubernetes liveness/readiness probes.
      tags:
        - health
        - model
      operationId: model-version-ready
      responses:
        "200":
          description: OK — the specified model version is ready.
        "404":
          description: Not Found — model or version does not exist.
        "503":
          description: Not Ready — model version is not yet ready.

  "/v2/models/{model_name}/ready":
    parameters:
      - name: model_name
        in: path
        required: true
        schema:
          type: string
    get:
      summary: Model Ready (Server-Selected Version)
      description: >
        Indicates whether the server-selected (e.g., default/active) version of the model is ready for inferencing.
        Intended for client/user observability and orchestration flows.
        Not intended for Kubernetes liveness/readiness probes.
      tags:
        - health
        - model
      operationId: model-ready
      responses:
        "200":
          description: OK — a server-selected version of the model is ready.
        "404":
          description: Not Found — model does not exist.
        "503":
          description: Not Ready — the selected model version is not yet ready.

  /v2:
    get:
      summary: Server Metadata
      tags:
        - metadata
        - server
      operationId: server-metadata
      description: The server metadata endpoint provides information about the server. A server metadata request is made with an HTTP GET to a server metadata endpoint.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MetadataServerResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MetadataServerErrorResponse"

  "/v2/models/{model_name}/versions/{model_version}":
    parameters:
      - name: model_name
        in: path
        required: true
        schema:
          type: string
      - name: model_version
        in: path
        required: true
        schema:
          type: string
    get:
      summary: Model Metadata
      tags:
        - metadata
        - model
      operationId: model-version-metadata
      description: >
        The per-model metadata endpoint provides information about a model. A model metadata request is made with an HTTP GET
        to a model metadata endpoint. The model name and (optionally) version must be available in the URL.
        If a version is not provided the server may choose a version based on its own policies or return an error.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MetadataModelResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MetadataModelErrorResponse"

  "/v2/models/{model_name}":
    parameters:
      - name: model_name
        in: path
        required: true
        schema:
          type: string
    get:
      summary: Model Metadata
      tags:
        - metadata
        - model
      operationId: model-metadata
      description: >
        The per-model metadata endpoint provides information about a model. A model metadata request is made with an HTTP GET
        to a model metadata endpoint. The model name and (optionally) version must be available in the URL.
        If a version is not provided the server may choose a version based on its own policies or return an error.
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MetadataModelResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MetadataModelErrorResponse"

  "/v2/models/{model_name}/versions/{model_version}/infer":
    parameters:
      - name: model_name
        in: path
        required: true
        schema:
          type: string
      - name: model_version
        in: path
        required: true
        schema:
          type: string
    post:
      summary: Model Inference
      operationId: model-version-inference
      tags:
        - inference
        - model
      description: >
        An inference request is made with an HTTP POST to an inference endpoint. The model name and (optionally) version must be
        available in the URL. If a version is not provided the server may choose a version based on its own policies or return an error.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InferenceRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InferenceResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InferenceErrorResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InferenceErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InferenceErrorResponse"

  "/v2/models/{model_name}/infer":
    parameters:
      - name: model_name
        in: path
        required: true
        schema:
          type: string
    post:
      summary: Model Inference
      operationId: model-inference
      tags:
        - inference
        - model
      description: >
        An inference request is made with an HTTP POST to an inference endpoint. The model name and (optionally) version must be
        available in the URL. If a version is not provided the server may choose a version based on its own policies or return an error.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InferenceRequest"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InferenceResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InferenceErrorResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InferenceErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InferenceErrorResponse"

components:
  schemas:
    MetadataServerResponse:
      title: MetadataServerResponse
      type: object
      properties:
        name:
          type: string
        version:
          type: string
        extensions:
          type: array
          items:
            type: string
      required:
        - name
        - version
        - extensions

    MetadataModelResponse:
      title: MetadataModelResponse
      type: object
      properties:
        name:
          type: string
        versions:
          type: array
          items:
            type: string
        platform:
          type: string
        inputs:
          type: array
          items:
            $ref: "#/components/schemas/MetadataTensor"
        outputs:
          type: array
          items:
            $ref: "#/components/schemas/MetadataTensor"
        parameters:
          $ref: "#/components/schemas/Parameters"
      required:
        - name
        - platform

    MetadataServerErrorResponse:
      title: MetadataServerErrorResponse
      type: object
      properties:
        error:
          type: string
      required:
        - error

    MetadataTensor:
      title: MetadataTensor
      type: object
      properties:
        name:
          type: string
        datatype:
          type: string
        shape:
          type: array
          items:
            type: integer
        parameters:
          $ref: "#/components/schemas/Parameters"
      required:
        - name
        - datatype
        - shape

    MetadataModelErrorResponse:
      title: MetadataModelErrorResponse
      type: object
      properties:
        error:
          type: string
      required:
        - error

    InferenceRequest:
      title: InferenceRequest
      type: object
      x-examples:
        Example 1:
          id: "42"
          inputs:
            - name: input0
              shape: [2, 2]
              datatype: UINT32
              data: [1, 2, 3, 4]
            - name: input1
              shape: [3]
              datatype: BOOL
              data: [true]
          outputs:
            - name: output0
        Example 2:
          id: "42"
          outputs:
            - name: output0
              shape: [3, 2]
              datatype: FP32
              data: [1, 1.1, 2, 2.1, 3, 3.1]
      properties:
        id:
          type: string
        parameters:
          $ref: "#/components/schemas/Parameters"
        inputs:
          type: array
          items:
            $ref: "#/components/schemas/RequestInput"
        outputs:
          type: array
          items:
            $ref: "#/components/schemas/RequestOutput"
      required:
        - inputs

    Parameters:
      title: Parameters
      type: object
      additionalProperties: true
      properties:
        content_type:
          type: string
        headers:
          type: object

    RequestInput:
      title: RequestInput
      type: object
      properties:
        name:
          type: string
        shape:
          type: array
          items:
            type: integer
        datatype:
          type: string
        parameters:
          $ref: "#/components/schemas/Parameters"
        data:
          $ref: "#/components/schemas/TensorData"
      required:
        - name
        - shape
        - datatype
        - data

    TensorData:
      title: TensorData
      description: Tensor payload; may be array, object, string, number, or boolean.
      oneOf:
        - type: array
          items: {}
        - type: object
          additionalProperties: true
        - type: string
        - type: number
        - type: boolean

    RequestOutput:
      title: RequestOutput
      type: object
      properties:
        name:
          type: string
        parameters:
          $ref: "#/components/schemas/Parameters"
      required:
        - name

    ResponseOutput:
      title: ResponseOutput
      type: object
      properties:
        name:
          type: string
        shape:
          type: array
          items:
            type: integer
        datatype:
          type: string
        parameters:
          $ref: "#/components/schemas/Parameters"
        data:
          $ref: "#/components/schemas/TensorData"
      required:
        - name
        - shape
        - datatype
        - data

    InferenceResponse:
      title: InferenceResponse
      type: object
      properties:
        model_name:
          type: string
        model_version:
          type: string
        id:
          type: string
        parameters:
          $ref: "#/components/schemas/Parameters"
        outputs:
          type: array
          items:
            $ref: "#/components/schemas/ResponseOutput"
      required:
        - model_name
        - outputs

    InferenceErrorResponse:
      title: InferenceErrorResponse
      type: object
      properties:
        error:
          type: string

tags:
  - name: health
  - name: inference
  - name: metadata
  - name: model
  - name: server
