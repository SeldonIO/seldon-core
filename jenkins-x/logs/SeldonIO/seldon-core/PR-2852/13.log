
Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mpr-build-comment[0m and container [32mstep-credential-initializer-xh2jr[0m
{"level":"info","ts":1611057926.5663412,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1611057926.5669568,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mpr-build-comment[0m and container [32mstep-working-dir-initializer-r9sx7[0m
{"level":"info","ts":1611057928.6995869,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611057928.7021399,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mpr-build-comment[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mpr-build-comment[0m and container [32mstep-create-dir-workspace-fdh4h[0m
{"level":"info","ts":1611057963.4092917,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611057963.4144728,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mpr-build-comment[0m and container [32mstep-git-source-seldonio-seldon-core-pr-2852-in-8d8jt-z864j[0m
{"level":"info","ts":1611057963.8139098,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1611057984.9590664,"logger":"fallback-logger","caller":"git/git.go:103","msg":"Successfully cloned https://github.com/SeldonIO/seldon-core.git @ master in path /workspace/source"}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mpr-build-comment[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mpr-build-comment[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:a016277f8a8581a9f24d2ae7da7cbe2d7fe13712,2852:055cc0f87feb146948f60539bdc7661be1487182
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git fetch origin --unshallow 055cc0f87feb146948f60539bdc7661be1487182: a016277f8a8581a9f24d2ae7da7cbe2d7fe13712:
DEBUG: ran git fetch --unshallow origin 055cc0f87feb146948f60539bdc7661be1487182: a016277f8a8581a9f24d2ae7da7cbe2d7fe13712: in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git branch
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git checkout master
DEBUG: ran git checkout master in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git reset --hard a016277f8a8581a9f24d2ae7da7cbe2d7fe13712
DEBUG: ran git reset --hard a016277f8a8581a9f24d2ae7da7cbe2d7fe13712 in 
DEBUG: JX_LOG_LEVEL=error LC_ALL=C git clean -fd .
DEBUG: ran clean --force -d . in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git merge 055cc0f87feb146948f60539bdc7661be1487182
DEBUG: ran git merge 055cc0f87feb146948f60539bdc7661be1487182 in 
DEBUG: LC_ALL=C JX_LOG_LEVEL=error git log --format=%H%x1f%an%x1f%ae%x1f%cn%x1f%ce%x1f%s%n%b%x1e a016277f8a8581a9f24d2ae7da7cbe2d7fe13712..HEAD
Merged SHA 76bd67fe1191d790986266f224f9aca76e35eee1 with commit message 'Merge commit '055cc0f87feb146948f60539bdc7661be1487182'' into base branch master
Merged SHA 055cc0f87feb146948f60539bdc7661be1487182 with commit message 'adjust validating webhooks so they do not expect defaulted resource' into base branch master
Merged SHA ff2f6fd36b2b7f8f183ec7117ce181979ad35d1d with commit message 'complete removal of mutatingwebhook' into base branch master
Merged SHA 2935c67252c5e233f2fcabd957005fe19294e9b2 with commit message 'initial attempt to remove mutating webhook' into base branch master

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mpr-build-comment[0m and container [32mstep-step2[0m
+++ dirname ./add-pr-build-comment
++ cd .
++ pwd
+ STARTUP_DIR=/workspace/source/ci
+ REPO_OWNER=SeldonIO
+ REPO_NAME=seldon-core
+ PULL_NUMBER=2852
+ BUILD_NUMBER=13
+ PIPELINE_CONTEXT=integration
++ cat
+++ date
+ COMMENT_MSG='Tue Jan 19 12:06:38 UTC 2021
The logs for [integration] [13] will show after the pipeline context has finished.  
https://github.com/SeldonIO/seldon-core/blob/gh-pages/jenkins-x/logs/SeldonIO/seldon-core/PR-2852/13.log

impatient try  
** get build logs SeldonIO/seldon-core/PR-2852 --build=13'
+ ** step pr comment --owner=SeldonIO --repository=seldon-core --pull-request=2852 '--comment=Tue Jan 19 12:06:38 UTC 2021
The logs for [integration] [13] will show after the pipeline context has finished.  
https://github.com/SeldonIO/seldon-core/blob/gh-pages/jenkins-x/logs/SeldonIO/seldon-core/PR-2852/13.log

impatient try  
** get build logs SeldonIO/seldon-core/PR-2852 --build=13'

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mpr-build-comment[0m and container [32mstep-source-mkdir-seldonio-seldon-core-pr-2852-in-8d8jt-9pjpn[0m
{"level":"info","ts":1611058001.1034184,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611058001.1624732,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /pvc/pr-build-comment/workspace\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mpr-build-comment[0m and container [32mstep-source-copy-seldonio-seldon-core-pr-2852-in-8d8jt-v2rrs[0m
{"level":"info","ts":1611058001.99436,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611058002.5749888,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r source/. /pvc/pr-build-comment/workspace\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mend-to-end[0m and container [32mstep-credential-initializer-ph28d[0m
{"level":"info","ts":1611058023.9096646,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/refs/heads/0.8.0-ns-support: no such file or directory"}
{"level":"info","ts":1611058023.9101398,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mend-to-end[0m and container [32mstep-working-dir-initializer-8jjwv[0m
{"level":"info","ts":1611058024.8650892,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611058024.8663006,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mend-to-end[0m and container [32mstep-place-tools[0m

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mend-to-end[0m and container [32mstep-create-dir-workspace-m2l6k[0m
{"level":"info","ts":1611058031.9986746,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611058031.9997776,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c mkdir -p /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mend-to-end[0m and container [32mstep-source-copy-workspace-fw8mz[0m
{"level":"info","ts":1611058032.22292,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1611058035.1447544,"logger":"fallback-logger","caller":"bash/main.go:64","msg":"Successfully executed command \"sh -c cp -r /pvc/pr-build-comment/workspace/. /workspace/source\"; output "}

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mend-to-end[0m and container [32mstep-setup-builder-home[0m

Showing logs for build [32mseldonio-seldon-core-pr-2852-in-8d8jt-13[0m stage [32mend-to-end[0m and container [32mstep-test-end-to-end[0m
Test run type is: [base]
Starting Docker: docker.
[SETUP] Waiting for Docker to be ready, sleeping for 1 seconds ...
kind create cluster --config ../resources/kind_config.yaml
Creating cluster "kind" ...
 â€¢ Ensuring node image (kindest/node:v1.16.3) ðŸ–¼  ...
 âœ“ Ensuring node image (kindest/node:v1.16.3) ðŸ–¼
 â€¢ Preparing nodes ðŸ“¦  ...
 âœ“ Preparing nodes ðŸ“¦
 â€¢ Writing configuration ðŸ“œ  ...
 âœ“ Writing configuration ðŸ“œ
 â€¢ Starting control-plane ðŸ•¹ï¸  ...
 âœ“ Starting control-plane ðŸ•¹ï¸
 â€¢ Installing CNI ðŸ”Œ  ...
 âœ“ Installing CNI ðŸ”Œ
 â€¢ Installing StorageClass ðŸ’¾  ...
 âœ“ Installing StorageClass ðŸ’¾
 â€¢ Joining worker nodes ðŸšœ  ...
 âœ“ Joining worker nodes ðŸšœ
Set kubectl context to "kind-kind"
You can now use your cluster with:

kubectl cluster-info --context kind-kind

Have a nice day! ðŸ‘‹
`kind get kubeconfig-path` is deprecated!

KIND will export and merge kubeconfig like kops, minikube, etc.
This command is now unnecessary and will be removed in a future release.

For more info see: https://github.com/kubernetes-sigs/kind/issues/1060
See also the output of `kind create cluster`

Files changed in python folder:
SKIPPING PYTHON IMAGE BUILD...
Files changed in operator folder:
operator/Dockerfile
operator/Dockerfile.redhat
operator/apis/machinelearning.seldon.io/v1/seldondeployment_webhook.go
operator/apis/machinelearning.seldon.io/v1alpha2/seldondeployment_webhook.go
operator/apis/machinelearning.seldon.io/v1alpha3/seldondeployment_webhook.go
operator/bundle/manifests/seldon-operator.clusterserviceversion.yaml
operator/config/cert/kustomization.yaml
operator/config/controllerid/kustomization.yaml
operator/config/controllerid/webhook-config.yaml
operator/config/default/webhookcainjection_patch.yaml
operator/config/lite/role_webhook.yaml
operator/config/manifests/bases/seldon-operator.clusterserviceversion.yaml
operator/config/namespaced/kustomization.yaml
operator/config/namespaced/webhook-config.yaml
operator/config/openshift/role_webhook.yaml
operator/config/webhook/kustomization.yaml
operator/config/webhook/kustomizeconfig.yaml
operator/config/webhook/manifests.yaml
operator/controllers/seldondeployment_controller.go
operator/go.sum
operator/helm/split_resources.py
operator/testing/machinelearning.seldon.io_seldondeployments.yaml
cd ../../operator && make kind-image-install
make[1]: Entering directory '/workspace/source/operator'
go: creating new go.mod: module tmp
go: downloading sigs.k8s.io/controller-tools v0.2.9
go: found sigs.k8s.io/controller-tools/cmd/controller-gen in sigs.k8s.io/controller-tools v0.2.9
go: downloading github.com/spf13/cobra v0.0.5
go: downloading github.com/fatih/color v1.7.0
go: downloading k8s.io/apiextensions-apiserver v0.17.0
go: downloading k8s.io/apimachinery v0.17.0
go: downloading golang.org/x/tools v0.0.0-20190920225731-5eefd052ad72
go: downloading k8s.io/api v0.17.0
go: downloading sigs.k8s.io/yaml v1.1.0
go: downloading github.com/mattn/go-isatty v0.0.8
go: downloading github.com/mattn/go-colorable v0.1.2
go: downloading gopkg.in/yaml.v2 v2.2.4
go: downloading github.com/google/gofuzz v1.0.0
go: downloading k8s.io/klog v1.0.0
go: downloading github.com/gobuffalo/flect v0.2.0
go: downloading github.com/spf13/pflag v1.0.5
go: downloading github.com/inconshreveable/mousetrap v1.0.0
go: downloading golang.org/x/sys v0.0.0-20190826190057-c7b8b68b1456
go: downloading github.com/gogo/protobuf v1.2.2-0.20190723190241-65acae22fc9d
go: downloading k8s.io/utils v0.0.0-20191114184206-e782cd3c129f
go: downloading gopkg.in/yaml.v3 v3.0.0-20190905181640-827449938966
go: downloading golang.org/x/net v0.0.0-20191004110552-13f9640d40b9
go: downloading gopkg.in/inf.v0 v0.9.1
go: downloading golang.org/x/text v0.3.2
/builder/home/go/bin/controller-gen object:headerFile=./hack/boilerplate.go.txt paths="./..."
go fmt ./...
go vet ./...
go: downloading github.com/onsi/gomega v1.10.4
go: downloading github.com/onsi/ginkgo v1.14.1
go: downloading golang.org/x/xerrors v0.0.0-20200804184101-5ec99f83aff1
go: downloading github.com/nxadm/tail v1.4.4
go: downloading gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7
/builder/home/go/bin/controller-gen "crd:trivialVersions=true" rbac:roleName=manager-role webhook paths="./..." output:crd:artifacts:config=config/crd/bases
rm -rf generated
mkdir generated
kustomize build config/default/ -o generated
cp generated/apiextensions.k8s.io_v1beta1_customresourcedefinition_seldondeployments.machinelearning.seldon.io.yaml testing/machinelearning.seldon.io_seldondeployments.yaml
ginkgo -r -outputdir=. -cover -coverprofile=cover.out ./controllers ./utils ./apis
[1611058170] [1mController Suite[0m - 64/64 specs test k8s client
&{Reader:0xc000600660 Writer:0xc000e76d70 StatusClient:0xc000e76d70}
[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0mE0119 12:10:19.086678   29715 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1.Service: Get "http://127.0.0.1:39989/api/v1/services?allowWatchBookmarks=true&resourceVersion=435&timeoutSeconds=558&watch=true": dial tcp 127.0.0.1:39989: connect: connection refused
E0119 12:10:19.086642   29715 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1alpha3.VirtualService: Get "http://127.0.0.1:39989/apis/networking.istio.io/v1alpha3/virtualservices?allowWatchBookmarks=true&resourceVersion=122&timeoutSeconds=503&watch=true": dial tcp 127.0.0.1:39989: connect: connection refused
E0119 12:10:19.086712   29715 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1.Deployment: Get "http://127.0.0.1:39989/apis/apps/v1/deployments?allowWatchBookmarks=true&resourceVersion=437&timeoutSeconds=525&watch=true": dial tcp 127.0.0.1:39989: connect: connection refused
E0119 12:10:19.086694   29715 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v2beta1.HorizontalPodAutoscaler: Get "http://127.0.0.1:39989/apis/autoscaling/v2beta1/horizontalpodautoscalers?allowWatchBookmarks=true&resourceVersion=420&timeoutSeconds=360&watch=true": dial tcp 127.0.0.1:39989: connect: connection refused
E0119 12:10:19.086698   29715 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1.ConfigMap: Get "http://127.0.0.1:39989/api/v1/configmaps?allowWatchBookmarks=true&resourceVersion=122&timeoutSeconds=471&watch=true": dial tcp 127.0.0.1:39989: connect: connection refused
E0119 12:10:19.086642   29715 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1.Namespace: Get "http://127.0.0.1:39989/api/v1/namespaces?allowWatchBookmarks=true&resourceVersion=412&timeoutSeconds=389&watch=true": dial tcp 127.0.0.1:39989: connect: connection refused
E0119 12:10:19.086648   29715 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1alpha1.ScaledObject: Get "http://127.0.0.1:39989/apis/keda.sh/v1alpha1/scaledobjects?allowWatchBookmarks=true&resourceVersion=401&timeoutSeconds=365&watch=true": dial tcp 127.0.0.1:39989: connect: connection refused
E0119 12:10:19.086721   29715 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1beta1.PodDisruptionBudget: Get "http://127.0.0.1:39989/apis/policy/v1beta1/poddisruptionbudgets?allowWatchBookmarks=true&resourceVersion=229&timeoutSeconds=408&watch=true": dial tcp 127.0.0.1:39989: connect: connection refused
E0119 12:10:19.086955   29715 reflector.go:383] pkg/mod/k8s.io/client-go@v0.18.8/tools/cache/reflector.go:125: Failed to watch *v1.SeldonDeployment: Get "http://127.0.0.1:39989/apis/machinelearning.seldon.io/v1/seldondeployments?allowWatchBookmarks=true&resourceVersion=444&timeoutSeconds=387&watch=true": dial tcp 127.0.0.1:39989: connect: connection refused

 [32mSUCCESS![0m 29.400986839s PASS
coverage: 66.6% of statements
=== RUN   TestGcsSecret
--- PASS: TestGcsSecret (0.00s)
PASS
coverage: 100.0% of statements
=== RUN   TestS3Secret
--- PASS: TestS3Secret (0.00s)
PASS
coverage: 94.6% of statements
=== RUN   TestGetEnvAsBool
--- PASS: TestGetEnvAsBool (0.00s)
=== RUN   TestAddEnvVarToDeploymentContainers
--- PASS: TestAddEnvVarToDeploymentContainers (0.00s)
=== RUN   TestMountSecretToDeploymentContainers
--- PASS: TestMountSecretToDeploymentContainers (0.00s)
PASS
coverage: 30.0% of statements
=== RUN   TestGenerateCerts
--- PASS: TestGenerateCerts (3.74s)
=== RUN   TestConfigmapCreate
--- PASS: TestConfigmapCreate (0.00s)
=== RUN   TestCRDCreate
--- PASS: TestCRDCreate (0.05s)
=== RUN   TestMutatingWebhookCreate
--- PASS: TestMutatingWebhookCreate (4.32s)
=== RUN   TestMutatingWebhookCreateNamespaced
--- PASS: TestMutatingWebhookCreateNamespaced (4.56s)
=== RUN   TestValidatingWebhookCreate
--- PASS: TestValidatingWebhookCreate (3.49s)
=== RUN   TestValidatingWebhookCreateNamespaced
--- PASS: TestValidatingWebhookCreateNamespaced (5.36s)
=== RUN   TestWebHookSvcCreate
--- PASS: TestWebHookSvcCreate (0.95s)
PASS
coverage: 52.1% of statements
=== RUN   TestImageSetNormal
    prepack_test.go:58: Scenario: GRPC image with no version
    prepack_test.go:58: Scenario: REST image with version
    prepack_test.go:58: Scenario: REST image with no version
    prepack_test.go:58: Scenario: GRPC image with version
--- PASS: TestImageSetNormal (0.00s)
=== RUN   TestGetPredictorConfig
    prepack_test.go:91: Scenario: related image sklearn
    prepack_test.go:91: Scenario: default image sklearn
--- PASS: TestGetPredictorConfig (0.00s)
=== RUN   TestPredictorServerConfigPrepackImageName
--- PASS: TestPredictorServerConfigPrepackImageName (0.00s)
=== RUN   TestGetDeploymentNameOneModel
--- PASS: TestGetDeploymentNameOneModel (0.00s)
=== RUN   TestGetDeploymentNameLong
--- PASS: TestGetDeploymentNameLong (0.00s)
=== RUN   TestValidProtocolTransportServerType
--- PASS: TestValidProtocolTransportServerType (0.00s)
=== RUN   TestValidateBadProtocol
--- PASS: TestValidateBadProtocol (0.00s)
=== RUN   TestValidateBadTransport
--- PASS: TestValidateBadTransport (0.00s)
=== RUN   TestValidateBadServerType
--- PASS: TestValidateBadServerType (0.00s)
=== RUN   TestValidateMixedTransport
--- PASS: TestValidateMixedTransport (0.00s)
=== RUN   TestValidateMixedMultipleTransport
--- PASS: TestValidateMixedMultipleTransport (0.00s)
=== RUN   TestDefaultSingleContainer
--- PASS: TestDefaultSingleContainer (0.00s)
=== RUN   TestMetricsPortAddedTwoContainers
--- PASS: TestMetricsPortAddedTwoContainers (0.00s)
=== RUN   TestMetricsPortAddedTwoComponentSpecsTwoContainers
--- PASS: TestMetricsPortAddedTwoComponentSpecsTwoContainers (0.00s)
=== RUN   TestOverrideMetricsPortName
Failed to find config map seldon-config
no kind is registered for the type v1.ConfigMap in scheme "pkg/runtime/scheme.go:101"
--- PASS: TestOverrideMetricsPortName (0.00s)
=== RUN   TestPortUseExisting
--- PASS: TestPortUseExisting (0.00s)
=== RUN   TestMetricsPortAddedToPrepacked
--- PASS: TestMetricsPortAddedToPrepacked (0.00s)
=== RUN   TestPredictorProtocolGrpc
--- PASS: TestPredictorProtocolGrpc (0.00s)
=== RUN   TestPrepackedWithExistingContainer
--- PASS: TestPrepackedWithExistingContainer (0.00s)
=== RUN   TestPrepackedWithCustom
--- PASS: TestPrepackedWithCustom (0.00s)
=== RUN   TestPrepackedWithExistingContainerAndImage
--- PASS: TestPrepackedWithExistingContainerAndImage (0.00s)
=== RUN   TestMetricsPortAddedToTwoPrepacked
--- PASS: TestMetricsPortAddedToTwoPrepacked (0.00s)
=== RUN   TestDefaultPrepackagedServerType
--- PASS: TestDefaultPrepackagedServerType (0.00s)
=== RUN   TestValidateSingleModel
--- PASS: TestValidateSingleModel (0.00s)
=== RUN   TestValidateSingleModelNoName
--- PASS: TestValidateSingleModelNoName (0.00s)
=== RUN   TestValidateNoEngineMultiGraph
--- PASS: TestValidateNoEngineMultiGraph (0.00s)
=== RUN   TestValidateDuplPredictorName
--- PASS: TestValidateDuplPredictorName (0.00s)
=== RUN   TestValidateTrafficSum
--- PASS: TestValidateTrafficSum (0.00s)
=== RUN   TestDefaultABTest
--- PASS: TestDefaultABTest (0.00s)
=== RUN   TestValidateTensorflowProtocolNormalPrepackaged
--- PASS: TestValidateTensorflowProtocolNormalPrepackaged (0.00s)
=== RUN   TestValidateTensorflowProtocolNormal
--- PASS: TestValidateTensorflowProtocolNormal (0.00s)
=== RUN   TestValidateV2ProtocolNormal
--- PASS: TestValidateV2ProtocolNormal (0.00s)
=== RUN   TestPredictorNoGraph
--- PASS: TestPredictorNoGraph (0.00s)
=== RUN   TestShadowPredictor
--- PASS: TestShadowPredictor (0.00s)
=== RUN   TestNoPredictors
--- PASS: TestNoPredictors (0.00s)
=== RUN   TestValidateTwoShadows
--- PASS: TestValidateTwoShadows (0.00s)
PASS
coverage: 37.9% of statements
path is /workspace/source/operator
All profiles combined

Ginkgo ran 6 suites in 1m11.31859208s
Test Suite Passed
docker build . -t seldonio/seldon-core-operator:1.6.0-dev
Sending build context to Docker daemon  16.03MB
Step 1/27 : FROM golang:1.14.9 as builder
1.14.9: Pulling from library/golang
e4c3d3e4f7b0: Pulling fs layer
101c41d0463b: Pulling fs layer
8275efcd805f: Pulling fs layer
751620502a7a: Pulling fs layer
aaabf962c4fc: Pulling fs layer
5610ac35c8d2: Pulling fs layer
324c78229f75: Pulling fs layer
aaabf962c4fc: Waiting
751620502a7a: Waiting
5610ac35c8d2: Waiting
324c78229f75: Waiting
101c41d0463b: Verifying Checksum
101c41d0463b: Download complete
8275efcd805f: Verifying Checksum
8275efcd805f: Download complete
e4c3d3e4f7b0: Verifying Checksum
e4c3d3e4f7b0: Download complete
751620502a7a: Verifying Checksum
751620502a7a: Download complete
324c78229f75: Verifying Checksum
324c78229f75: Download complete
aaabf962c4fc: Verifying Checksum
aaabf962c4fc: Download complete
e4c3d3e4f7b0: Pull complete
5610ac35c8d2: Verifying Checksum
5610ac35c8d2: Download complete
101c41d0463b: Pull complete
8275efcd805f: Pull complete
751620502a7a: Pull complete
aaabf962c4fc: Pull complete
5610ac35c8d2: Pull complete
324c78229f75: Pull complete
Digest: sha256:b840a07bab2739c266c8728246fc243444f192b44933f4b8beb8ce9f806fae46
Status: Downloaded newer image for golang:1.14.9
 ---> 39111ae98c91
Step 2/27 : WORKDIR /workspace
 ---> Running in a97001cd8471
Removing intermediate container a97001cd8471
 ---> 351c8f3050be
Step 3/27 : COPY go.mod go.mod
 ---> 8d66009682d5
Step 4/27 : COPY go.sum go.sum
 ---> 2be7063b622f
Step 5/27 : RUN go mod download
 ---> Running in 61359f83bb7f
Removing intermediate container 61359f83bb7f
 ---> 3baf7a9a1980
Step 6/27 : COPY main.go main.go
 ---> e55089c582ad
Step 7/27 : COPY apis/ apis/
 ---> c6bc8705ca41
Step 8/27 : COPY controllers/ controllers/
 ---> 9b0ef06567b5
Step 9/27 : COPY utils/ utils/
 ---> 247969402127
Step 10/27 : COPY constants/ constants/
 ---> ff8d3cbcef36
Step 11/27 : COPY client/ client/
 ---> 704123bfb044
Step 12/27 : RUN go build -a -o manager main.go
 ---> Running in 40c0805c7144
Removing intermediate container 40c0805c7144
 ---> 84ab69d1e075
Step 13/27 : RUN wget -O hashicorp-golang-lru.tar.gz https://github.com/hashicorp/golang-lru/archive/master.tar.gz
 ---> Running in 127deaea1361
[91m--2021-01-19 12:13:46--  https://github.com/hashicorp/golang-lru/archive/master.tar.gz
[0m[91mResolving github.com (github.com)... [0m[91m140.82.121.4
Connecting to github.com (github.com)|140.82.121.4|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m302 Found
Location: https://codeload.github.com/hashicorp/golang-lru/tar.gz/master [following]
--2021-01-19 12:13:46--  https://codeload.github.com/hashicorp/golang-lru/tar.gz/master
Resolving codeload.github.com (codeload.github.com)... [0m[91m140.82.121.9
Connecting to codeload.github.com (codeload.github.com)|140.82.121.9|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m200 OK
Length: unspecified [application/x-gzip]
Saving to: 'hashicorp-golang-lru.tar.gz'

     0K ...[0m[91m..[0m[91m..[0m[91m... .[0m[91m...                                        1.00M=0.01s

[0m[91m2021-01-19 12:13:46 (1.00 MB/s) - 'hashicorp-golang-lru.tar.gz' saved [14371]

[0mRemoving intermediate container 127deaea1361
 ---> 7f23ad9b5306
Step 14/27 : RUN wget -O armon-consul-api.tar.gz https://github.com/armon/consul-api/archive/master.tar.gz
 ---> Running in 82e1b7a338bc
[91m--2021-01-19 12:13:47--  https://github.com/armon/consul-api/archive/master.tar.gz
[0m[91mResolving github.com (github.com)... [0m[91m140.82.121.4
Connecting to github.com (github.com)|140.82.121.4|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m302 Found
Location: https://codeload.github.com/armon/consul-api/tar.gz/master [following]
--2021-01-19 12:13:47--  https://codeload.github.com/armon/consul-api/tar.gz/master
Resolving codeload.github.com (codeload.github.com)... [0m[91m140.82.121.9
Connecting to codeload.github.com (codeload.github.com)|140.82.121.9|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m200 OK
Length: unspecified [application/x-gzip]
Saving to: 'armon-consul-api.tar.gz'
[0m[91m
     0K ....[0m[91m.[0m[91m..[0m[91m... .[0m[91m......                    [0m[91m                 1.30M=0.01s

[0m[91m2021-01-19 12:13:48 (1.30 MB/s) - 'armon-consul-api.tar.gz' saved [17977]

[0mRemoving intermediate container 82e1b7a338bc
 ---> 3cebdb21f9f5
Step 15/27 : RUN wget -O hasicorp-hcl.tar.gz https://github.com/hashicorp/hcl/archive/master.tar.gz
 ---> Running in 3951ebc718c7
[91m--2021-01-19 12:13:48--  https://github.com/hashicorp/hcl/archive/master.tar.gz
[0m[91mResolving github.com (github.com)... [0m[91m140.82.121.4
Connecting to github.com (github.com)|140.82.121.4|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m302 Found
Location: https://codeload.github.com/hashicorp/hcl/tar.gz/master [following]
--2021-01-19 12:13:49--  https://codeload.github.com/hashicorp/hcl/tar.gz/master
Resolving codeload.github.com (codeload.github.com)... [0m[91m140.82.121.9
Connecting to codeload.github.com (codeload.github.com)|140.82.121.9|:443... [0m[91mconnected.
[0m[91mHTTP request sent, awaiting response... [0m[91m200 OK
Length: unspecified [application/x-gzip]
Saving to: 'hasicorp-hcl.tar.gz'
[0m[91m
     0K .....[0m[91m...[0m[91m.. .[0m[91m.......[0m[91m.[0m[91m. .......[0m[91m... .[0m[91m.[0m[91m.[0m[91m...[0m[91m.[0m[91m..[0m[91m. .....[0m[91m..[0m[91m..[0m[91m. 1.83M
    50K ..[0m[91m...[0m[91m.[0m[91m...[0m[91m. ..[0m[91m...[0m[91m...[0m[91m.. .  [0m[91m                              1.58M=0.04s[0m[91m

[0m[91m2021-01-19 12:13:49 (1.75 MB/s) - 'hasicorp-hcl.tar.gz' saved [72944]

[0mRemoving intermediate container 3951ebc718c7
 ---> 3252f99a1478
Step 16/27 : FROM gcr.io/distroless/base:latest
latest: Pulling from distroless/base
5749e56bea71: Pulling fs layer
a3e61620654b: Pulling fs layer
5749e56bea71: Verifying Checksum
5749e56bea71: Download complete
a3e61620654b: Verifying Checksum
a3e61620654b: Download complete
5749e56bea71: Pull complete
a3e61620654b: Pull complete
Digest: sha256:5e0cc69445ed1d8a17198250a7249d56dd4b6966bb6b2118e60ae9194c310647
Status: Downloaded newer image for gcr.io/distroless/base:latest
 ---> 125289cb40fd
Step 17/27 : WORKDIR /
 ---> Running in 9a1016695496
Removing intermediate container 9a1016695496
 ---> 1a09267c19ab
Step 18/27 : COPY --from=builder /workspace/manager .
 ---> 24cfd5164041
Step 19/27 : COPY licenses/license.txt licenses/license.txt
 ---> 74171244beb7
Step 20/27 : COPY --from=builder /workspace/hashicorp-golang-lru.tar.gz licenses/mpl_source/hashicorp-golang-lru.tar.gz
 ---> 5215fb7c7bce
Step 21/27 : COPY --from=builder /workspace/armon-consul-api.tar.gz licenses/mpl_source/armon-consul-api.tar.gz
 ---> 1d8b6d2520dc
Step 22/27 : COPY --from=builder /workspace/hasicorp-hcl.tar.gz licenses/mpl_source/hasicorp-hcl.tar.gz
 ---> 297f8351b6fd
Step 23/27 : COPY generated/admissionregistration.k8s.io_v1beta1_validatingwebhookconfiguration_seldon-validating-webhook-configuration.yaml /tmp/operator-resources/validate.yaml
 ---> 5c0b853c106c
Step 24/27 : COPY generated/~g_v1_service_seldon-webhook-service.yaml /tmp/operator-resources/service.yaml
 ---> b57c1f4bf099
Step 25/27 : COPY generated/~g_v1_configmap_seldon-config.yaml /tmp/operator-resources/configmap.yaml
 ---> bde05f0f6e62
Step 26/27 : COPY generated/apiextensions.k8s.io_v1beta1_customresourcedefinition_seldondeployments.machinelearning.seldon.io.yaml /tmp/operator-resources/crd.yaml
 ---> 1669bb79c691
Step 27/27 : ENTRYPOINT ["/manager"]
 ---> Running in 71b469742293
Removing intermediate container 71b469742293
 ---> f37defde8c75
Successfully built f37defde8c75
Successfully tagged seldonio/seldon-core-operator:1.6.0-dev
kind load -v 3 docker-image seldonio/seldon-core-operator:1.6.0-dev --name kind
Image: "seldonio/seldon-core-operator:1.6.0-dev" with ID "sha256:f37defde8c755e6342278a37c80691422dd35e90c2ae72702f092712ee2497f2" not present on node "kind-worker"
Image: "seldonio/seldon-core-operator:1.6.0-dev" with ID "sha256:f37defde8c755e6342278a37c80691422dd35e90c2ae72702f092712ee2497f2" not present on node "kind-control-plane"
make[1]: Leaving directory '/workspace/source/operator'
Files changed in engine folder:
SKIPPING ENGINE IMAGE BUILD...
Files changed in executor folder:
SKIPPING EXECUTOR IMAGE BUILD...
Build test models
make -C ../../examples/models/mean_classifier kind_load
make[1]: Entering directory '/workspace/source/examples/models/mean_classifier'
s2i build -E environment . seldonio/seldon-core-s2i-python37-ubi8:1.6.0-dev seldonio/mock_classifier:1.6.0-dev
Before assembling
---> Installing application source...
---> Installing dependencies ...
Looking in links: /whl
Requirement already satisfied: seldon-core in ./python (from -r requirements.txt (line 1)) (1.6.0.dev0)
Requirement already satisfied: numpy in /opt/conda/lib/python3.7/site-packages (from -r requirements.txt (line 2)) (1.19.5)
Requirement already satisfied: Flask<2.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.1.2)
Requirement already satisfied: jsonschema<4.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (3.2.0)
Requirement already satisfied: Flask-cors<4.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (3.0.10)
Requirement already satisfied: redis<4.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (3.5.3)
Requirement already satisfied: requests<3.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (2.22.0)
Requirement already satisfied: flatbuffers<2.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.12)
Requirement already satisfied: protobuf<4.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (3.14.0)
Requirement already satisfied: grpcio<2.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.34.1)
Requirement already satisfied: Flask-OpenTracing<1.2.0,>=1.1.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.1.0)
Requirement already satisfied: opentracing<2.5.0,>=2.2.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (2.4.0)
Requirement already satisfied: jaeger-client<4.5.0,>=4.1.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (4.4.0)
Requirement already satisfied: grpcio-opentracing<1.2.0,>=1.1.4 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.1.4)
Requirement already satisfied: grpcio-reflection<1.35.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (1.34.1)
Requirement already satisfied: PyYAML<5.4 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (5.3.1)
Requirement already satisfied: gunicorn<20.1.0,>=19.9.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (20.0.4)
Requirement already satisfied: setuptools>=41.0.0 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (41.4.0)
Requirement already satisfied: prometheus_client<0.9.0,>=0.7.1 in /opt/conda/lib/python3.7/site-packages (from seldon-core->-r requirements.txt (line 1)) (0.8.0)
Requirement already satisfied: Jinja2>=2.10.1 in /opt/conda/lib/python3.7/site-packages (from Flask<2.0.0->seldon-core->-r requirements.txt (line 1)) (2.11.2)
Requirement already satisfied: click>=5.1 in /opt/conda/lib/python3.7/site-packages (from Flask<2.0.0->seldon-core->-r requirements.txt (line 1)) (7.1.2)
Requirement already satisfied: Werkzeug>=0.15 in /opt/conda/lib/python3.7/site-packages (from Flask<2.0.0->seldon-core->-r requirements.txt (line 1)) (1.0.1)
Requirement already satisfied: itsdangerous>=0.24 in /opt/conda/lib/python3.7/site-packages (from Flask<2.0.0->seldon-core->-r requirements.txt (line 1)) (1.1.0)
Requirement already satisfied: six>=1.11.0 in /opt/conda/lib/python3.7/site-packages (from jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (1.12.0)
Requirement already satisfied: importlib-metadata; python_version < "3.8" in /opt/conda/lib/python3.7/site-packages (from jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (3.4.0)
Requirement already satisfied: attrs>=17.4.0 in /opt/conda/lib/python3.7/site-packages (from jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (20.3.0)
Requirement already satisfied: pyrsistent>=0.14.0 in /opt/conda/lib/python3.7/site-packages (from jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (0.17.3)
Requirement already satisfied: certifi>=2017.4.17 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->seldon-core->-r requirements.txt (line 1)) (2020.12.5)
Requirement already satisfied: chardet<3.1.0,>=3.0.2 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->seldon-core->-r requirements.txt (line 1)) (3.0.4)
Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->seldon-core->-r requirements.txt (line 1)) (1.24.2)
Requirement already satisfied: idna<2.9,>=2.5 in /opt/conda/lib/python3.7/site-packages (from requests<3.0.0->seldon-core->-r requirements.txt (line 1)) (2.8)
Requirement already satisfied: thrift in /opt/conda/lib/python3.7/site-packages (from jaeger-client<4.5.0,>=4.1.0->seldon-core->-r requirements.txt (line 1)) (0.13.0)
Requirement already satisfied: tornado>=4.3 in /opt/conda/lib/python3.7/site-packages (from jaeger-client<4.5.0,>=4.1.0->seldon-core->-r requirements.txt (line 1)) (6.1)
Requirement already satisfied: threadloop<2,>=1 in /opt/conda/lib/python3.7/site-packages (from jaeger-client<4.5.0,>=4.1.0->seldon-core->-r requirements.txt (line 1)) (1.0.2)
Requirement already satisfied: MarkupSafe>=0.23 in /opt/conda/lib/python3.7/site-packages (from Jinja2>=2.10.1->Flask<2.0.0->seldon-core->-r requirements.txt (line 1)) (1.1.1)
Requirement already satisfied: typing-extensions>=3.6.4; python_version < "3.8" in /opt/conda/lib/python3.7/site-packages (from importlib-metadata; python_version < "3.8"->jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (3.7.4.3)
Requirement already satisfied: zipp>=0.5 in /opt/conda/lib/python3.7/site-packages (from importlib-metadata; python_version < "3.8"->jsonschema<4.0.0->seldon-core->-r requirements.txt (line 1)) (3.4.0)
WARNING: Url '/whl' is ignored. It is either a non-existing path or lacks a specific scheme.
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=8615fd6eb1840294d9e163f5f0a3ffdcdd4c1860c11a8a641465ba5fd9bab178
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
After successful assembling
Build completed successfully
kind load -v 3 docker-image seldonio/mock_classifier:1.6.0-dev
Image: "seldonio/mock_classifier:1.6.0-dev" with ID "sha256:d1a7398533d276666b237055134d7c3e77393bb90c6ab575bd9d1a005e9948a3" not present on node "kind-worker"
Image: "seldonio/mock_classifier:1.6.0-dev" with ID "sha256:d1a7398533d276666b237055134d7c3e77393bb90c6ab575bd9d1a005e9948a3" not present on node "kind-control-plane"
make[1]: Leaving directory '/workspace/source/examples/models/mean_classifier'
make -C ../docker/fixed-model kind_load_images
make[1]: Entering directory '/workspace/source/testing/docker/fixed-model'
s2i build -E environment_v1 . seldonio/seldon-core-s2i-python3:1.6.0-dev seldonio/fixed-model:0.1
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=d2b1cb6695b1d3d835892691643960b6eb94834d444b8414b7e8deb138d2b68e
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
s2i build -E environment_v2 . seldonio/seldon-core-s2i-python3:1.6.0-dev  seldonio/fixed-model:0.2
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=adb268dac69d49d2b7be9ca6566a6369570169be1233279f2ae2e8b532d99714
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
kind load -v 3 docker-image seldonio/fixed-model:0.1
Image: "seldonio/fixed-model:0.1" with ID "sha256:a0ba0c0a152a74067035b0e0f174fae7b8b2563bd148226972f456d8142a97d3" not present on node "kind-worker"
Image: "seldonio/fixed-model:0.1" with ID "sha256:a0ba0c0a152a74067035b0e0f174fae7b8b2563bd148226972f456d8142a97d3" not present on node "kind-control-plane"
kind load -v 3 docker-image seldonio/fixed-model:0.2
Image: "seldonio/fixed-model:0.2" with ID "sha256:3714a630cb91865ff67fc2e79d6afaecaa95ecfa15db31e1be9047da0bbdbda9" not present on node "kind-worker"
Image: "seldonio/fixed-model:0.2" with ID "sha256:3714a630cb91865ff67fc2e79d6afaecaa95ecfa15db31e1be9047da0bbdbda9" not present on node "kind-control-plane"
make[1]: Leaving directory '/workspace/source/testing/docker/fixed-model'
make -C ../docker/echo-model kind_load_image
make[1]: Entering directory '/workspace/source/testing/docker/echo-model'
s2i build \
	-E environment_rest \
	.\
	seldonio/seldon-core-s2i-python3:1.6.0-dev\
	seldonio/echo-model:0.1
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=80f3534dca0fc150cef1a17741ccb91207587af5292656ddb783d36d4f19435a
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
kind load -v 3 docker-image seldonio/echo-model:0.1
Image: "seldonio/echo-model:0.1" with ID "sha256:8c3783a98714617134fda354b629016766352a445b3b13fc2d864b804db0877f" not present on node "kind-worker"
Image: "seldonio/echo-model:0.1" with ID "sha256:8c3783a98714617134fda354b629016766352a445b3b13fc2d864b804db0877f" not present on node "kind-control-plane"
make[1]: Leaving directory '/workspace/source/testing/docker/echo-model'
Files changed in prepackaged folder:
SKIPPING PREPACKAGED IMAGE BUILD...
Files changed in alibi explain folder:
SKIPPING ALIBI EXPLAIN IMAGE BUILD...
Files changed in alibi detect folder:
SKIPPING ALIBI DETECT IMAGE BUILD...
Files changed in misc folders:
SKIPPING MISC IMAGE BUILD...
kubectl create namespace seldon || echo "Namespace seldon already exists"
namespace/seldon created
kubectl create namespace test1 || echo "Namespace test1 already exists"
namespace/test1 created
helm repo add seldonio https://storage.googleapis.com/seldon-charts
"seldonio" has been added to your repositories
helm repo add jaegertracing https://jaegertracing.github.io/helm-charts
"jaegertracing" has been added to your repositories
helm repo add datawire https://www.getambassador.io
"datawire" has been added to your repositories
helm repo update
Hang tight while we grab the latest from your chart repositories...
...Successfully got an update from the "jaegertracing" chart repository
...Successfully got an update from the "seldonio" chart repository
...Successfully got an update from the "datawire" chart repository
Update Complete. âŽˆ Happy Helming!âŽˆ 
helm upgrade ambassador \
	datawire/ambassador \
	-f ../resources/ambassador_values.yaml \
	--set image.repository=quay.io/datawire/ambassador \
	--set crds.keep=false \
	--set enableAES=false \
	--namespace seldon \
	--set replicaCount=1 \
	--wait --install
Release "ambassador" does not exist. Installing it now.
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
manifest_sorter.go:192: info: skipping unknown hook: "crd-install"
NAME: ambassador
LAST DEPLOYED: Tue Jan 19 12:19:45 2021
NAMESPACE: seldon
STATUS: deployed
REVISION: 1
NOTES:
-------------------------------------------------------------------------------
  Congratulations! You've successfully installed Ambassador!

-------------------------------------------------------------------------------
To get the IP address of Ambassador, run the following commands:
  export NODE_PORT=$(kubectl get --namespace seldon -o jsonpath="{.spec.ports[0].nodePort}" services ambassador)
  export NODE_IP=$(kubectl get nodes --namespace seldon -o jsonpath="{.items[0].status.addresses[0].address}")
  echo http://$NODE_IP:$NODE_PORT

For help, visit our Slack at https://d6e.co/slack or view the documentation online at https://www.getambassador.io.
curl -L https://istio.io/downloadIstio | ISTIO_VERSION=1.6.8 TARGET_ARCH=x86_64 sh -
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   102  100   102    0     0    236      0 --:--:-- --:--:-- --:--:--   236
100  4579  100  4579    0     0   8340      0 --:--:-- --:--:-- --:--:--  8340

Downloading istio-1.6.8 from https://github.com/istio/istio/releases/download/1.6.8/istio-1.6.8-linux-amd64.tar.gz ...

Istio 1.6.8 Download Complete!

Istio has been successfully downloaded into the istio-1.6.8 folder on your system.

Next Steps:
See https://istio.io/latest/docs/setup/install/ to add Istio to your Kubernetes cluster.

To configure the istioctl client tool for your workstation,
add the /workspace/source/testing/scripts/istio-1.6.8/bin directory to your environment path variable with:
	 export PATH="$PATH:/workspace/source/testing/scripts/istio-1.6.8/bin"

Begin the Istio pre-installation check by running:
	 istioctl x precheck 

Need more information? Visit https://istio.io/latest/docs/setup/install/ 
istio-1.6.8/bin/istioctl install --set profile=demo
Detected that your cluster does not support third party JWT authentication. Falling back to less secure first party JWT. See https://istio.io/docs/ops/best-practices/security/#configure-third-party-service-account-tokens for details.

- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
- Processing resources for Istio core.
âœ” Istio core installed
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod.
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
- Processing resources for Istiod. Waiting for Deployment/istio-system/istiod
âœ” Istiod installed
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways.
- Processing resources for Egress gateways, Ingress gateways. Waiting for Deployment/istio-system...
- Processing resources for Egress gateways, Ingress gateways. Waiting for Deployment/istio-system...
- Processing resources for Egress gateways, Ingress gateways. Waiting for Deployment/istio-system...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
- Processing resources for Addons, Egress gateways, Ingress gateways. Waiting for Deployment/isti...
âœ” Ingress gateways installed
- Processing resources for Addons, Egress gateways. Waiting for Deployment/istio-system/grafana, ...
- Processing resources for Addons, Egress gateways. Waiting for Deployment/istio-system/grafana, ...
- Processing resources for Addons, Egress gateways. Waiting for Deployment/istio-system/grafana, ...
âœ” Egress gateways installed
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/grafana, Deployment/istio-...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali, Deployment/istio-sy...
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali
- Processing resources for Addons. Waiting for Deployment/istio-system/kiali
âœ” Addons installed
- Pruning removed resources
kubectl patch svc istio-ingressgateway -n istio-system --patch "$(cat ../resources/istio-ingressgateway-patch.yaml)"
service/istio-ingressgateway patched
kubectl create -f ../resources/seldon-gateway.yaml -n istio-system
gateway.networking.istio.io/seldon-gateway created
kubectl apply -f https://github.com/kedacore/keda/releases/download/v2.0.0/keda-2.0.0.yaml
namespace/keda created
customresourcedefinition.apiextensions.k8s.io/scaledjobs.keda.sh created
customresourcedefinition.apiextensions.k8s.io/scaledobjects.keda.sh created
customresourcedefinition.apiextensions.k8s.io/triggerauthentications.keda.sh created
serviceaccount/keda-operator created
clusterrole.rbac.authorization.k8s.io/keda-external-metrics-reader created
clusterrole.rbac.authorization.k8s.io/keda-operator created
rolebinding.rbac.authorization.k8s.io/keda-auth-reader created
clusterrolebinding.rbac.authorization.k8s.io/keda-hpa-controller-external-metrics created
clusterrolebinding.rbac.authorization.k8s.io/keda-operator created
clusterrolebinding.rbac.authorization.k8s.io/keda:system:auth-delegator created
service/keda-metrics-apiserver created
deployment.apps/keda-metrics-apiserver created
deployment.apps/keda-operator created
apiservice.apiregistration.k8s.io/v1beta1.external.metrics.k8s.io created
helm upgrade jaeger-operator \
	jaegertracing/jaeger-operator \
	--set rbac.clusterRole=true \
	--namespace seldon \
	--wait --install
Release "jaeger-operator" does not exist. Installing it now.
âœ” Installation completemanifest_sorter.go:192: info: skipping unknown hook: "crd-install"
NAME: jaeger-operator
LAST DEPLOYED: Tue Jan 19 12:21:41 2021
NAMESPACE: seldon
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
jaeger-operator is installed.


Check the jaeger-operator logs
  export POD=$(kubectl get pods -l app.kubernetes.io/instance=jaeger-operator -lapp.kubernetes.io/name=jaeger-operator --namespace seldon --output name)
  kubectl logs $POD --namespace=seldon
kubectl apply -f ../resources/jaeger.yaml --namespace seldon
jaeger.jaegertracing.io/jaeger created
mapping.getambassador.io/jaeger created
kubectl create namespace seldon-system || echo "namespace seldon-system exists"
namespace/seldon-system created
helm delete seldon --namespace seldon-system || echo "seldon-core not installed"
Error: uninstall: Release not loaded: seldon: release: not found
seldon-core not installed
helm upgrade seldon \
	../../helm-charts/seldon-core-operator \
	--namespace seldon-system \
	--set istio.enabled=true \
	--set keda.enabled=true \
	--set istio.gateway=istio-system/seldon-gateway \
	--set certManager.enabled=false \
	--set executor.enabled="true" \
	--wait --install
Release "seldon" does not exist. Installing it now.
NAME: seldon
LAST DEPLOYED: Tue Jan 19 12:22:01 2021
NAMESPACE: seldon-system
STATUS: deployed
REVISION: 1
TEST SUITE: None
kubectl config set-context $(kubectl config current-context) --namespace=seldon
Context "kind-kind" modified.
kubectl apply -f metrics.yaml
clusterrole.rbac.authorization.k8s.io/system:aggregated-metrics-reader created
clusterrolebinding.rbac.authorization.k8s.io/metrics-server:system:auth-delegator created
rolebinding.rbac.authorization.k8s.io/metrics-server-auth-reader created
apiservice.apiregistration.k8s.io/v1beta1.metrics.k8s.io created
serviceaccount/metrics-server created
deployment.apps/metrics-server created
service/metrics-server created
clusterrole.rbac.authorization.k8s.io/system:metrics-server created
clusterrolebinding.rbac.authorization.k8s.io/system:metrics-server created
make: Entering directory '/workspace/source/python'
pip install -e . -r requirements-dev.txt
Obtaining file:///workspace/source/python
Collecting black==20.8b1
  Downloading black-20.8b1.tar.gz (1.1 MB)
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Getting requirements to build wheel: started
  Getting requirements to build wheel: finished with status 'done'
    Preparing wheel metadata: started
    Preparing wheel metadata: finished with status 'done'
Collecting flake8==3.8.1
  Downloading flake8-3.8.1-py2.py3-none-any.whl (72 kB)
Collecting mypy<0.791
  Downloading mypy-0.790-cp36-cp36m-manylinux1_x86_64.whl (21.0 MB)
Collecting Pillow==8.1.0
  Downloading Pillow-8.1.0-cp36-cp36m-manylinux1_x86_64.whl (2.2 MB)
Collecting pytest==6.2.1
  Downloading pytest-6.2.1-py3-none-any.whl (279 kB)
Collecting pytest-cov==2.10.1
  Downloading pytest_cov-2.10.1-py2.py3-none-any.whl (19 kB)
Collecting tox<4.0.0
  Downloading tox-3.21.2-py2.py3-none-any.whl (84 kB)
Collecting grpcio-tools==1.33.2
  Downloading grpcio_tools-1.33.2-cp36-cp36m-manylinux2014_x86_64.whl (2.5 MB)
Collecting mypy-protobuf==1.22
  Downloading mypy_protobuf-1.22-py3-none-any.whl (7.5 kB)
Collecting tenacity==6.3.1
  Downloading tenacity-6.3.1-py2.py3-none-any.whl (36 kB)
Collecting coverage==5.3.1
  Downloading coverage-5.3.1-cp36-cp36m-manylinux2010_x86_64.whl (241 kB)
Collecting pandas==1.1.0
  Downloading pandas-1.1.0-cp36-cp36m-manylinux1_x86_64.whl (10.5 MB)
Collecting pip-licenses==3.1.0
  Downloading pip_licenses-3.1.0-py3-none-any.whl (15 kB)
Collecting Flask<2.0.0
  Downloading Flask-1.1.2-py2.py3-none-any.whl (94 kB)
Requirement already satisfied: jsonschema<4.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (3.2.0)
Collecting Flask-cors<4.0.0
  Downloading Flask_Cors-3.0.10-py2.py3-none-any.whl (14 kB)
Collecting redis<4.0.0
  Downloading redis-3.5.3-py2.py3-none-any.whl (72 kB)
Requirement already satisfied: requests<3.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (2.24.0)
Requirement already satisfied: numpy<2.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (1.19.2)
Collecting flatbuffers<2.0.0
  Downloading flatbuffers-1.12-py2.py3-none-any.whl (15 kB)
Requirement already satisfied: protobuf<4.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (3.13.0)
Requirement already satisfied: grpcio<2.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (1.32.0)
Collecting Flask-OpenTracing<1.2.0,>=1.1.0
  Downloading Flask-OpenTracing-1.1.0.tar.gz (8.2 kB)
Collecting opentracing<2.5.0,>=2.2.0
  Downloading opentracing-2.4.0.tar.gz (46 kB)
Collecting jaeger-client<4.5.0,>=4.1.0
  Downloading jaeger-client-4.4.0.tar.gz (83 kB)
Collecting grpcio-opentracing<1.2.0,>=1.1.4
  Downloading grpcio_opentracing-1.1.4-py3-none-any.whl (14 kB)
Collecting grpcio-reflection<1.35.0
  Downloading grpcio-reflection-1.34.1.tar.gz (11 kB)
Requirement already satisfied: PyYAML<5.4 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (5.3.1)
Collecting gunicorn<20.1.0,>=19.9.0
  Downloading gunicorn-20.0.4-py2.py3-none-any.whl (77 kB)
Requirement already satisfied: setuptools>=41.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (50.3.0)
Requirement already satisfied: prometheus_client<0.9.0,>=0.7.1 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (0.8.0)
Collecting appdirs
  Downloading appdirs-1.4.4-py2.py3-none-any.whl (9.6 kB)
Collecting dataclasses>=0.6; python_version < "3.7"
  Downloading dataclasses-0.8-py3-none-any.whl (19 kB)
Collecting regex>=2020.1.8
  Downloading regex-2020.11.13-cp36-cp36m-manylinux2014_x86_64.whl (723 kB)
Requirement already satisfied: typing-extensions>=3.7.4 in /usr/local/lib/python3.6/site-packages (from black==20.8b1->-r requirements-dev.txt (line 2)) (3.7.4.3)
Collecting typed-ast>=1.4.0
  Downloading typed_ast-1.4.2-cp36-cp36m-manylinux1_x86_64.whl (743 kB)
Collecting click>=7.1.2
  Downloading click-7.1.2-py2.py3-none-any.whl (82 kB)
Collecting toml>=0.10.1
  Downloading toml-0.10.2-py2.py3-none-any.whl (16 kB)
Collecting mypy-extensions>=0.4.3
  Downloading mypy_extensions-0.4.3-py2.py3-none-any.whl (4.5 kB)
Collecting pathspec<1,>=0.6
  Downloading pathspec-0.8.1-py2.py3-none-any.whl (28 kB)
Collecting pyflakes<2.3.0,>=2.2.0
  Downloading pyflakes-2.2.0-py2.py3-none-any.whl (66 kB)
Collecting pycodestyle<2.7.0,>=2.6.0a1
  Downloading pycodestyle-2.6.0-py2.py3-none-any.whl (41 kB)
Collecting mccabe<0.7.0,>=0.6.0
  Downloading mccabe-0.6.1-py2.py3-none-any.whl (8.6 kB)
Requirement already satisfied: importlib-metadata; python_version < "3.8" in /usr/local/lib/python3.6/site-packages (from flake8==3.8.1->-r requirements-dev.txt (line 3)) (2.0.0)
Requirement already satisfied: packaging in /usr/local/lib/python3.6/site-packages (from pytest==6.2.1->-r requirements-dev.txt (line 6)) (20.4)
Requirement already satisfied: pluggy<1.0.0a1,>=0.12 in /usr/local/lib/python3.6/site-packages (from pytest==6.2.1->-r requirements-dev.txt (line 6)) (0.13.1)
Requirement already satisfied: attrs>=19.2.0 in /usr/local/lib/python3.6/site-packages (from pytest==6.2.1->-r requirements-dev.txt (line 6)) (20.2.0)
Requirement already satisfied: py>=1.8.2 in /usr/local/lib/python3.6/site-packages (from pytest==6.2.1->-r requirements-dev.txt (line 6)) (1.9.0)
Collecting iniconfig
  Downloading iniconfig-1.1.1-py2.py3-none-any.whl (5.0 kB)
Collecting virtualenv!=20.0.0,!=20.0.1,!=20.0.2,!=20.0.3,!=20.0.4,!=20.0.5,!=20.0.6,!=20.0.7,>=16.0.0
  Downloading virtualenv-20.4.0-py2.py3-none-any.whl (5.7 MB)
Requirement already satisfied: six>=1.14.0 in /usr/local/lib/python3.6/site-packages (from tox<4.0.0->-r requirements-dev.txt (line 8)) (1.15.0)
Collecting filelock>=3.0.0
  Downloading filelock-3.0.12-py3-none-any.whl (7.6 kB)
Requirement already satisfied: python-dateutil>=2.7.3 in /usr/local/lib/python3.6/site-packages (from pandas==1.1.0->-r requirements-dev.txt (line 19)) (2.8.1)
Requirement already satisfied: pytz>=2017.2 in /usr/local/lib/python3.6/site-packages (from pandas==1.1.0->-r requirements-dev.txt (line 19)) (2020.1)
Collecting PTable
  Downloading PTable-0.9.2.tar.gz (31 kB)
Collecting itsdangerous>=0.24
  Downloading itsdangerous-1.1.0-py2.py3-none-any.whl (16 kB)
Requirement already satisfied: Werkzeug>=0.15 in /usr/local/lib/python3.6/site-packages (from Flask<2.0.0->seldon-core==1.6.0.dev0) (1.0.1)
Requirement already satisfied: Jinja2>=2.10.1 in /usr/local/lib/python3.6/site-packages (from Flask<2.0.0->seldon-core==1.6.0.dev0) (2.11.2)
Requirement already satisfied: pyrsistent>=0.14.0 in /usr/local/lib/python3.6/site-packages (from jsonschema<4.0.0->seldon-core==1.6.0.dev0) (0.17.3)
Requirement already satisfied: chardet<4,>=3.0.2 in /usr/local/lib/python3.6/site-packages (from requests<3.0.0->seldon-core==1.6.0.dev0) (3.0.4)
Requirement already satisfied: idna<3,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests<3.0.0->seldon-core==1.6.0.dev0) (2.10)
Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests<3.0.0->seldon-core==1.6.0.dev0) (2020.6.20)
Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 in /usr/local/lib/python3.6/site-packages (from requests<3.0.0->seldon-core==1.6.0.dev0) (1.25.10)
Collecting threadloop<2,>=1
  Downloading threadloop-1.0.2.tar.gz (4.9 kB)
Collecting thrift
  Downloading thrift-0.13.0.tar.gz (59 kB)
Requirement already satisfied: tornado>=4.3 in /usr/local/lib/python3.6/site-packages (from jaeger-client<4.5.0,>=4.1.0->seldon-core==1.6.0.dev0) (6.0.4)
Requirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata; python_version < "3.8"->flake8==3.8.1->-r requirements-dev.txt (line 3)) (3.3.0)
Requirement already satisfied: pyparsing>=2.0.2 in /usr/local/lib/python3.6/site-packages (from packaging->pytest==6.2.1->-r requirements-dev.txt (line 6)) (2.4.7)
Collecting importlib-resources>=1.0; python_version < "3.7"
  Downloading importlib_resources-5.1.0-py3-none-any.whl (24 kB)
Collecting distlib<1,>=0.3.1
  Downloading distlib-0.3.1-py2.py3-none-any.whl (335 kB)
Requirement already satisfied: MarkupSafe>=0.23 in /usr/local/lib/python3.6/site-packages (from Jinja2>=2.10.1->Flask<2.0.0->seldon-core==1.6.0.dev0) (1.1.1)
Building wheels for collected packages: black, Flask-OpenTracing, opentracing, jaeger-client, grpcio-reflection, PTable, threadloop, thrift
  Building wheel for black (PEP 517): started
  Building wheel for black (PEP 517): finished with status 'done'
  Created wheel for black: filename=black-20.8b1-py3-none-any.whl size=124184 sha256=e82cf5fc2e0b5c997127546729c79ef92f50d1e4af13d1a2c03678a298d54570
  Stored in directory: /builder/home/.cache/pip/wheels/dd/c8/94/e774504958e4667180d81202d1d45cdc35d6222ae39229871b
  Building wheel for Flask-OpenTracing (setup.py): started
  Building wheel for Flask-OpenTracing (setup.py): finished with status 'done'
  Created wheel for Flask-OpenTracing: filename=Flask_OpenTracing-1.1.0-py3-none-any.whl size=9071 sha256=de15edd829387dff33532e3b17e8cf6955e1e49703e5164d44db4636e2ea7ee5
  Stored in directory: /builder/home/.cache/pip/wheels/ad/4b/2d/24ff0da0a0b53c7c77ce59b843bcceaf644c88703241e59615
  Building wheel for opentracing (setup.py): started
  Building wheel for opentracing (setup.py): finished with status 'done'
  Created wheel for opentracing: filename=opentracing-2.4.0-py3-none-any.whl size=51400 sha256=7ac1cd6007fa0ebe27eb4ea3537be2d83417fa7d59ed5613b148ec159f22c909
  Stored in directory: /builder/home/.cache/pip/wheels/83/73/4c/0e331f57d4702becb1fca9d9148277aca96d127bd838faf85e
  Building wheel for jaeger-client (setup.py): started
  Building wheel for jaeger-client (setup.py): finished with status 'done'
  Created wheel for jaeger-client: filename=jaeger_client-4.4.0-py3-none-any.whl size=64325 sha256=26080e7d7c419401d0ec32b9e06efc08840bcd0d2d3847c33f19201cc363577e
  Stored in directory: /builder/home/.cache/pip/wheels/6e/ea/ec/560f1cffece42c70b9c68b1dc3519c769883650396adcb90b7
  Building wheel for grpcio-reflection (setup.py): started
  Building wheel for grpcio-reflection (setup.py): finished with status 'done'
  Created wheel for grpcio-reflection: filename=grpcio_reflection-1.34.1-py3-none-any.whl size=14415 sha256=f72397c5f5f4aef55ee239289428802f4fdfe7e544eac617d462bfe8cee907ac
  Stored in directory: /builder/home/.cache/pip/wheels/9b/84/80/81f4dc4afff82cce892567df37472395abf1a1bb675caec1ec
  Building wheel for PTable (setup.py): started
  Building wheel for PTable (setup.py): finished with status 'done'
  Created wheel for PTable: filename=PTable-0.9.2-py3-none-any.whl size=22907 sha256=b56deffed2c5dc3a85cb6594a6f25242c2cd744705fd9919e3a85faa0ebea565
  Stored in directory: /builder/home/.cache/pip/wheels/f3/65/67/71f473ec87ea4554d1bdfb1b5128cfe1414c2b113b72a1ee8e
  Building wheel for threadloop (setup.py): started
  Building wheel for threadloop (setup.py): finished with status 'done'
  Created wheel for threadloop: filename=threadloop-1.0.2-py3-none-any.whl size=3425 sha256=4072ecdc04b62d36dd8386364855dbf5b3d816b908e62831a4b082bdafb00269
  Stored in directory: /builder/home/.cache/pip/wheels/02/54/65/9f87de48fe8fcaaee30f279973d946ad55f9df56b93b3e78da
  Building wheel for thrift (setup.py): started
  Building wheel for thrift (setup.py): finished with status 'done'
  Created wheel for thrift: filename=thrift-0.13.0-cp36-cp36m-linux_x86_64.whl size=483938 sha256=ccbd6218a84a1baaf0ec1957179eaaaa7d6f0325f572ca2d7c89a62cac9ffc6f
  Stored in directory: /builder/home/.cache/pip/wheels/e0/38/fc/472fe18756b177b42096961f8bd3ff2dc5c5620ac399fce52d
Successfully built black Flask-OpenTracing opentracing jaeger-client grpcio-reflection PTable threadloop thrift
Installing collected packages: appdirs, dataclasses, regex, typed-ast, click, toml, mypy-extensions, pathspec, black, pyflakes, pycodestyle, mccabe, flake8, mypy, Pillow, iniconfig, pytest, coverage, pytest-cov, importlib-resources, filelock, distlib, virtualenv, tox, grpcio-tools, mypy-protobuf, tenacity, pandas, PTable, pip-licenses, itsdangerous, Flask, Flask-cors, redis, flatbuffers, opentracing, Flask-OpenTracing, threadloop, thrift, jaeger-client, grpcio-opentracing, grpcio-reflection, gunicorn, seldon-core
  Attempting uninstall: Pillow
    Found existing installation: Pillow 7.2.0
    Uninstalling Pillow-7.2.0:
      Successfully uninstalled Pillow-7.2.0
  Attempting uninstall: pytest
    Found existing installation: pytest 5.3.1
    Uninstalling pytest-5.3.1:
      Successfully uninstalled pytest-5.3.1
  Attempting uninstall: coverage
    Found existing installation: coverage 4.5.4
    Uninstalling coverage-4.5.4:
      Successfully uninstalled coverage-4.5.4
  Attempting uninstall: pytest-cov
    Found existing installation: pytest-cov 2.8.1
    Uninstalling pytest-cov-2.8.1:
      Successfully uninstalled pytest-cov-2.8.1
  Attempting uninstall: grpcio-tools
    Found existing installation: grpcio-tools 1.32.0
    Uninstalling grpcio-tools-1.32.0:
      Successfully uninstalled grpcio-tools-1.32.0
  Attempting uninstall: tenacity
    Found existing installation: tenacity 6.0.0
    Uninstalling tenacity-6.0.0:
      Successfully uninstalled tenacity-6.0.0
  Attempting uninstall: pandas
    Found existing installation: pandas 1.1.3
    Uninstalling pandas-1.1.3:
      Successfully uninstalled pandas-1.1.3
  Running setup.py develop for seldon-core
ERROR: After October 2020 you may experience errors when installing or updating packages. This is because pip will change the way that it resolves dependency conflicts.

We recommend you use --use-feature=2020-resolver to test your packages with the new resolver before it becomes the default.

grpcio-tools 1.33.2 requires grpcio>=1.33.2, but you'll have grpcio 1.32.0 which is incompatible.
alibi 0.5.2 requires tensorflow>=2.0, but you'll have tensorflow 1.15.4 which is incompatible.
grpcio-reflection 1.34.1 requires grpcio>=1.34.1, but you'll have grpcio 1.32.0 which is incompatible.
Successfully installed Flask-1.1.2 Flask-OpenTracing-1.1.0 Flask-cors-3.0.10 PTable-0.9.2 Pillow-8.1.0 appdirs-1.4.4 black-20.8b1 click-7.1.2 coverage-5.3.1 dataclasses-0.8 distlib-0.3.1 filelock-3.0.12 flake8-3.8.1 flatbuffers-1.12 grpcio-opentracing-1.1.4 grpcio-reflection-1.34.1 grpcio-tools-1.33.2 gunicorn-20.0.4 importlib-resources-5.1.0 iniconfig-1.1.1 itsdangerous-1.1.0 jaeger-client-4.4.0 mccabe-0.6.1 mypy-0.790 mypy-extensions-0.4.3 mypy-protobuf-1.22 opentracing-2.4.0 pandas-1.1.0 pathspec-0.8.1 pip-licenses-3.1.0 pycodestyle-2.6.0 pyflakes-2.2.0 pytest-6.2.1 pytest-cov-2.10.1 redis-3.5.3 regex-2020.11.13 seldon-core tenacity-6.3.1 threadloop-1.0.2 thrift-0.13.0 toml-0.10.2 tox-3.21.2 typed-ast-1.4.2 virtualenv-20.4.0
WARNING: You are using pip version 20.2.3; however, version 20.3.3 is available.
You should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.
make: Leaving directory '/workspace/source/python'
cp ../../proto/prediction.proto ./proto
cd ../../proto/tensorflow && make create_protos
make[1]: Entering directory '/workspace/source/proto/tensorflow'
./create-protos.sh
Downloading proto files for master
make[1]: Leaving directory '/workspace/source/proto/tensorflow'
cp -vr ../../proto/tensorflow/tensorflow .
'../../proto/tensorflow/tensorflow' -> './tensorflow'
'../../proto/tensorflow/tensorflow/core' -> './tensorflow/core'
'../../proto/tensorflow/tensorflow/core/framework' -> './tensorflow/core/framework'
'../../proto/tensorflow/tensorflow/core/framework/types.proto' -> './tensorflow/core/framework/types.proto'
'../../proto/tensorflow/tensorflow/core/framework/resource_handle.proto' -> './tensorflow/core/framework/resource_handle.proto'
'../../proto/tensorflow/tensorflow/core/framework/tensor_shape.proto' -> './tensorflow/core/framework/tensor_shape.proto'
'../../proto/tensorflow/tensorflow/core/framework/tensor.proto' -> './tensorflow/core/framework/tensor.proto'
python -m grpc.tools.protoc -I. --python_out=. --grpc_python_out=. ./proto/prediction.proto
cd ../../notebooks && make build_protos
make[1]: Entering directory '/workspace/source/notebooks'
cd ../proto/tensorflow && make create_protos
make[2]: Entering directory '/workspace/source/proto/tensorflow'
make[2]: Nothing to be done for 'create_protos'.
make[2]: Leaving directory '/workspace/source/proto/tensorflow'
cp -vr ../proto/tensorflow/tensorflow .
'../proto/tensorflow/tensorflow' -> './tensorflow'
'../proto/tensorflow/tensorflow/core' -> './tensorflow/core'
'../proto/tensorflow/tensorflow/core/framework' -> './tensorflow/core/framework'
'../proto/tensorflow/tensorflow/core/framework/types.proto' -> './tensorflow/core/framework/types.proto'
'../proto/tensorflow/tensorflow/core/framework/resource_handle.proto' -> './tensorflow/core/framework/resource_handle.proto'
'../proto/tensorflow/tensorflow/core/framework/tensor_shape.proto' -> './tensorflow/core/framework/tensor_shape.proto'
'../proto/tensorflow/tensorflow/core/framework/tensor.proto' -> './tensorflow/core/framework/tensor.proto'
cp ../proto/prediction.proto ./proto
python -m grpc.tools.protoc -I. --python_out=. --grpc_python_out=. ./proto/prediction.proto
make[1]: Leaving directory '/workspace/source/notebooks'
cd ../../proto/k8s && make create_protos
make[1]: Entering directory '/workspace/source/proto/k8s'
./create-k8s-protos.sh
Downloading proto files for master
Munging proto file packages
sed -i.bak 's|import "k8s.io/apiextensions-apiserver/|//import "k8s.io/apiextensions-apiserver/|' k8s.io/api/core/v1/generated.proto
rm k8s.io/api/core/v1/generated.proto.bak
make[1]: Leaving directory '/workspace/source/proto/k8s'
pip install -r dev_requirements.txt
Collecting pytest==5.3.1
  Downloading pytest-5.3.1-py3-none-any.whl (233 kB)
Requirement already satisfied: pytest-xdist==1.30.0 in /usr/local/lib/python3.6/site-packages (from -r dev_requirements.txt (line 2)) (1.30.0)
Collecting pytest-cov==2.8.1
  Downloading pytest_cov-2.8.1-py2.py3-none-any.whl (18 kB)
Requirement already satisfied: flaky==3.6.1 in /usr/local/lib/python3.6/site-packages (from -r dev_requirements.txt (line 4)) (3.6.1)
Collecting tenacity==6.0.0
  Downloading tenacity-6.0.0-py2.py3-none-any.whl (24 kB)
Requirement already satisfied: sh==1.13.1 in /usr/local/lib/python3.6/site-packages (from -r dev_requirements.txt (line 6)) (1.13.1)
Requirement already satisfied: ipython==7.13.0 in /usr/local/lib/python3.6/site-packages (from -r dev_requirements.txt (line 9)) (7.13.0)
Requirement already satisfied: nbconvert==5.6.1 in /usr/local/lib/python3.6/site-packages (from -r dev_requirements.txt (line 10)) (5.6.1)
Requirement already satisfied: alibi==0.5.2 in /usr/local/lib/python3.6/site-packages (from -r dev_requirements.txt (line 11)) (0.5.2)
Requirement already satisfied: shap==0.35.0 in /usr/local/lib/python3.6/site-packages (from -r dev_requirements.txt (line 12)) (0.35.0)
Requirement already satisfied: matplotlib==3.1.3 in /usr/local/lib/python3.6/site-packages (from -r dev_requirements.txt (line 13)) (3.1.3)
Collecting tensorflow==2.4.0
  Downloading tensorflow-2.4.0-cp36-cp36m-manylinux2010_x86_64.whl (394.7 MB)
Collecting coverage==4.5.4
  Downloading coverage-4.5.4-cp36-cp36m-manylinux1_x86_64.whl (205 kB)
Requirement already satisfied: attrs>=17.4.0 in /usr/local/lib/python3.6/site-packages (from pytest==5.3.1->-r dev_requirements.txt (line 1)) (20.2.0)
Requirement already satisfied: importlib-metadata>=0.12; python_version < "3.8" in /usr/local/lib/python3.6/site-packages (from pytest==5.3.1->-r dev_requirements.txt (line 1)) (2.0.0)
Requirement already satisfied: wcwidth in /usr/local/lib/python3.6/site-packages (from pytest==5.3.1->-r dev_requirements.txt (line 1)) (0.2.5)
Requirement already satisfied: packaging in /usr/local/lib/python3.6/site-packages (from pytest==5.3.1->-r dev_requirements.txt (line 1)) (20.4)
Requirement already satisfied: py>=1.5.0 in /usr/local/lib/python3.6/site-packages (from pytest==5.3.1->-r dev_requirements.txt (line 1)) (1.9.0)
Requirement already satisfied: pluggy<1.0,>=0.12 in /usr/local/lib/python3.6/site-packages (from pytest==5.3.1->-r dev_requirements.txt (line 1)) (0.13.1)
Requirement already satisfied: more-itertools>=4.0.0 in /usr/local/lib/python3.6/site-packages (from pytest==5.3.1->-r dev_requirements.txt (line 1)) (8.5.0)
Requirement already satisfied: pytest-forked in /usr/local/lib/python3.6/site-packages (from pytest-xdist==1.30.0->-r dev_requirements.txt (line 2)) (1.3.0)
Requirement already satisfied: six in /usr/local/lib/python3.6/site-packages (from pytest-xdist==1.30.0->-r dev_requirements.txt (line 2)) (1.15.0)
Requirement already satisfied: execnet>=1.1 in /usr/local/lib/python3.6/site-packages (from pytest-xdist==1.30.0->-r dev_requirements.txt (line 2)) (1.7.1)
Requirement already satisfied: pexpect; sys_platform != "win32" in /usr/local/lib/python3.6/site-packages (from ipython==7.13.0->-r dev_requirements.txt (line 9)) (4.8.0)
Requirement already satisfied: pygments in /usr/local/lib/python3.6/site-packages (from ipython==7.13.0->-r dev_requirements.txt (line 9)) (2.7.1)
Requirement already satisfied: setuptools>=18.5 in /usr/local/lib/python3.6/site-packages (from ipython==7.13.0->-r dev_requirements.txt (line 9)) (50.3.0)
Requirement already satisfied: decorator in /usr/local/lib/python3.6/site-packages (from ipython==7.13.0->-r dev_requirements.txt (line 9)) (4.4.2)
Requirement already satisfied: jedi>=0.10 in /usr/local/lib/python3.6/site-packages (from ipython==7.13.0->-r dev_requirements.txt (line 9)) (0.17.2)
Requirement already satisfied: pickleshare in /usr/local/lib/python3.6/site-packages (from ipython==7.13.0->-r dev_requirements.txt (line 9)) (0.7.5)
Requirement already satisfied: backcall in /usr/local/lib/python3.6/site-packages (from ipython==7.13.0->-r dev_requirements.txt (line 9)) (0.2.0)
Requirement already satisfied: prompt-toolkit!=3.0.0,!=3.0.1,<3.1.0,>=2.0.0 in /usr/local/lib/python3.6/site-packages (from ipython==7.13.0->-r dev_requirements.txt (line 9)) (3.0.7)
Requirement already satisfied: traitlets>=4.2 in /usr/local/lib/python3.6/site-packages (from ipython==7.13.0->-r dev_requirements.txt (line 9)) (4.3.3)
Requirement already satisfied: pandocfilters>=1.4.1 in /usr/local/lib/python3.6/site-packages (from nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (1.4.2)
Requirement already satisfied: nbformat>=4.4 in /usr/local/lib/python3.6/site-packages (from nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (5.0.7)
Requirement already satisfied: mistune<2,>=0.8.1 in /usr/local/lib/python3.6/site-packages (from nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (0.8.4)
Requirement already satisfied: jupyter-core in /usr/local/lib/python3.6/site-packages (from nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (4.6.3)
Requirement already satisfied: defusedxml in /usr/local/lib/python3.6/site-packages (from nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (0.6.0)
Requirement already satisfied: entrypoints>=0.2.2 in /usr/local/lib/python3.6/site-packages (from nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (0.3)
Requirement already satisfied: jinja2>=2.4 in /usr/local/lib/python3.6/site-packages (from nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (2.11.2)
Requirement already satisfied: bleach in /usr/local/lib/python3.6/site-packages (from nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (3.2.1)
Requirement already satisfied: testpath in /usr/local/lib/python3.6/site-packages (from nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (0.4.4)
Requirement already satisfied: beautifulsoup4 in /usr/local/lib/python3.6/site-packages (from alibi==0.5.2->-r dev_requirements.txt (line 11)) (4.9.3)
Requirement already satisfied: scipy in /usr/local/lib/python3.6/site-packages (from alibi==0.5.2->-r dev_requirements.txt (line 11)) (1.5.2)
Requirement already satisfied: scikit-learn in /usr/local/lib/python3.6/site-packages (from alibi==0.5.2->-r dev_requirements.txt (line 11)) (0.23.2)
Requirement already satisfied: typing-extensions>=3.7.2 in /usr/local/lib/python3.6/site-packages (from alibi==0.5.2->-r dev_requirements.txt (line 11)) (3.7.4.3)
Requirement already satisfied: Pillow in /usr/local/lib/python3.6/site-packages (from alibi==0.5.2->-r dev_requirements.txt (line 11)) (8.1.0)
Requirement already satisfied: scikit-image!=0.17.1 in /usr/local/lib/python3.6/site-packages (from alibi==0.5.2->-r dev_requirements.txt (line 11)) (0.17.2)
Requirement already satisfied: prettyprinter in /usr/local/lib/python3.6/site-packages (from alibi==0.5.2->-r dev_requirements.txt (line 11)) (0.18.0)
Requirement already satisfied: requests in /usr/local/lib/python3.6/site-packages (from alibi==0.5.2->-r dev_requirements.txt (line 11)) (2.24.0)
Requirement already satisfied: spacy[lookups] in /usr/local/lib/python3.6/site-packages (from alibi==0.5.2->-r dev_requirements.txt (line 11)) (2.3.2)
Requirement already satisfied: numpy in /usr/local/lib/python3.6/site-packages (from alibi==0.5.2->-r dev_requirements.txt (line 11)) (1.19.2)
Requirement already satisfied: pandas in /usr/local/lib/python3.6/site-packages (from alibi==0.5.2->-r dev_requirements.txt (line 11)) (1.1.0)
Requirement already satisfied: tqdm>4.25.0 in /usr/local/lib/python3.6/site-packages (from shap==0.35.0->-r dev_requirements.txt (line 12)) (4.50.2)
Requirement already satisfied: pyparsing!=2.0.4,!=2.1.2,!=2.1.6,>=2.0.1 in /usr/local/lib/python3.6/site-packages (from matplotlib==3.1.3->-r dev_requirements.txt (line 13)) (2.4.7)
Requirement already satisfied: python-dateutil>=2.1 in /usr/local/lib/python3.6/site-packages (from matplotlib==3.1.3->-r dev_requirements.txt (line 13)) (2.8.1)
Requirement already satisfied: cycler>=0.10 in /usr/local/lib/python3.6/site-packages (from matplotlib==3.1.3->-r dev_requirements.txt (line 13)) (0.10.0)
Requirement already satisfied: kiwisolver>=1.0.1 in /usr/local/lib/python3.6/site-packages (from matplotlib==3.1.3->-r dev_requirements.txt (line 13)) (1.2.0)
Collecting tensorboard~=2.4
  Downloading tensorboard-2.4.1-py3-none-any.whl (10.6 MB)
Requirement already satisfied: opt-einsum~=3.3.0 in /usr/local/lib/python3.6/site-packages (from tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (3.3.0)
Collecting gast==0.3.3
  Downloading gast-0.3.3-py2.py3-none-any.whl (9.7 kB)
Requirement already satisfied: grpcio~=1.32.0 in /usr/local/lib/python3.6/site-packages (from tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (1.32.0)
Requirement already satisfied: flatbuffers~=1.12.0 in /usr/local/lib/python3.6/site-packages (from tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (1.12)
Requirement already satisfied: protobuf>=3.9.2 in /usr/local/lib/python3.6/site-packages (from tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (3.13.0)
Requirement already satisfied: keras-preprocessing~=1.1.2 in /usr/local/lib/python3.6/site-packages (from tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (1.1.2)
Requirement already satisfied: wheel~=0.35 in /usr/local/lib/python3.6/site-packages (from tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (0.35.1)
Requirement already satisfied: termcolor~=1.1.0 in /usr/local/lib/python3.6/site-packages (from tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (1.1.0)
Requirement already satisfied: h5py~=2.10.0 in /usr/local/lib/python3.6/site-packages (from tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (2.10.0)
Requirement already satisfied: wrapt~=1.12.1 in /usr/local/lib/python3.6/site-packages (from tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (1.12.1)
Collecting tensorflow-estimator<2.5.0,>=2.4.0rc0
  Downloading tensorflow_estimator-2.4.0-py2.py3-none-any.whl (462 kB)
Requirement already satisfied: google-pasta~=0.2 in /usr/local/lib/python3.6/site-packages (from tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (0.2.0)
Collecting astunparse~=1.6.3
  Downloading astunparse-1.6.3-py2.py3-none-any.whl (12 kB)
Requirement already satisfied: absl-py~=0.10 in /usr/local/lib/python3.6/site-packages (from tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (0.10.0)
Requirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata>=0.12; python_version < "3.8"->pytest==5.3.1->-r dev_requirements.txt (line 1)) (3.3.0)
Requirement already satisfied: apipkg>=1.4 in /usr/local/lib/python3.6/site-packages (from execnet>=1.1->pytest-xdist==1.30.0->-r dev_requirements.txt (line 2)) (1.5)
Requirement already satisfied: ptyprocess>=0.5 in /usr/local/lib/python3.6/site-packages (from pexpect; sys_platform != "win32"->ipython==7.13.0->-r dev_requirements.txt (line 9)) (0.6.0)
Requirement already satisfied: parso<0.8.0,>=0.7.0 in /usr/local/lib/python3.6/site-packages (from jedi>=0.10->ipython==7.13.0->-r dev_requirements.txt (line 9)) (0.7.1)
Requirement already satisfied: ipython-genutils in /usr/local/lib/python3.6/site-packages (from traitlets>=4.2->ipython==7.13.0->-r dev_requirements.txt (line 9)) (0.2.0)
Requirement already satisfied: jsonschema!=2.5.0,>=2.4 in /usr/local/lib/python3.6/site-packages (from nbformat>=4.4->nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (3.2.0)
Requirement already satisfied: MarkupSafe>=0.23 in /usr/local/lib/python3.6/site-packages (from jinja2>=2.4->nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (1.1.1)
Requirement already satisfied: webencodings in /usr/local/lib/python3.6/site-packages (from bleach->nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (0.5.1)
Requirement already satisfied: soupsieve>1.2; python_version >= "3.0" in /usr/local/lib/python3.6/site-packages (from beautifulsoup4->alibi==0.5.2->-r dev_requirements.txt (line 11)) (2.0.1)
Requirement already satisfied: threadpoolctl>=2.0.0 in /usr/local/lib/python3.6/site-packages (from scikit-learn->alibi==0.5.2->-r dev_requirements.txt (line 11)) (2.1.0)
Requirement already satisfied: joblib>=0.11 in /usr/local/lib/python3.6/site-packages (from scikit-learn->alibi==0.5.2->-r dev_requirements.txt (line 11)) (0.17.0)
Requirement already satisfied: imageio>=2.3.0 in /usr/local/lib/python3.6/site-packages (from scikit-image!=0.17.1->alibi==0.5.2->-r dev_requirements.txt (line 11)) (2.9.0)
Requirement already satisfied: tifffile>=2019.7.26 in /usr/local/lib/python3.6/site-packages (from scikit-image!=0.17.1->alibi==0.5.2->-r dev_requirements.txt (line 11)) (2020.9.3)
Requirement already satisfied: networkx>=2.0 in /usr/local/lib/python3.6/site-packages (from scikit-image!=0.17.1->alibi==0.5.2->-r dev_requirements.txt (line 11)) (2.5)
Requirement already satisfied: PyWavelets>=1.1.1 in /usr/local/lib/python3.6/site-packages (from scikit-image!=0.17.1->alibi==0.5.2->-r dev_requirements.txt (line 11)) (1.1.1)
Requirement already satisfied: colorful>=0.4.0 in /usr/local/lib/python3.6/site-packages (from prettyprinter->alibi==0.5.2->-r dev_requirements.txt (line 11)) (0.5.4)
Requirement already satisfied: chardet<4,>=3.0.2 in /usr/local/lib/python3.6/site-packages (from requests->alibi==0.5.2->-r dev_requirements.txt (line 11)) (3.0.4)
Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 in /usr/local/lib/python3.6/site-packages (from requests->alibi==0.5.2->-r dev_requirements.txt (line 11)) (1.25.10)
Requirement already satisfied: idna<3,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests->alibi==0.5.2->-r dev_requirements.txt (line 11)) (2.10)
Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests->alibi==0.5.2->-r dev_requirements.txt (line 11)) (2020.6.20)
Requirement already satisfied: murmurhash<1.1.0,>=0.28.0 in /usr/local/lib/python3.6/site-packages (from spacy[lookups]->alibi==0.5.2->-r dev_requirements.txt (line 11)) (1.0.2)
Requirement already satisfied: thinc==7.4.1 in /usr/local/lib/python3.6/site-packages (from spacy[lookups]->alibi==0.5.2->-r dev_requirements.txt (line 11)) (7.4.1)
Requirement already satisfied: catalogue<1.1.0,>=0.0.7 in /usr/local/lib/python3.6/site-packages (from spacy[lookups]->alibi==0.5.2->-r dev_requirements.txt (line 11)) (1.0.0)
Requirement already satisfied: plac<1.2.0,>=0.9.6 in /usr/local/lib/python3.6/site-packages (from spacy[lookups]->alibi==0.5.2->-r dev_requirements.txt (line 11)) (1.1.3)
Requirement already satisfied: srsly<1.1.0,>=1.0.2 in /usr/local/lib/python3.6/site-packages (from spacy[lookups]->alibi==0.5.2->-r dev_requirements.txt (line 11)) (1.0.2)
Requirement already satisfied: blis<0.5.0,>=0.4.0 in /usr/local/lib/python3.6/site-packages (from spacy[lookups]->alibi==0.5.2->-r dev_requirements.txt (line 11)) (0.4.1)
Requirement already satisfied: wasabi<1.1.0,>=0.4.0 in /usr/local/lib/python3.6/site-packages (from spacy[lookups]->alibi==0.5.2->-r dev_requirements.txt (line 11)) (0.8.0)
Requirement already satisfied: preshed<3.1.0,>=3.0.2 in /usr/local/lib/python3.6/site-packages (from spacy[lookups]->alibi==0.5.2->-r dev_requirements.txt (line 11)) (3.0.2)
Requirement already satisfied: cymem<2.1.0,>=2.0.2 in /usr/local/lib/python3.6/site-packages (from spacy[lookups]->alibi==0.5.2->-r dev_requirements.txt (line 11)) (2.0.3)
Requirement already satisfied: spacy-lookups-data<0.4.0,>=0.3.2; extra == "lookups" in /usr/local/lib/python3.6/site-packages (from spacy[lookups]->alibi==0.5.2->-r dev_requirements.txt (line 11)) (0.3.2)
Requirement already satisfied: pytz>=2017.2 in /usr/local/lib/python3.6/site-packages (from pandas->alibi==0.5.2->-r dev_requirements.txt (line 11)) (2020.1)
Collecting google-auth-oauthlib<0.5,>=0.4.1
  Downloading google_auth_oauthlib-0.4.2-py2.py3-none-any.whl (18 kB)
Requirement already satisfied: werkzeug>=0.11.15 in /usr/local/lib/python3.6/site-packages (from tensorboard~=2.4->tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (1.0.1)
Requirement already satisfied: markdown>=2.6.8 in /usr/local/lib/python3.6/site-packages (from tensorboard~=2.4->tensorflow==2.4.0->-r dev_requirements.txt (line 14)) (3.3)
Collecting tensorboard-plugin-wit>=1.6.0
  Downloading tensorboard_plugin_wit-1.7.0-py3-none-any.whl (779 kB)
Collecting google-auth<2,>=1.6.3
  Downloading google_auth-1.24.0-py2.py3-none-any.whl (114 kB)
Requirement already satisfied: pyrsistent>=0.14.0 in /usr/local/lib/python3.6/site-packages (from jsonschema!=2.5.0,>=2.4->nbformat>=4.4->nbconvert==5.6.1->-r dev_requirements.txt (line 10)) (0.17.3)
Collecting requests-oauthlib>=0.7.0
  Downloading requests_oauthlib-1.3.0-py2.py3-none-any.whl (23 kB)
Collecting pyasn1-modules>=0.2.1
  Downloading pyasn1_modules-0.2.8-py2.py3-none-any.whl (155 kB)
Collecting cachetools<5.0,>=2.0.0
  Downloading cachetools-4.2.0-py3-none-any.whl (12 kB)
Collecting rsa<5,>=3.1.4; python_version >= "3.6"
  Downloading rsa-4.7-py3-none-any.whl (34 kB)
Collecting oauthlib>=3.0.0
  Downloading oauthlib-3.1.0-py2.py3-none-any.whl (147 kB)
Collecting pyasn1<0.5.0,>=0.4.6
  Downloading pyasn1-0.4.8-py2.py3-none-any.whl (77 kB)
Installing collected packages: pytest, coverage, pytest-cov, tenacity, pyasn1, pyasn1-modules, cachetools, rsa, google-auth, oauthlib, requests-oauthlib, google-auth-oauthlib, tensorboard-plugin-wit, tensorboard, gast, tensorflow-estimator, astunparse, tensorflow
  Attempting uninstall: pytest
    Found existing installation: pytest 6.2.1
    Uninstalling pytest-6.2.1:
      Successfully uninstalled pytest-6.2.1
  Attempting uninstall: coverage
    Found existing installation: coverage 5.3.1
    Uninstalling coverage-5.3.1:
      Successfully uninstalled coverage-5.3.1
  Attempting uninstall: pytest-cov
    Found existing installation: pytest-cov 2.10.1
    Uninstalling pytest-cov-2.10.1:
      Successfully uninstalled pytest-cov-2.10.1
  Attempting uninstall: tenacity
    Found existing installation: tenacity 6.3.1
    Uninstalling tenacity-6.3.1:
      Successfully uninstalled tenacity-6.3.1
  Attempting uninstall: tensorboard
    Found existing installation: tensorboard 1.15.0
    Uninstalling tensorboard-1.15.0:
      Successfully uninstalled tensorboard-1.15.0
  Attempting uninstall: gast
    Found existing installation: gast 0.2.2
    Uninstalling gast-0.2.2:
      Successfully uninstalled gast-0.2.2
  Attempting uninstall: tensorflow-estimator
    Found existing installation: tensorflow-estimator 1.15.1
    Uninstalling tensorflow-estimator-1.15.1:
      Successfully uninstalled tensorflow-estimator-1.15.1
  Attempting uninstall: tensorflow
    Found existing installation: tensorflow 1.15.4
    Uninstalling tensorflow-1.15.4:
      Successfully uninstalled tensorflow-1.15.4
Successfully installed astunparse-1.6.3 cachetools-4.2.0 coverage-4.5.4 gast-0.3.3 google-auth-1.24.0 google-auth-oauthlib-0.4.2 oauthlib-3.1.0 pyasn1-0.4.8 pyasn1-modules-0.2.8 pytest-5.3.1 pytest-cov-2.8.1 requests-oauthlib-1.3.0 rsa-4.7 tenacity-6.0.0 tensorboard-2.4.1 tensorboard-plugin-wit-1.7.0 tensorflow-2.4.0 tensorflow-estimator-2.4.0
WARNING: You are using pip version 20.2.3; however, version 20.3.3 is available.
You should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.
pip install -e ../../python
Obtaining file:///workspace/source/python
Requirement already satisfied: Flask<2.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (1.1.2)
Requirement already satisfied: jsonschema<4.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (3.2.0)
Requirement already satisfied: Flask-cors<4.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (3.0.10)
Requirement already satisfied: redis<4.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (3.5.3)
Requirement already satisfied: requests<3.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (2.24.0)
Requirement already satisfied: numpy<2.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (1.19.2)
Requirement already satisfied: flatbuffers<2.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (1.12)
Requirement already satisfied: protobuf<4.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (3.13.0)
Requirement already satisfied: grpcio<2.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (1.32.0)
Requirement already satisfied: Flask-OpenTracing<1.2.0,>=1.1.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (1.1.0)
Requirement already satisfied: opentracing<2.5.0,>=2.2.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (2.4.0)
Requirement already satisfied: jaeger-client<4.5.0,>=4.1.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (4.4.0)
Requirement already satisfied: grpcio-opentracing<1.2.0,>=1.1.4 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (1.1.4)
Requirement already satisfied: grpcio-reflection<1.35.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (1.34.1)
Requirement already satisfied: PyYAML<5.4 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (5.3.1)
Requirement already satisfied: gunicorn<20.1.0,>=19.9.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (20.0.4)
Requirement already satisfied: setuptools>=41.0.0 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (50.3.0)
Requirement already satisfied: prometheus_client<0.9.0,>=0.7.1 in /usr/local/lib/python3.6/site-packages (from seldon-core==1.6.0.dev0) (0.8.0)
Requirement already satisfied: itsdangerous>=0.24 in /usr/local/lib/python3.6/site-packages (from Flask<2.0.0->seldon-core==1.6.0.dev0) (1.1.0)
Requirement already satisfied: Werkzeug>=0.15 in /usr/local/lib/python3.6/site-packages (from Flask<2.0.0->seldon-core==1.6.0.dev0) (1.0.1)
Requirement already satisfied: Jinja2>=2.10.1 in /usr/local/lib/python3.6/site-packages (from Flask<2.0.0->seldon-core==1.6.0.dev0) (2.11.2)
Requirement already satisfied: click>=5.1 in /usr/local/lib/python3.6/site-packages (from Flask<2.0.0->seldon-core==1.6.0.dev0) (7.1.2)
Requirement already satisfied: six>=1.11.0 in /usr/local/lib/python3.6/site-packages (from jsonschema<4.0.0->seldon-core==1.6.0.dev0) (1.15.0)
Requirement already satisfied: attrs>=17.4.0 in /usr/local/lib/python3.6/site-packages (from jsonschema<4.0.0->seldon-core==1.6.0.dev0) (20.2.0)
Requirement already satisfied: importlib-metadata; python_version < "3.8" in /usr/local/lib/python3.6/site-packages (from jsonschema<4.0.0->seldon-core==1.6.0.dev0) (2.0.0)
Requirement already satisfied: pyrsistent>=0.14.0 in /usr/local/lib/python3.6/site-packages (from jsonschema<4.0.0->seldon-core==1.6.0.dev0) (0.17.3)
Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.6/site-packages (from requests<3.0.0->seldon-core==1.6.0.dev0) (2020.6.20)
Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 in /usr/local/lib/python3.6/site-packages (from requests<3.0.0->seldon-core==1.6.0.dev0) (1.25.10)
Requirement already satisfied: chardet<4,>=3.0.2 in /usr/local/lib/python3.6/site-packages (from requests<3.0.0->seldon-core==1.6.0.dev0) (3.0.4)
Requirement already satisfied: idna<3,>=2.5 in /usr/local/lib/python3.6/site-packages (from requests<3.0.0->seldon-core==1.6.0.dev0) (2.10)
Requirement already satisfied: tornado>=4.3 in /usr/local/lib/python3.6/site-packages (from jaeger-client<4.5.0,>=4.1.0->seldon-core==1.6.0.dev0) (6.0.4)
Requirement already satisfied: threadloop<2,>=1 in /usr/local/lib/python3.6/site-packages (from jaeger-client<4.5.0,>=4.1.0->seldon-core==1.6.0.dev0) (1.0.2)
Requirement already satisfied: thrift in /usr/local/lib/python3.6/site-packages (from jaeger-client<4.5.0,>=4.1.0->seldon-core==1.6.0.dev0) (0.13.0)
Requirement already satisfied: MarkupSafe>=0.23 in /usr/local/lib/python3.6/site-packages (from Jinja2>=2.10.1->Flask<2.0.0->seldon-core==1.6.0.dev0) (1.1.1)
Requirement already satisfied: zipp>=0.5 in /usr/local/lib/python3.6/site-packages (from importlib-metadata; python_version < "3.8"->jsonschema<4.0.0->seldon-core==1.6.0.dev0) (3.3.0)
Installing collected packages: seldon-core
  Attempting uninstall: seldon-core
    Found existing installation: seldon-core 1.6.0.dev0
    Uninstalling seldon-core-1.6.0.dev0:
      Successfully uninstalled seldon-core-1.6.0.dev0
  Running setup.py develop for seldon-core
Successfully installed seldon-core
WARNING: You are using pip version 20.2.3; however, version 20.3.3 is available.
You should consider upgrading via the '/usr/local/bin/python -m pip install --upgrade pip' command.
pytest \
	--verbose \
	-s \
	-W ignore \
	-n "4" \
	-m "not sequential and not notebooks" 2>&1
2021-01-19 12:23:27.926410: W tensorflow/stream_executor/platform/default/dso_loader.cc:60] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory
2021-01-19 12:23:27.926460: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
============================= test session starts ==============================
platform linux -- Python 3.6.10, pytest-5.3.1, py-1.9.0, pluggy-0.13.1 -- /usr/local/bin/python
cachedir: .pytest_cache
rootdir: /workspace/source/testing/scripts, inifile: setup.cfg
plugins: cov-2.8.1, xdist-1.30.0, forked-1.3.0, flaky-3.6.1
gw0 I / gw1 I / gw2 I / gw3 I
[gw0] linux Python 3.6.10 cwd: /workspace/source/testing/scripts
[gw1] linux Python 3.6.10 cwd: /workspace/source/testing/scripts
[gw2] linux Python 3.6.10 cwd: /workspace/source/testing/scripts
[gw3] linux Python 3.6.10 cwd: /workspace/source/testing/scripts
2021-01-19 12:23:31.288517: W tensorflow/stream_executor/platform/default/dso_loader.cc:60] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory
2021-01-19 12:23:31.288586: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
2021-01-19 12:23:31.367600: W tensorflow/stream_executor/platform/default/dso_loader.cc:60] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory
2021-01-19 12:23:31.367675: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
2021-01-19 12:23:31.536045: W tensorflow/stream_executor/platform/default/dso_loader.cc:60] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory
2021-01-19 12:23:31.536067: W tensorflow/stream_executor/platform/default/dso_loader.cc:60] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory
2021-01-19 12:23:31.536093: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
2021-01-19 12:23:31.536102: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
[gw0] Python 3.6.10 (default, Oct  9 2020, 10:16:39)  -- [GCC 8.3.0]
[gw2] Python 3.6.10 (default, Oct  9 2020, 10:16:39)  -- [GCC 8.3.0]
[gw3] Python 3.6.10 (default, Oct  9 2020, 10:16:39)  -- [GCC 8.3.0]
[gw1] Python 3.6.10 (default, Oct  9 2020, 10:16:39)  -- [GCC 8.3.0]
gw0 [35] / gw1 [35] / gw2 [35] / gw3 [35]

scheduling tests via LoadScheduling

test_api_version.py::test_api_version[machinelearning.seldon.io/v1alpha3] 
test_api_version.py::test_api_version[machinelearning.seldon.io/v1alpha2] 
test_api_version.py::test_api_version[machinelearning.seldon.io/v1] 
test_bad_graphs.py::TestBadGraphs::test_duplicate_predictor_name Error from server (SeldonDeployment.machinelearing.seldon.io "dupname" is invalid: [spec.predictors[1]: Invalid value: "mymodel": Duplicate predictor name, spec: Invalid value: "mymodel": Traffic must sum to 100 for multiple predictors]): error when creating "../resources/bad_duplicate_predictor_name.json": admission webhook "v1alpha2.vseldondeployment.kb.io" denied the request: SeldonDeployment.machinelearing.seldon.io "dupname" is invalid: [spec.predictors[1]: Invalid value: "mymodel": Duplicate predictor name, spec: Invalid value: "mymodel": Traffic must sum to 100 for multiple predictors]

[gw1] PASSED test_bad_graphs.py::TestBadGraphs::test_duplicate_predictor_name 
test_helm_charts_clusterwide.py::TestClusterWide::test_single_model Error: uninstall: Release not loaded: mymodel: release: not found

[gw0] PASSED test_api_version.py::test_api_version[machinelearning.seldon.io/v1alpha2] Error: uninstall: Release not loaded: mymodel: release: not found
Error: uninstall: Release not loaded: mymodel: release: not found

[gw2] PASSED test_api_version.py::test_api_version[machinelearning.seldon.io/v1alpha3] 
[gw3] PASSED test_api_version.py::test_api_version[machinelearning.seldon.io/v1] Error: uninstall: Release not loaded: mymodel: release: not found

[gw1] PASSED test_helm_charts_clusterwide.py::TestClusterWide::test_single_model 
test_bad_graphs.py::TestBadGraphs::test_model_name_mismatch Error from server (SeldonDeployment.machinelearing.seldon.io "namemismatch" is invalid: spec.predictors[0].graph: Invalid value: "complex-model_bad_name": Can't find container for Predictive Unit): error when creating "../resources/bad_name_mismatch.json": admission webhook "v1alpha2.vseldondeployment.kb.io" denied the request: SeldonDeployment.machinelearing.seldon.io "namemismatch" is invalid: spec.predictors[0].graph: Invalid value: "complex-model_bad_name": Can't find container for Predictive Unit

[gw0] PASSED test_bad_graphs.py::TestBadGraphs::test_model_name_mismatch 
test_local_operators.py::TestLocalOperators::test_namespace_operator 
test_batch_processor.py::TestBatchWorker::test_batch_worker 
test_bad_graphs.py::TestBadGraphs::test_model_no_graph The SeldonDeployment "seldon-model" is invalid: spec.predictors.graph: Required value

[gw2] PASSED test_bad_graphs.py::TestBadGraphs::test_model_no_graph 
test_prepackaged_servers.py::TestPrepack::test_sklearn_v2 
test_helm_charts_clusterwide.py::TestClusterWide::test_abtest_model 
[gw0] PASSED test_local_operators.py::TestLocalOperators::test_namespace_operator Error: uninstall: Release not loaded: myabtest: release: not found

[gw1] PASSED test_helm_charts_clusterwide.py::TestClusterWide::test_abtest_model 
test_local_operators.py::TestLocalOperators::test_labelled_operator Error from server (InternalError): error when creating "../resources/model_controller_id.yaml": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.test-labelled-operator.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: dial tcp 10.106.135.101:443: connect: connection refused

test_helm_charts_clusterwide.py::TestClusterWide::test_mab_model 
[gw2] PASSED test_prepackaged_servers.py::TestPrepack::test_sklearn_v2 
[gw0] PASSED test_local_operators.py::TestLocalOperators::test_labelled_operator 
[gw3] PASSED test_batch_processor.py::TestBatchWorker::test_batch_worker 
test_prepackaged_servers.py::TestPrepack::test_xgboost 
test_prepackaged_servers.py::TestPrepack::test_tfserving Error: uninstall: Release not loaded: mymab: release: not found

[gw1] PASSED test_helm_charts_clusterwide.py::TestClusterWide::test_mab_model 
test_prepackaged_servers.py::TestPrepack::test_sklearn 
test_prepackaged_servers.py::TestPrepack::test_xgboost_v2 
[gw0] PASSED test_prepackaged_servers.py::TestPrepack::test_xgboost 
[gw3] PASSED test_prepackaged_servers.py::TestPrepack::test_sklearn 
test_prepackaged_servers.py::TestPrepack::test_mlflow 
[gw1] PASSED test_prepackaged_servers.py::TestPrepack::test_xgboost_v2 
[gw2] PASSED test_prepackaged_servers.py::TestPrepack::test_tfserving 
test_prepackaged_servers.py::TestPrepack::test_openapi_sklearn 
test_rolling_updates.py::test_rolling_deployment[graph1.json-graph2.json-True-ambas] 
[gw3] PASSED test_prepackaged_servers.py::TestPrepack::test_openapi_sklearn 
test_prepackaged_servers.py::TestPrepack::test_text_alibi_explainer Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:27:45Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-ambas" "resourceVersion":"5493" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-ambas/seldondeployments/mymodel" "uid":"35adc84d-3095-4e57-8d58-f969655e3725"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:27:45Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-ambas" "resourceVersion":"5493" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-ambas/seldondeployments/mymodel" "uid":"35adc84d-3095-4e57-8d58-f969655e3725"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

test_rolling_updates.py::test_rolling_deployment[graph1.json-graph3.json-True-ambas] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:27:45Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-ambas" "resourceVersion":"5493" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-ambas/seldondeployments/mymodel" "uid":"35adc84d-3095-4e57-8d58-f969655e3725"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:27:45Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-ambas" "resourceVersion":"5493" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-ambas/seldondeployments/mymodel" "uid":"35adc84d-3095-4e57-8d58-f969655e3725"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:27:45Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-ambas" "resourceVersion":"5493" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-ambas/seldondeployments/mymodel" "uid":"35adc84d-3095-4e57-8d58-f969655e3725"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:27:45Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-ambas" "resourceVersion":"5493" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-ambas/seldondeployments/mymodel" "uid":"35adc84d-3095-4e57-8d58-f969655e3725"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:27:45Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-ambas" "resourceVersion":"5493" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-ambas/seldondeployments/mymodel" "uid":"35adc84d-3095-4e57-8d58-f969655e3725"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:27:45Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-ambas" "resourceVersion":"5493" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-ambas/seldondeployments/mymodel" "uid":"35adc84d-3095-4e57-8d58-f969655e3725"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

[gw0] PASSED test_prepackaged_servers.py::TestPrepack::test_mlflow Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:27:45Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-ambas" "resourceVersion":"5493" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-ambas/seldondeployments/mymodel" "uid":"35adc84d-3095-4e57-8d58-f969655e3725"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:27:45Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-ambas" "resourceVersion":"5493" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-ambas/seldondeployments/mymodel" "uid":"35adc84d-3095-4e57-8d58-f969655e3725"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:28:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-ambas" "resourceVersion":"5730" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-ambas/seldondeployments/mymodel" "uid":"b2197001-8ed3-4af1-828a-85f3cc80f277"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

[gw1] PASSED test_rolling_updates.py::test_rolling_deployment[graph1.json-graph2.json-True-ambas] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:28:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-ambas" "resourceVersion":"5730" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-ambas/seldondeployments/mymodel" "uid":"b2197001-8ed3-4af1-828a-85f3cc80f277"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:28:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-ambas" "resourceVersion":"5730" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-ambas/seldondeployments/mymodel" "uid":"b2197001-8ed3-4af1-828a-85f3cc80f277"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

test_rolling_updates.py::test_rolling_deployment[graph1.json-graph3.json-True-istio] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:28:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-ambas" "resourceVersion":"5730" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-ambas/seldondeployments/mymodel" "uid":"b2197001-8ed3-4af1-828a-85f3cc80f277"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

test_rolling_updates.py::test_rolling_deployment[graph1.json-graph2.json-True-istio] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:28:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-ambas" "resourceVersion":"5730" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-ambas/seldondeployments/mymodel" "uid":"b2197001-8ed3-4af1-828a-85f3cc80f277"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:28:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-ambas" "resourceVersion":"5730" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-ambas/seldondeployments/mymodel" "uid":"b2197001-8ed3-4af1-828a-85f3cc80f277"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:28:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-ambas" "resourceVersion":"5730" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-ambas/seldondeployments/mymodel" "uid":"b2197001-8ed3-4af1-828a-85f3cc80f277"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:28:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-ambas" "resourceVersion":"5730" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-ambas/seldondeployments/mymodel" "uid":"b2197001-8ed3-4af1-828a-85f3cc80f277"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:28:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-ambas" "resourceVersion":"5730" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-ambas/seldondeployments/mymodel" "uid":"b2197001-8ed3-4af1-828a-85f3cc80f277"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:28:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-ambas" "resourceVersion":"5730" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-ambas/seldondeployments/mymodel" "uid":"b2197001-8ed3-4af1-828a-85f3cc80f277"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-istio" "resourceVersion":"6052" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-istio/seldondeployments/mymodel" "uid":"5c698129-2ab9-45e8-bad0-53a85eed4166"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-istio" "resourceVersion":"6085" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-istio/seldondeployments/mymodel" "uid":"cd11c09a-fc76-4384-98c9-52b5ce70ea2f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

[gw3] PASSED test_rolling_updates.py::test_rolling_deployment[graph1.json-graph3.json-True-ambas] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-istio" "resourceVersion":"6052" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-istio/seldondeployments/mymodel" "uid":"5c698129-2ab9-45e8-bad0-53a85eed4166"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-istio" "resourceVersion":"6085" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-istio/seldondeployments/mymodel" "uid":"cd11c09a-fc76-4384-98c9-52b5ce70ea2f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

test_rolling_updates.py::test_rolling_deployment[graph1.json-graph4.json-True-istio] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-istio" "resourceVersion":"6052" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-istio/seldondeployments/mymodel" "uid":"5c698129-2ab9-45e8-bad0-53a85eed4166"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-istio" "resourceVersion":"6085" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-istio/seldondeployments/mymodel" "uid":"cd11c09a-fc76-4384-98c9-52b5ce70ea2f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-istio" "resourceVersion":"6052" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-istio/seldondeployments/mymodel" "uid":"5c698129-2ab9-45e8-bad0-53a85eed4166"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-istio" "resourceVersion":"6085" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-istio/seldondeployments/mymodel" "uid":"cd11c09a-fc76-4384-98c9-52b5ce70ea2f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-istio" "resourceVersion":"6052" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-istio/seldondeployments/mymodel" "uid":"5c698129-2ab9-45e8-bad0-53a85eed4166"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-istio" "resourceVersion":"6085" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-istio/seldondeployments/mymodel" "uid":"cd11c09a-fc76-4384-98c9-52b5ce70ea2f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-istio" "resourceVersion":"6052" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-istio/seldondeployments/mymodel" "uid":"5c698129-2ab9-45e8-bad0-53a85eed4166"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-istio" "resourceVersion":"6085" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-istio/seldondeployments/mymodel" "uid":"cd11c09a-fc76-4384-98c9-52b5ce70ea2f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-istio" "resourceVersion":"6052" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-istio/seldondeployments/mymodel" "uid":"5c698129-2ab9-45e8-bad0-53a85eed4166"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-istio" "resourceVersion":"6085" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-istio/seldondeployments/mymodel" "uid":"cd11c09a-fc76-4384-98c9-52b5ce70ea2f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-istio" "resourceVersion":"6052" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-istio/seldondeployments/mymodel" "uid":"5c698129-2ab9-45e8-bad0-53a85eed4166"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-istio" "resourceVersion":"6085" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-istio/seldondeployments/mymodel" "uid":"cd11c09a-fc76-4384-98c9-52b5ce70ea2f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:30:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-istio" "resourceVersion":"6318" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-istio/seldondeployments/mymodel" "uid":"5c8ac9d3-a3b3-4072-bedf-9308bd94dedb"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-istio" "resourceVersion":"6052" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-istio/seldondeployments/mymodel" "uid":"5c698129-2ab9-45e8-bad0-53a85eed4166"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-istio" "resourceVersion":"6085" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-istio/seldondeployments/mymodel" "uid":"cd11c09a-fc76-4384-98c9-52b5ce70ea2f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:30:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-istio" "resourceVersion":"6318" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-istio/seldondeployments/mymodel" "uid":"5c8ac9d3-a3b3-4072-bedf-9308bd94dedb"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph2-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph2-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph2-json-true-istio" "resourceVersion":"6052" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph2-json-true-istio/seldondeployments/mymodel" "uid":"5c698129-2ab9-45e8-bad0-53a85eed4166"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph2-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph2-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph2.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph3-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph3-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:29:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph3-json-true-istio" "resourceVersion":"6085" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph3-json-true-istio/seldondeployments/mymodel" "uid":"cd11c09a-fc76-4384-98c9-52b5ce70ea2f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph3-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph3-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph3.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:30:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-istio" "resourceVersion":"6318" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-istio/seldondeployments/mymodel" "uid":"5c8ac9d3-a3b3-4072-bedf-9308bd94dedb"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

[gw0] PASSED test_rolling_updates.py::test_rolling_deployment[graph1.json-graph2.json-True-istio] 
[gw1] PASSED test_rolling_updates.py::test_rolling_deployment[graph1.json-graph3.json-True-istio] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:30:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-istio" "resourceVersion":"6318" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-istio/seldondeployments/mymodel" "uid":"5c8ac9d3-a3b3-4072-bedf-9308bd94dedb"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:30:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-istio" "resourceVersion":"6318" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-istio/seldondeployments/mymodel" "uid":"5c8ac9d3-a3b3-4072-bedf-9308bd94dedb"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:30:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-istio" "resourceVersion":"6318" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-istio/seldondeployments/mymodel" "uid":"5c8ac9d3-a3b3-4072-bedf-9308bd94dedb"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

test_rolling_updates.py::test_rolling_deployment[graph1.json-graph5.json-True-istio] 
test_rolling_updates.py::test_rolling_deployment[graph1.json-graph5.json-True-ambas] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:30:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-istio" "resourceVersion":"6318" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-istio/seldondeployments/mymodel" "uid":"5c8ac9d3-a3b3-4072-bedf-9308bd94dedb"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:30:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-istio" "resourceVersion":"6318" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-istio/seldondeployments/mymodel" "uid":"5c8ac9d3-a3b3-4072-bedf-9308bd94dedb"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:30:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-istio" "resourceVersion":"6318" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-istio/seldondeployments/mymodel" "uid":"5c8ac9d3-a3b3-4072-bedf-9308bd94dedb"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:30:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-istio" "resourceVersion":"6318" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-istio/seldondeployments/mymodel" "uid":"5c8ac9d3-a3b3-4072-bedf-9308bd94dedb"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

[gw2] PASSED test_prepackaged_servers.py::TestPrepack::test_text_alibi_explainer 
[gw3] PASSED test_rolling_updates.py::test_rolling_deployment[graph1.json-graph4.json-True-istio] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-istio" "resourceVersion":"6700" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-istio/seldondeployments/mymodel" "uid":"65cb03a8-9dd0-4457-bbf3-83639a7f76b5"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-ambas" "resourceVersion":"6719" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-ambas/seldondeployments/mymodel" "uid":"c1b2fc8f-d19b-4cb1-827d-04636237382f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-istio" "resourceVersion":"6700" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-istio/seldondeployments/mymodel" "uid":"65cb03a8-9dd0-4457-bbf3-83639a7f76b5"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-ambas" "resourceVersion":"6719" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-ambas/seldondeployments/mymodel" "uid":"c1b2fc8f-d19b-4cb1-827d-04636237382f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-istio" "resourceVersion":"6700" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-istio/seldondeployments/mymodel" "uid":"65cb03a8-9dd0-4457-bbf3-83639a7f76b5"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-ambas" "resourceVersion":"6719" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-ambas/seldondeployments/mymodel" "uid":"c1b2fc8f-d19b-4cb1-827d-04636237382f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

test_rolling_updates.py::test_rolling_deployment[graph1.json-graph8.json-True-ambas] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-istio" "resourceVersion":"6700" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-istio/seldondeployments/mymodel" "uid":"65cb03a8-9dd0-4457-bbf3-83639a7f76b5"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-ambas" "resourceVersion":"6719" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-ambas/seldondeployments/mymodel" "uid":"c1b2fc8f-d19b-4cb1-827d-04636237382f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

test_rolling_updates.py::test_rolling_deployment[graph1.json-graph4.json-True-ambas] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-istio" "resourceVersion":"6700" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-istio/seldondeployments/mymodel" "uid":"65cb03a8-9dd0-4457-bbf3-83639a7f76b5"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-ambas" "resourceVersion":"6719" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-ambas/seldondeployments/mymodel" "uid":"c1b2fc8f-d19b-4cb1-827d-04636237382f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-istio" "resourceVersion":"6700" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-istio/seldondeployments/mymodel" "uid":"65cb03a8-9dd0-4457-bbf3-83639a7f76b5"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-ambas" "resourceVersion":"6719" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-ambas/seldondeployments/mymodel" "uid":"c1b2fc8f-d19b-4cb1-827d-04636237382f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-istio" "resourceVersion":"6700" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-istio/seldondeployments/mymodel" "uid":"65cb03a8-9dd0-4457-bbf3-83639a7f76b5"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-ambas" "resourceVersion":"6719" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-ambas/seldondeployments/mymodel" "uid":"c1b2fc8f-d19b-4cb1-827d-04636237382f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-istio" "resourceVersion":"6700" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-istio/seldondeployments/mymodel" "uid":"65cb03a8-9dd0-4457-bbf3-83639a7f76b5"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-ambas" "resourceVersion":"6719" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-ambas/seldondeployments/mymodel" "uid":"c1b2fc8f-d19b-4cb1-827d-04636237382f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-istio" "resourceVersion":"6700" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-istio/seldondeployments/mymodel" "uid":"65cb03a8-9dd0-4457-bbf3-83639a7f76b5"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-ambas" "resourceVersion":"6719" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-ambas/seldondeployments/mymodel" "uid":"c1b2fc8f-d19b-4cb1-827d-04636237382f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-istio" "resourceVersion":"6700" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-istio/seldondeployments/mymodel" "uid":"65cb03a8-9dd0-4457-bbf3-83639a7f76b5"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph5-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph5-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:31:25Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph5-json-true-ambas" "resourceVersion":"6719" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph5-json-true-ambas/seldondeployments/mymodel" "uid":"c1b2fc8f-d19b-4cb1-827d-04636237382f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph5-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph5-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph5.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:32:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-ambas" "resourceVersion":"7075" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-ambas/seldondeployments/mymodel" "uid":"e77a5c95-a7e9-40b6-9572-a98ea0e3c97f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

[gw0] PASSED test_rolling_updates.py::test_rolling_deployment[graph1.json-graph5.json-True-istio] 
[gw1] PASSED test_rolling_updates.py::test_rolling_deployment[graph1.json-graph5.json-True-ambas] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:32:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-ambas" "resourceVersion":"7075" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-ambas/seldondeployments/mymodel" "uid":"e77a5c95-a7e9-40b6-9572-a98ea0e3c97f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

test_rolling_updates.py::test_rolling_deployment[graph7.json-graph8.json-False-ambas] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:32:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-ambas" "resourceVersion":"7075" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-ambas/seldondeployments/mymodel" "uid":"e77a5c95-a7e9-40b6-9572-a98ea0e3c97f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:32:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-ambas" "resourceVersion":"7075" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-ambas/seldondeployments/mymodel" "uid":"e77a5c95-a7e9-40b6-9572-a98ea0e3c97f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

[gw3] PASSED test_rolling_updates.py::test_rolling_deployment[graph1.json-graph8.json-True-ambas] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:32:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-ambas" "resourceVersion":"7075" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-ambas/seldondeployments/mymodel" "uid":"e77a5c95-a7e9-40b6-9572-a98ea0e3c97f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

test_rolling_updates.py::test_rolling_deployment[graph1.json-graph8.json-True-istio] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:32:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-ambas" "resourceVersion":"7075" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-ambas/seldondeployments/mymodel" "uid":"e77a5c95-a7e9-40b6-9572-a98ea0e3c97f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

test_rolling_updates.py::test_rolling_deployment[graph7.json-graph8.json-False-istio] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:32:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-ambas" "resourceVersion":"7075" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-ambas/seldondeployments/mymodel" "uid":"e77a5c95-a7e9-40b6-9572-a98ea0e3c97f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:32:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-ambas" "resourceVersion":"7075" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-ambas/seldondeployments/mymodel" "uid":"e77a5c95-a7e9-40b6-9572-a98ea0e3c97f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

[gw1] PASSED test_rolling_updates.py::test_rolling_deployment[graph7.json-graph8.json-False-ambas] Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:32:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-ambas" "resourceVersion":"7075" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-ambas/seldondeployments/mymodel" "uid":"e77a5c95-a7e9-40b6-9572-a98ea0e3c97f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

test_security.py::test_xss_header Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-deployment-graph1-json-graph4-json-true-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-deployment-graph1-json-graph4-json-true-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:32:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-deployment-graph1-json-graph4-json-true-ambas" "resourceVersion":"7075" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-deployment-graph1-json-graph4-json-true-ambas/seldondeployments/mymodel" "uid":"e77a5c95-a7e9-40b6-9572-a98ea0e3c97f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-deployment-graph1-json-graph4-json-true-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-deployment-graph1-json-graph4-json-true-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "/workspace/source/testing/resources/graph4.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF

[gw2] PASSED test_rolling_updates.py::test_rolling_deployment[graph1.json-graph4.json-True-ambas] 
test_security.py::test_xss_escaping 
[gw3] PASSED test_rolling_updates.py::test_rolling_deployment[graph7.json-graph8.json-False-istio] 
[gw1] PASSED test_security.py::test_xss_header 
[gw2] PASSED test_security.py::test_xss_escaping 
test_rolling_updates.py::test_rolling_deployment[graph1.json-graph8.json-True-istio] 
[gw0] PASSED test_rolling_updates.py::test_rolling_deployment[graph1.json-graph8.json-True-istio] 
test_tracing.py::test_tracing_rest 
[gw0] PASSED test_tracing.py::test_tracing_rest 
===Flaky Test Report===

test_rolling_deployment[graph1.json-graph3.json-True-ambas] passed 1 out of the required 1 times. Success!
test_rolling_deployment[graph1.json-graph4.json-True-istio] passed 1 out of the required 1 times. Success!
test_rolling_deployment[graph1.json-graph8.json-True-ambas] passed 1 out of the required 1 times. Success!
test_rolling_deployment[graph7.json-graph8.json-False-istio] passed 1 out of the required 1 times. Success!
test_rolling_deployment[graph1.json-graph2.json-True-ambas] passed 1 out of the required 1 times. Success!
test_rolling_deployment[graph1.json-graph3.json-True-istio] passed 1 out of the required 1 times. Success!
test_rolling_deployment[graph1.json-graph5.json-True-ambas] passed 1 out of the required 1 times. Success!
test_rolling_deployment[graph7.json-graph8.json-False-ambas] passed 1 out of the required 1 times. Success!
test_rolling_deployment[graph1.json-graph4.json-True-ambas] passed 1 out of the required 1 times. Success!
test_rolling_deployment[graph1.json-graph2.json-True-istio] passed 1 out of the required 1 times. Success!
test_rolling_deployment[graph1.json-graph5.json-True-istio] passed 1 out of the required 1 times. Success!
test_rolling_deployment[graph1.json-graph8.json-True-istio] failed (2 runs remaining out of 3).
	<class 'AssertionError'>
	
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:238>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:596>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:588>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:606>]
test_rolling_deployment[graph1.json-graph8.json-True-istio] passed 1 out of the required 1 times. Success!

===End Flaky Test Report===

======================== 35 passed in 768.77s (0:12:48) ========================
pytest \
	--verbose \
	-s \
	-W ignore \
	-n 0 \
	-m "sequential" 2>&1
2021-01-19 12:36:20.560195: W tensorflow/stream_executor/platform/default/dso_loader.cc:60] Could not load dynamic library 'libcudart.so.11.0'; dlerror: libcudart.so.11.0: cannot open shared object file: No such file or directory
2021-01-19 12:36:20.560246: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.
============================= test session starts ==============================
platform linux -- Python 3.6.10, pytest-5.3.1, py-1.9.0, pluggy-0.13.1 -- /usr/local/bin/python
cachedir: .pytest_cache
rootdir: /workspace/source/testing/scripts, inifile: setup.cfg
plugins: cov-2.8.1, xdist-1.30.0, forked-1.3.0, flaky-3.6.1
collecting ... collected 112 items / 61 deselected / 51 selected

test_operator_updates.py::test_cluster_update[0.4.1] SKIPPED
test_operator_updates.py::test_cluster_update[0.5.1] namespace/test-cluster-update-0-5-1 created
Error from server (InternalError): error when creating "../resources/graph1.json": Internal error occurred: failed calling webhook "mseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/mutate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: dial tcp 10.111.160.249:443: connect: connection refused
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-e2eb561" successfully rolled out

PODS UPDATE: NAMESPACE       NAME                                         READY   STATUS    RESTARTS   AGE


PODS UPDATE: istio-system    grafana-5dc4b4676c-28lqk                     1/1     Running   0          15m


PODS UPDATE: istio-system    istio-egressgateway-659dcf96bb-cpvw4         1/1     Running   0          15m


PODS UPDATE: istio-system    istio-ingressgateway-648bd66f75-dnm74        1/1     Running   0          15m


PODS UPDATE: istio-system    istio-tracing-8584b4d7f9-tv579               1/1     Running   0          15m


PODS UPDATE: istio-system    istiod-7d69bf85c5-mhl22                      1/1     Running   0          15m


PODS UPDATE: istio-system    kiali-6f457f5964-qztv2                       1/1     Running   0          15m


PODS UPDATE: istio-system    prometheus-66b644f746-vhxpj                  2/2     Running   0          15m


PODS UPDATE: keda            keda-metrics-apiserver-65c46b9b8c-cgmst      1/1     Running   0          14m


PODS UPDATE: keda            keda-operator-64657f8ccb-l72zh               1/1     Running   0          14m


PODS UPDATE: kube-system     coredns-5644d7b6d9-2pcl6                     1/1     Running   0          27m


PODS UPDATE: kube-system     coredns-5644d7b6d9-sr4qn                     1/1     Running   0          27m


PODS UPDATE: kube-system     etcd-kind-control-plane                      1/1     Running   0          26m


PODS UPDATE: kube-system     kindnet-4bpfb                                1/1     Running   0          27m


PODS UPDATE: kube-system     kindnet-lrdl7                                1/1     Running   0          27m


PODS UPDATE: kube-system     kube-apiserver-kind-control-plane            1/1     Running   0          27m


PODS UPDATE: kube-system     kube-controller-manager-kind-control-plane   1/1     Running   0          27m


PODS UPDATE: kube-system     kube-proxy-fsfmj                             1/1     Running   0          27m


PODS UPDATE: kube-system     kube-proxy-g6z7x                             1/1     Running   0          27m


PODS UPDATE: kube-system     kube-scheduler-kind-control-plane            1/1     Running   0          26m


PODS UPDATE: kube-system     metrics-server-787cbd4d5d-qmzll              1/1     Running   0          14m


PODS UPDATE: seldon-system   seldon-controller-manager-65889f4d48-zg2sd   1/1     Running   0          14m


PODS UPDATE: seldon          ambassador-666bf45855-rfgqd                  1/1     Running   0          16m


PODS UPDATE: seldon          jaeger-6999b5bb48-wskgj                      1/1     Running   0          14m


PODS UPDATE: seldon          jaeger-operator-65bcd659cf-m7vrz             1/1     Running   0          14m


PODS UPDATE: seldon-system   seldon-controller-manager-65889f4d48-zg2sd   1/1     Terminating   0          14m


PODS UPDATE: seldon-system   seldon-controller-manager-65889f4d48-zg2sd   0/1     Terminating   0          14m


PODS UPDATE: seldon-system   seldon-controller-manager-65889f4d48-zg2sd   0/1     Terminating   0          14m


PODS UPDATE: seldon-system   seldon-controller-manager-65889f4d48-zg2sd   0/1     Terminating   0          14m


PODS UPDATE: seldon-system   seldon-controller-manager-fc99ffd87-5954l    0/1     Pending       0          0s


PODS UPDATE: seldon-system   seldon-controller-manager-fc99ffd87-5954l    0/1     Pending       0          0s


PODS UPDATE: seldon-system   seldon-controller-manager-fc99ffd87-5954l    0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system   seldon-controller-manager-fc99ffd87-5954l    1/1     Running             0          5s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9f48c58d-mwwqp     0/2     Pending             0          0s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9f48c58d-mwwqp     0/2     Pending             0          0s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9f48c58d-mwwqp     0/2     ContainerCreating   0          0s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9Release "seldon" has been upgraded. Happy Helming!
NAME: seldon
LAST DEPLOYED: Tue Jan 19 12:37:11 2021
NAMESPACE: seldon-system
STATUS: deployed
REVISION: 2
TEST SUITE: None
PASSEDnamespace "test-cluster-update-0-5-1" deleted

test_operator_updates.py::test_cluster_update[1.0.2] namespace/test-cluster-update-1-0-2 created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-e2eb561" successfully rolled out
f48c58d-mwwqp     0/2     Running             0          8s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9f48c58d-mwwqp     1/2     Running             0          21s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9f48c58d-mwwqp     2/2     Running             0          28s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-9fgqd    0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-9fgqd    0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-9fgqd    0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-9fgqd    1/1     Running             0          1s


PODS UPDATE: seldon-system               seldon-controller-manager-fc99ffd87-5954l    1/1     Terminating         0          48s


PODS UPDATE: seldon-system               seldon-controller-manager-fc99ffd87-5954l    0/1     Terminating         0          49s


PODS UPDATE: seldon-system               seldon-controller-manager-fc99ffd87-5954l    0/1     Terminating         0          49s


PODS UPDATE: seldon-system               seldon-controller-manager-56bcf94674-48hgm   0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-9fgqd    1/1     Terminating         0          5s


PODS UPDATE: seldon-system               seldon-controller-manager-56bcf94674-48hgm   0/1     Pending             0          0s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9f48c58d-mwwqp     2/2     Terminating         0          39s


PODS UPDATE: seldon-system               seldon-controller-manager-56bcf94674-48hgm   0/1     ContainerCreating   0          1s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-9fgqd    0/1     Terminating         0          7s


PODS UPDATE: seldon-system               seldon-controller-manager-56bcf94674-48hgm   1/1     Running             0          2s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-9fgqd    0/1     Terminating         0          10s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-9fgqd    0/1     Terminating         0          10s


PODS UPDATE: seldon-system               seldon-controller-manager-fc99ffd87-5954l    0/1     Terminating         0          57s


PODS UPDATE: seldon-system               seldon-controller-manager-fc99ffd87-5954l    0/1     Terminating         0          57s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9f48c58d-mwwqp     1/2     Terminating         0          53s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9f48c58d-mwwqp     0/2     Terminating         0          61s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9f48c58d-mwwqp     0/2     Terminating         0          61s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9f48c58d-mwwqp     0/2     Terminating         0          64s


PODS UPDATE: test-cluster-update-0-5-1   mymodel-mymodel-e2eb561-6d9f48c58d-mwwqp     0/2     Terminating         0          64s


PODS UPDATE: seldon-system               seldon-controller-manager-56bcf94674-48hgm   1/1     Terminating         0          26s


PODS UPDATE: seldon-system               seldon-controller-manager-56bcf94674-48hgm   0/1     Terminating         0          27s


PODS UPDATE: seldon-system               seldon-controller-manager-56bcf94674-48hgm   0/1     Terminating         0          28s


PODS UPDATE: seldon-system               seldon-controller-manager-56bcf94674-48hgm   0/1     Terminating         0          28s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-qgfl9   0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-qgfl9   0/1     Pending             0Release "seldon" has been upgraded. Happy Helming!
NAME: seldon
LAST DEPLOYED: Tue Jan 19 12:38:47 2021
NAMESPACE: seldon-system
STATUS: deployed
REVISION: 2
TEST SUITE: None
PASSEDnamespace "test-cluster-update-1-0-2" deleted

test_operator_updates.py::test_cluster_update[1.1.0] namespace/test-cluster-update-1-1-0 created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
          0s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-qgfl9   0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-qgfl9   1/1     Running             0          6s


PODS UPDATE: test-cluster-update-1-0-2   mymodel-mymodel-e2eb561-85dd6d6c9-k7qrt      0/2     Pending             0          0s


PODS UPDATE: test-cluster-update-1-0-2   mymodel-mymodel-e2eb561-85dd6d6c9-k7qrt      0/2     Pending             0          0s


PODS UPDATE: test-cluster-update-1-0-2   mymodel-mymodel-e2eb561-85dd6d6c9-k7qrt      0/2     ContainerCreating   0          0s


PODS UPDATE: test-cluster-update-1-0-2   mymodel-mymodel-e2eb561-85dd6d6c9-k7qrt      0/2     Running             0          12s


PODS UPDATE: test-cluster-update-1-0-2   mymodel-mymodel-e2eb561-85dd6d6c9-k7qrt      1/2     Running             0          22s


PODS UPDATE: test-cluster-update-1-0-2   mymodel-mymodel-e2eb561-85dd6d6c9-k7qrt      2/2     Running             0          33s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-gtjzf    0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-gtjzf    0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-gtjzf    0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-gtjzf    1/1     Running             0          2s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-qgfl9   1/1     Terminating         0          64s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-qgfl9   0/1     Terminating         0          65s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-gtjzf    1/1     Terminating         0          5s


PODS UPDATE: test-cluster-update-1-0-2   mymodel-mymodel-e2eb561-85dd6d6c9-k7qrt      2/2     Terminating         0          44s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-gtjzf    0/1     Terminating         0          6s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-g8bzw    0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-g8bzw    0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-g8bzw    0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-gtjzf    0/1     Terminating         0          7s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-gtjzf    0/1     Terminating         0          7s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-g8bzw    1/1     Running             0          2s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-qgfl9   0/1     Terminating         0          77s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-qgfl9   0/1     Terminating         0          77s


PODS UPDATE: test-cluster-update-1-0-2   mymodel-mymodel-e2eb561-85dd6d6c9-k7qrt      0/2     Terminating         0          65s


PODS UPDATE: test-cluster-update-1-0-2   mymodel-mymodel-e2eb561-85dd6d6c9-k7qrt      0/2     Terminating         0          66s


PODS UPDATE: test-cluster-update-1-0-2   mymodel-mymodel-e2eb561-85dd6d6c9-k7qrt      0/2     Terminating         0          66s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-g8bzw    1/1     Terminating         0          27s


PODS UPDATE: seldon-system               seldon-controller-manager-6978f54b99-299jq   0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-6978f54b99-299jq   0/1     Pending             0          0s


PODS UPDATE: seldon-system             Release "seldon" has been upgraded. Happy Helming!
NAME: seldon
LAST DEPLOYED: Tue Jan 19 12:40:16 2021
NAMESPACE: seldon-system
STATUS: deployed
REVISION: 2
TEST SUITE: None
PASSEDnamespace "test-cluster-update-1-1-0" deleted

test_operator_updates.py::test_namespace_update[1.0.2] namespace/test-namespace-update-1-0-2 created
seldondeployment.machinelearning.seldon.io/mymodel created
  seldon-controller-manager-6978f54b99-299jq   0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-g8bzw    0/1     Terminating         0          28s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-g8bzw    0/1     Terminating         0          29s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-g8bzw    0/1     Terminating         0          29s


PODS UPDATE: seldon-system               seldon-controller-manager-6978f54b99-299jq   1/1     Running             0          4s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-model-6df5d95fcd-8rb6x   0/2     Pending             0          0s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-model-6df5d95fcd-8rb6x   0/2     Pending             0          0s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-model-6df5d95fcd-8rb6x   0/2     ContainerCreating   0          0s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-model-6df5d95fcd-8rb6x   0/2     Running             0          5s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-model-6df5d95fcd-8rb6x   1/2     Running             0          22s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-model-6df5d95fcd-8rb6x   2/2     Running             0          28s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-dd76r          0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-dd76r          0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-dd76r          0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-dd76r          1/1     Running             0          1s


PODS UPDATE: seldon-system               seldon-controller-manager-6978f54b99-299jq         1/1     Terminating         0          57s


PODS UPDATE: seldon-system               seldon-controller-manager-6978f54b99-299jq         0/1     Terminating         0          58s


PODS UPDATE: seldon-system               seldon-controller-manager-6978f54b99-299jq         0/1     Terminating         0          59s


PODS UPDATE: seldon-system               seldon-controller-manager-6978f54b99-299jq         0/1     Terminating         0          59s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-dd76r          1/1     Terminating         0          4s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-model-6df5d95fcd-8rb6x   2/2     Terminating         0          38s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-dd76r          0/1     Terminating         0          5s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-js7s4          0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-js7s4          0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-js7s4          0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-js7s4          1/1     Running             0          2s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-dd76r          0/1     Terminating         0          15s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-dd76r          0/1     Terminating         0          15s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-model-6df5d95fcd-8rb6x   1/2     Terminating         0          48s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-model-6df5d95fcd-8rb6x   0/2     Terminating         0          49s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-modedeployment "mymodel-mymodel-e2eb561" successfully rolled out
namespace/test-namespace-update-1-0-2 labeled
NAME: seldon
LAST DEPLOYED: Tue Jan 19 12:41:26 2021
NAMESPACE: test-namespace-update-1-0-2
STATUS: deployed
REVISION: 1
TEST SUITE: None
deployment "mymodel-mymodel-e2eb561" successfully rolled out
PASSEDnamespace "test-namespace-update-1-0-2" deleted

test_operator_updates.py::test_namespace_update[1.1.0] namespace/test-namespace-update-1-1-0 created
seldondeployment.machinelearning.seldon.io/mymodel created
l-6df5d95fcd-8rb6x   0/2     Terminating         0          49s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-model-6df5d95fcd-8rb6x   0/2     Terminating         0          50s


PODS UPDATE: test-cluster-update-1-1-0   mymodel-mymodel-0-complex-model-6df5d95fcd-8rb6x   0/2     Terminating         0          50s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-js7s4          1/1     Terminating         0          16s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-js7s4          0/1     Terminating         0          17s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-t658k         0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-t658k         0/1     Pending             0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-t658k         0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-js7s4          0/1     Terminating         0          18s


PODS UPDATE: seldon-system               seldon-controller-manager-b9bb65459-js7s4          0/1     Terminating         0          18s


PODS UPDATE: seldon-system               seldon-controller-manager-78cf68ffb9-t658k         1/1     Running             0          1s


PODS UPDATE: test-namespace-update-1-0-2   mymodel-mymodel-e2eb561-67b4df4df8-jvrwz           0/2     Pending             0          0s


PODS UPDATE: test-namespace-update-1-0-2   mymodel-mymodel-e2eb561-67b4df4df8-jvrwz           0/2     Pending             0          0s


PODS UPDATE: test-namespace-update-1-0-2   mymodel-mymodel-e2eb561-67b4df4df8-jvrwz           0/2     ContainerCreating   0          0s


PODS UPDATE: test-namespace-update-1-0-2   mymodel-mymodel-e2eb561-67b4df4df8-jvrwz           0/2     Running             0          1s


PODS UPDATE: test-namespace-update-1-0-2   mymodel-mymodel-e2eb561-67b4df4df8-jvrwz           1/2     Running             0          24s


PODS UPDATE: test-namespace-update-1-0-2   mymodel-mymodel-e2eb561-67b4df4df8-jvrwz           2/2     Running             0          25s


PODS UPDATE: test-namespace-update-1-0-2   seldon-controller-manager-7b888b6f5d-scf4w         0/1     Pending             0          0s


PODS UPDATE: test-namespace-update-1-0-2   seldon-controller-manager-7b888b6f5d-scf4w         0/1     Pending             0          0s


PODS UPDATE: test-namespace-update-1-0-2   seldon-controller-manager-7b888b6f5d-scf4w         0/1     ContainerCreating   0          0s


PODS UPDATE: test-namespace-update-1-0-2   seldon-controller-manager-7b888b6f5d-scf4w         1/1     Running             0          1s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-t658k         1/1     Terminating         0          52s


PODS UPDATE: test-namespace-update-1-0-2   mymodel-mymodel-e2eb561-67b4df4df8-jvrwz           2/2     Terminating         0          33s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-t658k         0/1     Terminating         0          52s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-5kmcn          0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-5kmcn          0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-5kmcn          0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-t658k         0/1     Terminating         0          53s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-t658k         0/1     Terminating         0          53s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-5kmcn          1/1     Running             0          1s


PODS UPDATE: test-namespace-update-deployment "mymodel-mymodel-0-complex-model" successfully rolled out
namespace/test-namespace-update-1-1-0 labeled
NAME: seldon
LAST DEPLOYED: Tue Jan 19 12:42:51 2021
NAMESPACE: test-namespace-update-1-1-0
STATUS: deployed
REVISION: 1
TEST SUITE: None
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
PASSEDnamespace "test-namespace-update-1-1-0" deleted

test_operator_updates.py::test_label_update[1.0.2] namespace/test-label-update-1-0-2 created
seldondeployment.machinelearning.seldon.io/mymodel created
1-0-2   seldon-controller-manager-7b888b6f5d-scf4w         1/1     Terminating         0          14s


PODS UPDATE: test-namespace-update-1-0-2   seldon-controller-manager-7b888b6f5d-scf4w         0/1     Terminating         0          14s


PODS UPDATE: test-namespace-update-1-0-2   mymodel-mymodel-e2eb561-67b4df4df8-jvrwz           0/2     Terminating         0          53s


PODS UPDATE: test-namespace-update-1-0-2   mymodel-mymodel-e2eb561-67b4df4df8-jvrwz           0/2     Terminating         0          53s


PODS UPDATE: test-namespace-update-1-0-2   seldon-controller-manager-7b888b6f5d-scf4w         0/1     Terminating         0          26s


PODS UPDATE: test-namespace-update-1-0-2   seldon-controller-manager-7b888b6f5d-scf4w         0/1     Terminating         0          26s


PODS UPDATE: test-namespace-update-1-0-2   mymodel-mymodel-e2eb561-67b4df4df8-jvrwz           0/2     Terminating         0          54s


PODS UPDATE: test-namespace-update-1-0-2   mymodel-mymodel-e2eb561-67b4df4df8-jvrwz           0/2     Terminating         0          54s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-5kmcn          1/1     Terminating         0          27s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-5kmcn          0/1     Terminating         0          27s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-8kvc6         0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-8kvc6         0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-8kvc6         0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-5kmcn          0/1     Terminating         0          28s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-5kmcn          0/1     Terminating         0          28s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-8kvc6         1/1     Running             0          1s


PODS UPDATE: test-namespace-update-1-1-0   mymodel-mymodel-0-complex-model-665ff44775-kqkgt   0/2     Pending             0          0s


PODS UPDATE: test-namespace-update-1-1-0   mymodel-mymodel-0-complex-model-665ff44775-kqkgt   0/2     Pending             0          0s


PODS UPDATE: test-namespace-update-1-1-0   mymodel-mymodel-0-complex-model-665ff44775-kqkgt   0/2     ContainerCreating   0          0s


PODS UPDATE: test-namespace-update-1-1-0   mymodel-mymodel-0-complex-model-665ff44775-kqkgt   0/2     Running             0          2s


PODS UPDATE: test-namespace-update-1-1-0   mymodel-mymodel-0-complex-model-665ff44775-kqkgt   1/2     Running             0          23s


PODS UPDATE: test-namespace-update-1-1-0   mymodel-mymodel-0-complex-model-665ff44775-kqkgt   2/2     Running             0          25s


PODS UPDATE: test-namespace-update-1-1-0   seldon-controller-manager-59c5fcd4dc-59fjj         0/1     Pending             0          0s


PODS UPDATE: test-namespace-update-1-1-0   seldon-controller-manager-59c5fcd4dc-59fjj         0/1     Pending             0          0s


PODS UPDATE: test-namespace-update-1-1-0   seldon-controller-manager-59c5fcd4dc-59fjj         0/1     ContainerCreating   0          0s


PODS UPDATE: test-namespace-update-1-1-0   seldon-controller-manager-59c5fcd4dc-59fjj         1/1     Running             0          1s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-8kvc6         1/1     Terminating         0          56s


PODS UPDATE: test-namespace-update-1-1-0   mymodel-mymodel-0-complex-model-665ff44775-kqkgt   2/2     Terminating         0          37s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-gplq2          0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-gplq2          0/1     Pending    deployment "mymodel-mymodel-e2eb561" successfully rolled out
NAME: seldon-test-label-update-1-0-2
LAST DEPLOYED: Tue Jan 19 12:44:11 2021
NAMESPACE: test-label-update-1-0-2
STATUS: deployed
REVISION: 1
TEST SUITE: None
seldondeployment.machinelearning.seldon.io/mymodel labeled
deployment "mymodel-mymodel-e2eb561" successfully rolled out
release "seldon-test-label-update-1-0-2" uninstalled
PASSEDnamespace "test-label-update-1-0-2" deleted
         0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-8kvc6         0/1     Terminating         0          57s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-gplq2          0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-8kvc6         0/1     Terminating         0          58s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-8kvc6         0/1     Terminating         0          58s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-gplq2          1/1     Running             0          1s


PODS UPDATE: test-namespace-update-1-1-0   seldon-controller-manager-59c5fcd4dc-59fjj         1/1     Terminating         0          14s


PODS UPDATE: test-namespace-update-1-1-0   seldon-controller-manager-59c5fcd4dc-59fjj         0/1     Terminating         0          14s


PODS UPDATE: test-namespace-update-1-1-0   seldon-controller-manager-59c5fcd4dc-59fjj         0/1     Terminating         0          15s


PODS UPDATE: test-namespace-update-1-1-0   seldon-controller-manager-59c5fcd4dc-59fjj         0/1     Terminating         0          15s


PODS UPDATE: test-namespace-update-1-1-0   mymodel-mymodel-0-complex-model-665ff44775-kqkgt   0/2     Terminating         0          49s


PODS UPDATE: test-namespace-update-1-1-0   mymodel-mymodel-0-complex-model-665ff44775-kqkgt   0/2     Terminating         0          50s


PODS UPDATE: test-namespace-update-1-1-0   mymodel-mymodel-0-complex-model-665ff44775-kqkgt   0/2     Terminating         0          53s


PODS UPDATE: test-namespace-update-1-1-0   mymodel-mymodel-0-complex-model-665ff44775-kqkgt   0/2     Terminating         0          53s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-gplq2          1/1     Terminating         0          27s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-gplq2          0/1     Terminating         0          27s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-jsmvh         0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-jsmvh         0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-jsmvh         0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-jsmvh         1/1     Running             0          1s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-gplq2          0/1     Terminating         0          35s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-gplq2          0/1     Terminating         0          35s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-e2eb561-5cc49c64f9-vl6wq           0/2     Pending             0          0s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-e2eb561-5cc49c64f9-vl6wq           0/2     Pending             0          0s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-e2eb561-5cc49c64f9-vl6wq           0/2     ContainerCreating   0          0s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-e2eb561-5cc49c64f9-vl6wq           0/2     Running             0          2s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-e2eb561-5cc49c64f9-vl6wq           1/2     Running             0          23s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-e2eb561-5cc49c64f9-vl6wq           2/2     Running             0          23s


PODS UPDATE: test-label-update-1-0-2       seldon-controller-manager-5798f597b9-rdmnc         0/1     Pending             0          0s


PODS UPDATE: test-label-update-1-0-2       seldon-controller-manager-5798f597b9-rdmnc         0/1     Pending             0          0s


PODS UPDATE: test-label-update-1-0-2       seldon-co
test_operator_updates.py::test_label_update[1.1.0] namespace/test-label-update-1-1-0 created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
NAME: seldon-test-label-update-1-1-0
LAST DEPLOYED: Tue Jan 19 12:45:32 2021
NAMESPACE: test-label-update-1-1-0
STATUS: deployed
REVISION: 1
TEST SUITE: None
seldondeployment.machinelearning.seldon.io/mymodel labeled
Waiting for deployment "mymodel-mymodel-0-complex-model" rollout to finish: 1 old replicas are pending termination...
Waiting for deployment "mymodel-mymodel-0-complex-model" rollout to finish: 1 old replicas are pending termination...
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
release "seldon-test-label-update-1-1-0" uninstalled
PASSEDntroller-manager-5798f597b9-rdmnc         0/1     ContainerCreating   0          0s


PODS UPDATE: test-label-update-1-0-2       seldon-controller-manager-5798f597b9-rdmnc         1/1     Running             0          2s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-0-complex-model-6cbccbd7bb-tvxzh   0/2     Pending             0          0s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-0-complex-model-6cbccbd7bb-tvxzh   0/2     Pending             0          0s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-0-complex-model-6cbccbd7bb-tvxzh   0/2     ContainerCreating   0          0s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-0-complex-model-6cbccbd7bb-tvxzh   0/2     Running             0          2s


PODS UPDATE: test-label-update-1-0-2       seldon-controller-manager-5798f597b9-rdmnc         1/1     Terminating         0          5s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-jsmvh         1/1     Terminating         0          51s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-0-complex-model-6cbccbd7bb-tvxzh   0/2     Terminating         0          2s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-e2eb561-5cc49c64f9-vl6wq           2/2     Terminating         0          32s


PODS UPDATE: test-label-update-1-0-2       seldon-controller-manager-5798f597b9-rdmnc         0/1     Terminating         0          7s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-jsmvh         0/1     Terminating         0          53s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-v95zg          0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-v95zg          0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-v95zg          0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-v95zg          1/1     Running             0          2s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-0-complex-model-6cbccbd7bb-tvxzh   0/2     Terminating         0          7s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-jsmvh         0/1     Terminating         0          57s


PODS UPDATE: seldon-system                 seldon-controller-manager-78cf68ffb9-jsmvh         0/1     Terminating         0          57s


PODS UPDATE: test-label-update-1-0-2       seldon-controller-manager-5798f597b9-rdmnc         0/1     Terminating         0          11s


PODS UPDATE: test-label-update-1-0-2       seldon-controller-manager-5798f597b9-rdmnc         0/1     Terminating         0          11s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-e2eb561-5cc49c64f9-vl6wq           2/2     Terminating         0          42s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-0-complex-model-6cbccbd7bb-tvxzh   0/2     Terminating         0          18s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-0-complex-model-6cbccbd7bb-tvxzh   0/2     Terminating         0          18s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-e2eb561-5cc49c64f9-vl6wq           0/2     Terminating         0          54s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-e2eb561-5cc49c64f9-vl6wq           0/2     Terminating         0          58s


PODS UPDATE: test-label-update-1-0-2       mymodel-mymodel-e2eb561-5cc49c64f9-vl6wq           0/2     Terminating         0          58s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-v95zg          1/1     Terminating         0          26s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-v95zg          0/1     Terminating         0          27s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-wm2pd         0/1     Pending             0        namespace "test-label-update-1-1-0" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update5[ambas] namespace/test-rolling-update5-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:46:15Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"12750" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d5e1e7b6-8816-4f8c-ae1a-cfd030fd54b1"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:46:15Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"12750" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d5e1e7b6-8816-4f8c-ae1a-cfd030fd54b1"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:46:15Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"12750" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d5e1e7b6-8816-4f8c-ae1a-cfd030fd54b1"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:46:15Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"12750" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d5e1e7b6-8816-4f8c-ae1a-cfd030fd54b1"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:46:15Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"12750" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d5e1e7b6-8816-4f8c-ae1a-cfd030fd54b1"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:46:15Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"12750" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d5e1e7b6-8816-4f8c-ae1a-cfd030fd54b1"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:46:15Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"12750" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d5e1e7b6-8816-4f8c-ae1a-cfd030fd54b1"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:46:15Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"12750" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d5e1e7b6-8816-4f8c-ae1a-cfd030fd54b1"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:46:15Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"12750" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d5e1e7b6-8816-4f8c-ae1a-cfd030fd54b1"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:46:15Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"12750" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d5e1e7b6-8816-4f8c-ae1a-cfd030fd54b1"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update5-ambas" deleted
namespace/test-rolling-update5-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:47:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13114" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d383e365-39c8-45f5-b068-8c33ad65380f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:47:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13114" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d383e365-39c8-45f5-b068-8c33ad65380f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:47:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13114" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d383e365-39c8-45f5-b068-8c33ad65380f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:47:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13114" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d383e365-39c8-45f5-b068-8c33ad65380f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:47:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13114" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d383e365-39c8-45f5-b068-8c33ad65380f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:47:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13114" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d383e365-39c8-45f5-b068-8c33ad65380f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:47:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13114" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d383e365-39c8-45f5-b068-8c33ad65380f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:47:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13114" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d383e365-39c8-45f5-b068-8c33ad65380f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:47:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13114" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d383e365-39c8-45f5-b068-8c33ad65380f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:47:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13114" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"d383e365-39c8-45f5-b068-8c33ad65380f"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update5-ambas" deleted
  0s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-wm2pd         0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-wm2pd         0/1     ContainerCreating   0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-wm2pd         1/1     Running             0          1s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-v95zg          0/1     Terminating         0          34s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-v95zg          0/1     Terminating         0          34s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-67df8cf78-rprrx    0/2     Pending             0          0s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-67df8cf78-rprrx    0/2     Pending             0          0s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-67df8cf78-rprrx    0/2     ContainerCreating   0          0s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-67df8cf78-rprrx    0/2     Running             0          2s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-67df8cf78-rprrx    1/2     Running             0          22s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-67df8cf78-rprrx    2/2     Running             0          24s


PODS UPDATE: test-label-update-1-1-0       seldon-controller-manager-866bfcdcb6-g2l59         0/1     Pending             0          0s


PODS UPDATE: test-label-update-1-1-0       seldon-controller-manager-866bfcdcb6-g2l59         0/1     Pending             0          0s


PODS UPDATE: test-label-update-1-1-0       seldon-controller-manager-866bfcdcb6-g2l59         0/1     ContainerCreating   0          0s


PODS UPDATE: test-label-update-1-1-0       seldon-controller-manager-866bfcdcb6-g2l59         1/1     Running             0          1s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-6999c79587-2nmqn   0/2     Pending             0          0s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-6999c79587-2nmqn   0/2     Pending             0          0s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-6999c79587-2nmqn   0/2     ContainerCreating   0          0s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-6999c79587-2nmqn   0/2     Running             0          2s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-6999c79587-2nmqn   1/2     Running             0          21s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-6999c79587-2nmqn   2/2     Running             0          22s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-67df8cf78-rprrx    2/2     Terminating         0          51s


PODS UPDATE: test-label-update-1-1-0       seldon-controller-manager-866bfcdcb6-g2l59         1/1     Terminating         0          26s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-wm2pd         1/1     Terminating         0          72s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-6999c79587-2nmqn   2/2     Terminating         0          24s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-wm2pd         0/1     Terminating         0          74s


PODS UPDATE: test-label-update-1-1-0       seldon-controller-manager-866bfcdcb6-g2l59         0/1     Terminating         0          28s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-2rm89          0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-2rm89          0/1     Pending             0          0s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-2rm89          0/1     ContainerCreating   0          0s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-6999c79587-2nmqn   0/2     Terminating         0          28s


PODS UPDATE: seldon-system                 seldon-controller-manager-b9bb65459-2rm89          1/1     Running             0          2s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-67df8cf78-rprrx    0/2     Terminating         0          63s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-67df8cf78-rprrx    0/2     Terminating         0          63s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-wm2pd         0/1     Terminating         0          86s


PODS UPDATE: seldon-system                 seldon-controller-manager-6978f54b99-wm2pd         0/1     Terminating         0          86s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-6999c79587-2nmqn   0/2     Terminating         0          38s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-6999c79587-2nmqn   0/2     Terminating         0          38s


PODS UPDATE: test-label-update-1-1-0       seldon-controller-manager-866bfcdcb6-g2l59         0/1     Terminating         0          40s


PODS UPDATE: test-label-update-1-1-0       seldon-controller-manager-866bfcdcb6-g2l59         0/1     Terminating         0          40s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-67df8cf78-rprrx    0/2     Terminating         0          67s


PODS UPDATE: test-label-update-1-1-0       mymodel-mymodel-0-complex-model-67df8cf78-rprrx    0/2     Terminating         0          67s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-v25m2   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-v25m2   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-v25m2   0/2     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-v25m2   0/2     Running             0          2s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-v25m2   1/2     Running             0          23s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-v25m2   2/2     Running             0          24s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-v25m2   2/2     Terminating         0          84s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-v25m2   0/2     Terminating         0          87s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-v25m2   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-v25m2   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-567j4   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-567j4   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-567j4   0/2     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-567j4   0/2     Running             0          1s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-567j4   1/2     Running             0          21s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-567j4   2/2     Running             0          24s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-567j4   2/2     Terminating         0          85s


PODS UPDATEnamespace/test-rolling-update5-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:49:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13470" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"19285236-7fd1-453d-bb02-6120565df4be"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:49:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13470" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"19285236-7fd1-453d-bb02-6120565df4be"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:49:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13470" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"19285236-7fd1-453d-bb02-6120565df4be"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:49:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13470" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"19285236-7fd1-453d-bb02-6120565df4be"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:49:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13470" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"19285236-7fd1-453d-bb02-6120565df4be"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:49:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13470" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"19285236-7fd1-453d-bb02-6120565df4be"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:49:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13470" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"19285236-7fd1-453d-bb02-6120565df4be"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:49:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13470" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"19285236-7fd1-453d-bb02-6120565df4be"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:49:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13470" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"19285236-7fd1-453d-bb02-6120565df4be"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:49:24Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13470" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"19285236-7fd1-453d-bb02-6120565df4be"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update5-ambas" deleted
namespace/test-rolling-update5-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:51:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13868" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"c5584708-66a4-4d03-be87-813e3c91ab1a"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:51:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13868" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"c5584708-66a4-4d03-be87-813e3c91ab1a"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:51:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13868" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"c5584708-66a4-4d03-be87-813e3c91ab1a"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:51:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13868" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"c5584708-66a4-4d03-be87-813e3c91ab1a"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:51:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13868" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"c5584708-66a4-4d03-be87-813e3c91ab1a"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:51:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13868" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"c5584708-66a4-4d03-be87-813e3c91ab1a"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:51:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13868" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"c5584708-66a4-4d03-be87-813e3c91ab1a"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:51:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13868" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"c5584708-66a4-4d03-be87-813e3c91ab1a"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:51:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13868" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"c5584708-66a4-4d03-be87-813e3c91ab1a"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:51:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"13868" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"c5584708-66a4-4d03-be87-813e3c91ab1a"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update5-ambas" deleted
namespace/test-rolling-update5-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:53:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"14265" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"0bb1b62e-173f-46b3-ac02-a3b9217737ab"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:53:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"14265" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"0bb1b62e-173f-46b3-ac02-a3b9217737ab"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:53:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"14265" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"0bb1b62e-173f-46b3-ac02-a3b9217737ab"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:53:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"14265" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"0bb1b62e-173f-46b3-ac02-a3b9217737ab"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:53:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"14265" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"0bb1b62e-173f-46b3-ac02-a3b9217737ab"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:53:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"14265" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"0bb1b62e-173f-46b3-ac02-a3b9217737ab"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:53:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"14265" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"0bb1b62e-173f-46b3-ac02-a3b9217737ab"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:53:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"14265" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"0bb1b62e-173f-46b3-ac02-a3b9217737ab"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:53:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"14265" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"0bb1b62e-173f-46b3-ac02-a3b9217737ab"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:53:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-ambas" "resourceVersion":"14265" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-ambas/seldondeployments/mymodel" "uid":"0bb1b62e-173f-46b3-ac02-a3b9217737ab"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update5-ambas" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update5[istio] namespace/test-rolling-update5-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-567j4   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-567j4   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-567j4   0/2     Terminating         0          92s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-567j4   0/2     Terminating         0          92s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-qvprr   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-qvprr   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-qvprr   0/2     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-qvprr   0/2     Running             0          1s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-qvprr   1/2     Running             0          21s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-qvprr   2/2     Running             0          25s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-qvprr   2/2     Terminating         0          85s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-qvprr   0/2     Terminating         0          87s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-qvprr   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-qvprr   0/2     Terminating         0          99s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-qvprr   0/2     Terminating         0          99s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-8b8r8   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-8b8r8   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-8b8r8   0/2     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-8b8r8   0/2     Running             0          2s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-8b8r8   1/2     Running             0          22s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-8b8r8   2/2     Running             0          25s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-8b8r8   2/2     Terminating         0          85s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-8b8r8   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-8b8r8   0/2     Terminating         0          100s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-8b8r8   0/2     Terminating         0          100s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-9l4lj   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-9l4lj   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-9l4lj   0/2     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-9l4lj   0/2     Running             0          2s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-deployment "mymodel-mymodel-0-complex-model" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:54:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14614" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"e9cf4432-5d53-4b81-96cc-9698215d8c8b"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:54:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14614" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"e9cf4432-5d53-4b81-96cc-9698215d8c8b"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:54:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14614" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"e9cf4432-5d53-4b81-96cc-9698215d8c8b"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:54:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14614" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"e9cf4432-5d53-4b81-96cc-9698215d8c8b"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:54:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14614" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"e9cf4432-5d53-4b81-96cc-9698215d8c8b"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:54:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14614" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"e9cf4432-5d53-4b81-96cc-9698215d8c8b"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:54:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14614" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"e9cf4432-5d53-4b81-96cc-9698215d8c8b"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:54:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14614" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"e9cf4432-5d53-4b81-96cc-9698215d8c8b"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:54:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14614" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"e9cf4432-5d53-4b81-96cc-9698215d8c8b"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:54:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14614" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"e9cf4432-5d53-4b81-96cc-9698215d8c8b"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update5-istio" deleted
namespace/test-rolling-update5-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:56:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14973" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"d05bffb6-9e5c-43ff-a29d-f30ab8da32e2"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:56:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14973" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"d05bffb6-9e5c-43ff-a29d-f30ab8da32e2"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:56:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14973" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"d05bffb6-9e5c-43ff-a29d-f30ab8da32e2"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:56:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14973" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"d05bffb6-9e5c-43ff-a29d-f30ab8da32e2"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:56:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14973" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"d05bffb6-9e5c-43ff-a29d-f30ab8da32e2"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:56:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14973" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"d05bffb6-9e5c-43ff-a29d-f30ab8da32e2"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:56:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14973" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"d05bffb6-9e5c-43ff-a29d-f30ab8da32e2"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:56:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14973" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"d05bffb6-9e5c-43ff-a29d-f30ab8da32e2"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:56:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14973" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"d05bffb6-9e5c-43ff-a29d-f30ab8da32e2"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:56:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"14973" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"d05bffb6-9e5c-43ff-a29d-f30ab8da32e2"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update5-istio" deleted
namespace/test-rolling-update5-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:57:32Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"0b2e0080-7563-4cc8-a0b7-7d4206715f99"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:57:32Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"0b2e0080-7563-4cc8-a0b7-7d4206715f99"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:57:32Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"0b2e0080-7563-4cc8-a0b7-7d4206715f99"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:57:32Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"0b2e0080-7563-4cc8-a0b7-7d4206715f99"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:57:32Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"0b2e0080-7563-4cc8-a0b7-7d4206715f99"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:57:32Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"0b2e0080-7563-4cc8-a0b7-7d4206715f99"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:57:32Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"0b2e0080-7563-4cc8-a0b7-7d4206715f99"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:57:32Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"0b2e0080-7563-4cc8-a0b7-7d4206715f99"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:57:32Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"0b2e0080-7563-4cc8-a0b7-7d4206715f99"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:57:32Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"0b2e0080-7563-4cc8-a0b7-7d4206715f99"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update5-istio" deleted
namespace/test-rolling-update5-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
9l4lj   1/2     Running             0          22s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-9l4lj   2/2     Running             0          24s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-9l4lj   2/2     Terminating         0          85s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-9l4lj   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-9l4lj   0/2     Terminating         0          89s


PODS UPDATE: test-rolling-update5-ambas    mymodel-mymodel-0-complex-model-588fcb6f47-9l4lj   0/2     Terminating         0          89s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-9l2j6   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-9l2j6   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-9l2j6   0/2     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-9l2j6   0/2     Running             0          1s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-9l2j6   1/2     Running             0          22s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-9l2j6   2/2     Running             0          22s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-9l2j6   2/2     Terminating         0          85s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-9l2j6   0/2     Terminating         0          87s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-9l2j6   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-9l2j6   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-9l2j6   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-sbrbf   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-sbrbf   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-sbrbf   0/2     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-sbrbf   0/2     Running             0          1s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-sbrbf   1/2     Running             0          24s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-sbrbf   2/2     Running             0          25s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-sbrbf   2/2     Terminating         0          85s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-sbrbf   0/2     Terminating         0          87s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-sbrbf   0/2     Terminating         0          87s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-sbrbf   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-sbrbf   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-z89kz   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-z89kz   0/2     Pending             0          0s


PODS UPDATE: test-rolldeployment "mymodel-mymodel-0-complex-model" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:59:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15665" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"738a5a67-a0a2-49cb-94b1-3fef38e1bd15"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:59:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15665" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"738a5a67-a0a2-49cb-94b1-3fef38e1bd15"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:59:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15665" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"738a5a67-a0a2-49cb-94b1-3fef38e1bd15"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:59:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15665" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"738a5a67-a0a2-49cb-94b1-3fef38e1bd15"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:59:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15665" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"738a5a67-a0a2-49cb-94b1-3fef38e1bd15"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:59:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15665" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"738a5a67-a0a2-49cb-94b1-3fef38e1bd15"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:59:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15665" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"738a5a67-a0a2-49cb-94b1-3fef38e1bd15"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:59:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15665" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"738a5a67-a0a2-49cb-94b1-3fef38e1bd15"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:59:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15665" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"738a5a67-a0a2-49cb-94b1-3fef38e1bd15"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T12:59:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"15665" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"738a5a67-a0a2-49cb-94b1-3fef38e1bd15"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update5-istio" deleted
namespace/test-rolling-update5-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T13:00:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"16026" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"a781a1c5-0ab7-48e8-891b-dfc2d1ab91a7"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T13:00:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"16026" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"a781a1c5-0ab7-48e8-891b-dfc2d1ab91a7"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T13:00:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"16026" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"a781a1c5-0ab7-48e8-891b-dfc2d1ab91a7"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T13:00:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"16026" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"a781a1c5-0ab7-48e8-891b-dfc2d1ab91a7"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T13:00:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"16026" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"a781a1c5-0ab7-48e8-891b-dfc2d1ab91a7"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T13:00:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"16026" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"a781a1c5-0ab7-48e8-891b-dfc2d1ab91a7"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T13:00:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"16026" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"a781a1c5-0ab7-48e8-891b-dfc2d1ab91a7"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T13:00:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"16026" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"a781a1c5-0ab7-48e8-891b-dfc2d1ab91a7"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T13:00:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"16026" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"a781a1c5-0ab7-48e8-891b-dfc2d1ab91a7"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":60},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]},\"traffic\":40}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":60},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"svcOrchSpec":{"env":[{"name":"SELDON_LOG_LEVEL","value":"DEBUG"}]},"traffic":40}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update5-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update5-istio\"},\"spec\":{\"annotations\":{\"seldon.io/ambassador-retries\":\"3\",\"seldon.io/istio-retries\":\"3\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"svcOrchSpec\":{\"env\":[{\"name\":\"SELDON_LOG_LEVEL\",\"value\":\"DEBUG\"}]}}]}}\n"] "creationTimestamp":"2021-01-19T13:00:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update5-istio" "resourceVersion":"16026" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update5-istio/seldondeployments/mymodel" "uid":"a781a1c5-0ab7-48e8-891b-dfc2d1ab91a7"] "spec":map["annotations":map["seldon.io/ambassador-retries":"3" "seldon.io/istio-retries":"3"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01' "svcOrchSpec":map["env":[map["name":"SELDON_LOG_LEVEL" "value":"DEBUG"]]]]]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update5-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update5-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update5-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update5-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update5-istio" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update6[ambas] namespace/test-rolling-update6-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:02:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16428" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"30b81e7e-fddd-46e5-8003-c2570adfecf8"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:02:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16428" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"30b81e7e-fddd-46e5-8003-c2570adfecf8"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:02:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16428" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"30b81e7e-fddd-46e5-8003-c2570adfecf8"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:02:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16428" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"30b81e7e-fddd-46e5-8003-c2570adfecf8"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:02:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16428" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"30b81e7e-fddd-46e5-8003-c2570adfecf8"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:02:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16428" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"30b81e7e-fddd-46e5-8003-c2570adfecf8"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:02:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16428" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"30b81e7e-fddd-46e5-8003-c2570adfecf8"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:02:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16428" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"30b81e7e-fddd-46e5-8003-c2570adfecf8"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:02:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16428" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"30b81e7e-fddd-46e5-8003-c2570adfecf8"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:02:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16428" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"30b81e7e-fddd-46e5-8003-c2570adfecf8"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update6-ambas" deleted
ing-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-z89kz   0/2     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-z89kz   0/2     Running             0          1s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-z89kz   1/2     Running             0          24s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-z89kz   2/2     Running             0          24s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-z89kz   2/2     Terminating         0          85s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-z89kz   0/2     Terminating         0          89s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-z89kz   0/2     Terminating         0          90s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-z89kz   0/2     Terminating         0          90s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-44wks   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-44wks   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-44wks   0/2     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-44wks   0/2     Running             0          2s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-44wks   1/2     Running             0          22s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-44wks   2/2     Running             0          23s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-44wks   2/2     Terminating         0          85s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-44wks   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-44wks   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-44wks   0/2     Terminating         0          91s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-44wks   0/2     Terminating         0          91s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-k8lgd   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-k8lgd   0/2     Pending             0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-k8lgd   0/2     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-k8lgd   0/2     Running             0          1s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-k8lgd   1/2     Running             0          21s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-k8lgd   2/2     Running             0          24s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-k8lgd   2/2     Terminating         0          84s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-k8lgd   0/2     Terminating         0          87s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-k8lgd   0/2     Terminating         0          88s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-k8lgd   0/2     Terminating         0          97s


PODS UPDATE: test-rolling-update5-istio    mymodel-mymodel-0-complex-model-6f985ffcb7-k8lgd   0/2namespace/test-rolling-update6-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:03:59Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16848" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"559f70e9-b17d-4376-b52e-9fed2273e791"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:03:59Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16848" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"559f70e9-b17d-4376-b52e-9fed2273e791"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:03:59Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16848" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"559f70e9-b17d-4376-b52e-9fed2273e791"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:03:59Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16848" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"559f70e9-b17d-4376-b52e-9fed2273e791"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:03:59Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16848" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"559f70e9-b17d-4376-b52e-9fed2273e791"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:03:59Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16848" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"559f70e9-b17d-4376-b52e-9fed2273e791"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:03:59Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16848" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"559f70e9-b17d-4376-b52e-9fed2273e791"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:03:59Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16848" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"559f70e9-b17d-4376-b52e-9fed2273e791"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:03:59Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16848" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"559f70e9-b17d-4376-b52e-9fed2273e791"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:03:59Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"16848" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"559f70e9-b17d-4376-b52e-9fed2273e791"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update6-ambas" deleted
namespace/test-rolling-update6-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
     Terminating         0          97s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-v7l87           0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-sppbj   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-v7l87           0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-sppbj   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-v7l87           0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-sppbj   0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-sppbj   0/1     Running             0          2s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-v7l87           0/1     Running             0          2s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-sppbj   1/1     Running             0          25s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-v7l87           1/1     Running             0          26s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-sppbj   1/1     Terminating         0          86s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-v7l87           1/1     Terminating         0          86s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-v7l87           0/1     Terminating         0          86s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-v7l87           0/1     Terminating         0          87s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-v7l87           0/1     Terminating         0          87s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-sppbj   0/1     Terminating         0          89s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-sppbj   0/1     Terminating         0          99s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-sppbj   0/1     Terminating         0          99s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-2dvcz           0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-bw286   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-bw286   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-2dvcz           0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-bw286   0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-2dvcz           0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-bw286   0/1     Running             0          1s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-2dvcz           0/1     Running             0          1s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-bw286   1/1     Running             0          20s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-2dvcz           1/1     Running             0          23s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-bw286   1/1     Terminating         0          85s


PODS UPDATE: test-rolling-update6-ambasdeployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:05:30Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17228" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"84f57dd1-0d2e-4111-8a4b-2eb14a1099e2"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:05:30Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17228" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"84f57dd1-0d2e-4111-8a4b-2eb14a1099e2"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:05:30Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17228" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"84f57dd1-0d2e-4111-8a4b-2eb14a1099e2"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:05:30Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17228" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"84f57dd1-0d2e-4111-8a4b-2eb14a1099e2"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:05:30Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17228" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"84f57dd1-0d2e-4111-8a4b-2eb14a1099e2"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:05:30Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17228" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"84f57dd1-0d2e-4111-8a4b-2eb14a1099e2"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:05:30Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17228" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"84f57dd1-0d2e-4111-8a4b-2eb14a1099e2"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:05:30Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17228" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"84f57dd1-0d2e-4111-8a4b-2eb14a1099e2"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:05:30Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17228" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"84f57dd1-0d2e-4111-8a4b-2eb14a1099e2"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:05:30Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17228" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"84f57dd1-0d2e-4111-8a4b-2eb14a1099e2"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update6-ambas" deleted
namespace/test-rolling-update6-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:07:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17657" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"fe90489c-ff50-4010-8afe-56e6dfd1528a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:07:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17657" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"fe90489c-ff50-4010-8afe-56e6dfd1528a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:07:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17657" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"fe90489c-ff50-4010-8afe-56e6dfd1528a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:07:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17657" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"fe90489c-ff50-4010-8afe-56e6dfd1528a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:07:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17657" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"fe90489c-ff50-4010-8afe-56e6dfd1528a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:07:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17657" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"fe90489c-ff50-4010-8afe-56e6dfd1528a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:07:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17657" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"fe90489c-ff50-4010-8afe-56e6dfd1528a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:07:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17657" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"fe90489c-ff50-4010-8afe-56e6dfd1528a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:07:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17657" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"fe90489c-ff50-4010-8afe-56e6dfd1528a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:07:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"17657" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"fe90489c-ff50-4010-8afe-56e6dfd1528a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update6-ambas" deleted
namespace/test-rolling-update6-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
    mymodel-mymodel-svc-orch-94589cdf4-2dvcz           1/1     Terminating         0          85s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-2dvcz           0/1     Terminating         0          85s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-2dvcz           0/1     Terminating         0          86s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-2dvcz           0/1     Terminating         0          86s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-bw286   0/1     Terminating         0          87s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-bw286   0/1     Terminating         0          88s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-bw286   0/1     Terminating         0          88s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-cz4br           0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-cz4br           0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-77m85   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-77m85   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-cz4br           0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-77m85   0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-cz4br           0/1     Running             0          1s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-77m85   0/1     Running             0          1s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-77m85   1/1     Running             0          20s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-cz4br           1/1     Running             0          21s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-77m85   1/1     Terminating         0          85s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-cz4br           1/1     Terminating         0          85s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-cz4br           0/1     Terminating         0          86s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-77m85   0/1     Terminating         0          88s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-cz4br           0/1     Terminating         0          93s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-cz4br           0/1     Terminating         0          93s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-77m85   0/1     Terminating         0          93s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-77m85   0/1     Terminating         0          93s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-8rbj4           0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-c5l2m   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-8rbj4           0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-c5l2m   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-8rbj4           0/1     ContainerCreatdeployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:08:57Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"18098" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"5e9ffa1d-510a-4cd3-b6cb-74475649c146"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:08:57Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"18098" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"5e9ffa1d-510a-4cd3-b6cb-74475649c146"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:08:57Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"18098" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"5e9ffa1d-510a-4cd3-b6cb-74475649c146"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:08:57Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"18098" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"5e9ffa1d-510a-4cd3-b6cb-74475649c146"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:08:57Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"18098" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"5e9ffa1d-510a-4cd3-b6cb-74475649c146"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:08:57Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"18098" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"5e9ffa1d-510a-4cd3-b6cb-74475649c146"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:08:57Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"18098" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"5e9ffa1d-510a-4cd3-b6cb-74475649c146"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:08:57Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"18098" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"5e9ffa1d-510a-4cd3-b6cb-74475649c146"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:08:57Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"18098" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"5e9ffa1d-510a-4cd3-b6cb-74475649c146"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:08:57Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-ambas" "resourceVersion":"18098" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-ambas/seldondeployments/mymodel" "uid":"5e9ffa1d-510a-4cd3-b6cb-74475649c146"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update6-ambas" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update6[istio] namespace/test-rolling-update6-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:10:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18496" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"e053247d-58f0-4eb2-90fc-1606f655375b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:10:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18496" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"e053247d-58f0-4eb2-90fc-1606f655375b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:10:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18496" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"e053247d-58f0-4eb2-90fc-1606f655375b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:10:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18496" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"e053247d-58f0-4eb2-90fc-1606f655375b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:10:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18496" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"e053247d-58f0-4eb2-90fc-1606f655375b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:10:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18496" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"e053247d-58f0-4eb2-90fc-1606f655375b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:10:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18496" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"e053247d-58f0-4eb2-90fc-1606f655375b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:10:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18496" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"e053247d-58f0-4eb2-90fc-1606f655375b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:10:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18496" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"e053247d-58f0-4eb2-90fc-1606f655375b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:10:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18496" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"e053247d-58f0-4eb2-90fc-1606f655375b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update6-istio" deleted
namespace/test-rolling-update6-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
ing   0          1s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-c5l2m   0/1     ContainerCreating   0          1s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-c5l2m   0/1     Running             0          2s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-8rbj4           0/1     Running             0          2s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-c5l2m   1/1     Running             0          21s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-8rbj4           1/1     Running             0          25s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-c5l2m   1/1     Terminating         0          86s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-8rbj4           1/1     Terminating         0          86s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-8rbj4           0/1     Terminating         0          87s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-c5l2m   0/1     Terminating         0          89s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-8rbj4           0/1     Terminating         0          91s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-8rbj4           0/1     Terminating         0          91s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-c5l2m   0/1     Terminating         0          101s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-c5l2m   0/1     Terminating         0          101s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-vmpgf           0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-dwgsd   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-vmpgf           0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-dwgsd   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-vmpgf           0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-dwgsd   0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-vmpgf           0/1     Running             0          1s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-dwgsd   0/1     Running             0          1s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-dwgsd   1/1     Running             0          24s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-vmpgf           1/1     Running             0          26s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-dwgsd   1/1     Terminating         0          90s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-vmpgf           1/1     Terminating         0          90s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-vmpgf           0/1     Terminating         0          91s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-dwgsd   0/1     Terminating         0          92s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-vmpgf           0/1     Terminating         0          92s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-svc-orch-94589cdf4-vmpgf           0/1     Terminating         0          92s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mdeployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:12:21Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18923" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"34d9108b-5b00-4e09-b61b-8a0cd127e221"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:12:21Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18923" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"34d9108b-5b00-4e09-b61b-8a0cd127e221"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:12:21Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18923" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"34d9108b-5b00-4e09-b61b-8a0cd127e221"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:12:21Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18923" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"34d9108b-5b00-4e09-b61b-8a0cd127e221"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:12:21Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18923" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"34d9108b-5b00-4e09-b61b-8a0cd127e221"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:12:21Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18923" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"34d9108b-5b00-4e09-b61b-8a0cd127e221"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:12:21Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18923" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"34d9108b-5b00-4e09-b61b-8a0cd127e221"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:12:21Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18923" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"34d9108b-5b00-4e09-b61b-8a0cd127e221"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:12:21Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18923" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"34d9108b-5b00-4e09-b61b-8a0cd127e221"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:12:21Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"18923" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"34d9108b-5b00-4e09-b61b-8a0cd127e221"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update6-istio" deleted
namespace/test-rolling-update6-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:14:04Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19343" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"0c7af2be-d083-4f40-b904-4ad4e9ae607f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:14:04Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19343" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"0c7af2be-d083-4f40-b904-4ad4e9ae607f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:14:04Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19343" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"0c7af2be-d083-4f40-b904-4ad4e9ae607f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:14:04Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19343" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"0c7af2be-d083-4f40-b904-4ad4e9ae607f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:14:04Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19343" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"0c7af2be-d083-4f40-b904-4ad4e9ae607f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:14:04Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19343" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"0c7af2be-d083-4f40-b904-4ad4e9ae607f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:14:04Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19343" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"0c7af2be-d083-4f40-b904-4ad4e9ae607f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:14:04Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19343" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"0c7af2be-d083-4f40-b904-4ad4e9ae607f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:14:04Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19343" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"0c7af2be-d083-4f40-b904-4ad4e9ae607f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:14:04Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19343" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"0c7af2be-d083-4f40-b904-4ad4e9ae607f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update6-istio" deleted
ymodel-0-complex-model-86d58c6879-dwgsd   0/1     Terminating         0          93s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-dwgsd   0/1     Terminating         0          96s


PODS UPDATE: test-rolling-update6-ambas    mymodel-mymodel-0-complex-model-86d58c6879-dwgsd   0/1     Terminating         0          96s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-z65xl          0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-z65xl          0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-h5fpt   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-h5fpt   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-z65xl          0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-h5fpt   0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-z65xl          0/1     Running             0          2s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-h5fpt   0/1     Running             0          2s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-h5fpt   1/1     Running             0          26s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-z65xl          1/1     Running             0          26s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-h5fpt   1/1     Terminating         0          91s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-z65xl          1/1     Terminating         0          91s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-z65xl          0/1     Terminating         0          92s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-z65xl          0/1     Terminating         0          93s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-h5fpt   0/1     Terminating         0          94s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-z65xl          0/1     Terminating         0          100s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-z65xl          0/1     Terminating         0          100s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-h5fpt   0/1     Terminating         0          100s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-h5fpt   0/1     Terminating         0          100s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-zrvcq          0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-zsqlk   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-zrvcq          0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-zsqlk   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-zrvcq          0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-zsqlk   0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-zsqlk   0/1     Running             0          1s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-zrvcq          0/1     Running             0     namespace/test-rolling-update6-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:15:43Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19751" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"a4fc5682-8f6f-4874-92da-af68207bf3b6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:15:43Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19751" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"a4fc5682-8f6f-4874-92da-af68207bf3b6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:15:43Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19751" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"a4fc5682-8f6f-4874-92da-af68207bf3b6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:15:43Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19751" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"a4fc5682-8f6f-4874-92da-af68207bf3b6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:15:43Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19751" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"a4fc5682-8f6f-4874-92da-af68207bf3b6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:15:43Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19751" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"a4fc5682-8f6f-4874-92da-af68207bf3b6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:15:43Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19751" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"a4fc5682-8f6f-4874-92da-af68207bf3b6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:15:43Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19751" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"a4fc5682-8f6f-4874-92da-af68207bf3b6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:15:43Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19751" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"a4fc5682-8f6f-4874-92da-af68207bf3b6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:15:43Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"19751" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"a4fc5682-8f6f-4874-92da-af68207bf3b6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update6-istio" deleted
namespace/test-rolling-update6-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:17:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"20169" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"f66b7b67-2a36-4d8b-8811-df1925d931da"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:17:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"20169" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"f66b7b67-2a36-4d8b-8811-df1925d931da"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:17:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"20169" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"f66b7b67-2a36-4d8b-8811-df1925d931da"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:17:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"20169" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"f66b7b67-2a36-4d8b-8811-df1925d931da"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:17:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"20169" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"f66b7b67-2a36-4d8b-8811-df1925d931da"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:17:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"20169" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"f66b7b67-2a36-4d8b-8811-df1925d931da"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
     1s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-zsqlk   1/1     Running             0          21s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-zrvcq          1/1     Running             0          25s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-zsqlk   1/1     Terminating         0          86s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-zrvcq          1/1     Terminating         0          86s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-zrvcq          0/1     Terminating         0          86s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-zsqlk   0/1     Terminating         0          88s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-zsqlk   0/1     Terminating         0          89s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-zsqlk   0/1     Terminating         0          92s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-zsqlk   0/1     Terminating         0          92s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-zrvcq          0/1     Terminating         0          92s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-zrvcq          0/1     Terminating         0          92s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-fk7qk          0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-96n5z   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-fk7qk          0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-96n5z   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-fk7qk          0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-96n5z   0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-fk7qk          0/1     Running             0          1s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-96n5z   0/1     Running             0          1s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-96n5z   1/1     Running             0          25s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-fk7qk          1/1     Running             0          28s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-96n5z   1/1     Terminating         0          90s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-fk7qk          1/1     Terminating         0          90s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-fk7qk          0/1     Terminating         0          91s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-fk7qk          0/1     Terminating         0          92s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-fk7qk          0/1     Terminating         0          92s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-96n5z   0/1     Terminating         0          93s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-96n5z   0/1     Terminating         0          99s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-96n5z   0/1     Terminating         0          99s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-lp2m9          0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-9zxgz   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-lp2m9          0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-9zxgz   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-lp2m9          0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-9zxgz   0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-lp2m9          0/1     Running             0          2s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-9zxgz   0/1     Running             0          2s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-9zxgz   1/1     Running             0          25s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-lp2m9          1/1     Running             0          29s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-9zxgz   1/1     Terminating         0          91s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-lp2m9          1/1     Terminating         0          91s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-lp2m9          0/1     Terminating         0          92s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-lp2m9          0/1     Terminating         0          93s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-9zxgz   0/1     Terminating         0          94s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-lp2m9          0/1     Terminating         0          100s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-lp2m9          0/1     Terminating         0          100s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-9zxgz   0/1     Terminating         0          100s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-9zxgz   0/1     Terminating         0          100s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-8l4tt          0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-mllm9   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-8l4tt          0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-mllm9   0/1     Pending             0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-8l4tt          0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-mllm9   0/1     ContainerCreating   0          0s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-mllm9   0/1     Running             0          1s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-8l4tt          0/1     Running             0          1s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-0-complex-model-86d58c6879-mllm9   1/1     Running             0          24s


PODS UPDATE: test-rolling-update6-istio    mymodel-mymodel-svc-orch-6ccf8fc5d5-8l4tt          1/1     Running             0          25s

Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:17:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"20169" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"f66b7b67-2a36-4d8b-8811-df1925d931da"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:17:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"20169" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"f66b7b67-2a36-4d8b-8811-df1925d931da"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:17:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"20169" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"f66b7b67-2a36-4d8b-8811-df1925d931da"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update6-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update6-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:17:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update6-istio" "resourceVersion":"20169" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update6-istio/seldondeployments/mymodel" "uid":"f66b7b67-2a36-4d8b-8811-df1925d931da"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update6-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update6-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update6-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update6-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph2svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update6-istio" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update7[ambas] namespace/test-rolling-update7-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:19:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"20587" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"1b9f28e4-171e-4881-b507-b3e6a476dbe1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:19:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"20587" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"1b9f28e4-171e-4881-b507-b3e6a476dbe1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:19:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"20587" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"1b9f28e4-171e-4881-b507-b3e6a476dbe1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:19:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"20587" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"1b9f28e4-171e-4881-b507-b3e6a476dbe1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:19:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"20587" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"1b9f28e4-171e-4881-b507-b3e6a476dbe1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:19:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"20587" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"1b9f28e4-171e-4881-b507-b3e6a476dbe1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:19:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"20587" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"1b9f28e4-171e-4881-b507-b3e6a476dbe1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:19:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"20587" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"1b9f28e4-171e-4881-b507-b3e6a476dbe1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:19:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"20587" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"1b9f28e4-171e-4881-b507-b3e6a476dbe1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:19:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"20587" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"1b9f28e4-171e-4881-b507-b3e6a476dbe1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update7-ambas" deleted
namespace/test-rolling-update7-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:20:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21019" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fe3f06c2-e221-4f84-be42-0205f186a2ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:20:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21019" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fe3f06c2-e221-4f84-be42-0205f186a2ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:20:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21019" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fe3f06c2-e221-4f84-be42-0205f186a2ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:20:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21019" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fe3f06c2-e221-4f84-be42-0205f186a2ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:20:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21019" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fe3f06c2-e221-4f84-be42-0205f186a2ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:20:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21019" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fe3f06c2-e221-4f84-be42-0205f186a2ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:20:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21019" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fe3f06c2-e221-4f84-be42-0205f186a2ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:20:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21019" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fe3f06c2-e221-4f84-be42-0205f186a2ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:20:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21019" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fe3f06c2-e221-4f84-be42-0205f186a2ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:20:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21019" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fe3f06c2-e221-4f84-be42-0205f186a2ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update7-ambas" deleted
namespace/test-rolling-update7-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:22:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"6494f72c-a6c6-4211-821c-045c3207cc4f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:22:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"6494f72c-a6c6-4211-821c-045c3207cc4f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:22:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"6494f72c-a6c6-4211-821c-045c3207cc4f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:22:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"6494f72c-a6c6-4211-821c-045c3207cc4f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:22:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"6494f72c-a6c6-4211-821c-045c3207cc4f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:22:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"6494f72c-a6c6-4211-821c-045c3207cc4f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:22:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"6494f72c-a6c6-4211-821c-045c3207cc4f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:22:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"6494f72c-a6c6-4211-821c-045c3207cc4f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:22:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"6494f72c-a6c6-4211-821c-045c3207cc4f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:22:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"6494f72c-a6c6-4211-821c-045c3207cc4f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update7-ambas" deleted
namespace/test-rolling-update7-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:24:17Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21844" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"ddbe89d2-5dd4-4391-9fe4-004737d24b9f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:24:17Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21844" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"ddbe89d2-5dd4-4391-9fe4-004737d24b9f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:24:17Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21844" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"ddbe89d2-5dd4-4391-9fe4-004737d24b9f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:24:17Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21844" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"ddbe89d2-5dd4-4391-9fe4-004737d24b9f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:24:17Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21844" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"ddbe89d2-5dd4-4391-9fe4-004737d24b9f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:24:17Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21844" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"ddbe89d2-5dd4-4391-9fe4-004737d24b9f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:24:17Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21844" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"ddbe89d2-5dd4-4391-9fe4-004737d24b9f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:24:17Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21844" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"ddbe89d2-5dd4-4391-9fe4-004737d24b9f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:24:17Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21844" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"ddbe89d2-5dd4-4391-9fe4-004737d24b9f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:24:17Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"21844" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"ddbe89d2-5dd4-4391-9fe4-004737d24b9f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update7-ambas" deleted
namespace/test-rolling-update7-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:25:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"22238" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fd66868f-e28f-4322-b5b6-51ca1ef0874d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:25:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"22238" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fd66868f-e28f-4322-b5b6-51ca1ef0874d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:25:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"22238" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fd66868f-e28f-4322-b5b6-51ca1ef0874d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:25:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"22238" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fd66868f-e28f-4322-b5b6-51ca1ef0874d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:25:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"22238" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fd66868f-e28f-4322-b5b6-51ca1ef0874d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:25:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"22238" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fd66868f-e28f-4322-b5b6-51ca1ef0874d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:25:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"22238" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fd66868f-e28f-4322-b5b6-51ca1ef0874d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:25:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"22238" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fd66868f-e28f-4322-b5b6-51ca1ef0874d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:25:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"22238" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fd66868f-e28f-4322-b5b6-51ca1ef0874d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:25:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-ambas" "resourceVersion":"22238" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-ambas/seldondeployments/mymodel" "uid":"fd66868f-e28f-4322-b5b6-51ca1ef0874d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update7-ambas" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update7[istio] namespace/test-rolling-update7-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:27:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"22672" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"383f34ac-6222-4507-9357-5fc1ab816883"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:27:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"22672" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"383f34ac-6222-4507-9357-5fc1ab816883"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:27:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"22672" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"383f34ac-6222-4507-9357-5fc1ab816883"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:27:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"22672" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"383f34ac-6222-4507-9357-5fc1ab816883"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:27:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"22672" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"383f34ac-6222-4507-9357-5fc1ab816883"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:27:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"22672" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"383f34ac-6222-4507-9357-5fc1ab816883"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:27:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"22672" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"383f34ac-6222-4507-9357-5fc1ab816883"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:27:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"22672" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"383f34ac-6222-4507-9357-5fc1ab816883"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:27:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"22672" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"383f34ac-6222-4507-9357-5fc1ab816883"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:27:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"22672" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"383f34ac-6222-4507-9357-5fc1ab816883"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update7-istio" deleted
namespace/test-rolling-update7-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:29:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23051" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"3f3c58f4-4cb1-4c81-89af-bb84ffcfd4f0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:29:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23051" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"3f3c58f4-4cb1-4c81-89af-bb84ffcfd4f0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:29:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23051" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"3f3c58f4-4cb1-4c81-89af-bb84ffcfd4f0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:29:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23051" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"3f3c58f4-4cb1-4c81-89af-bb84ffcfd4f0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:29:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23051" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"3f3c58f4-4cb1-4c81-89af-bb84ffcfd4f0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:29:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23051" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"3f3c58f4-4cb1-4c81-89af-bb84ffcfd4f0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:29:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23051" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"3f3c58f4-4cb1-4c81-89af-bb84ffcfd4f0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:29:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23051" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"3f3c58f4-4cb1-4c81-89af-bb84ffcfd4f0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:29:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23051" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"3f3c58f4-4cb1-4c81-89af-bb84ffcfd4f0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:29:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23051" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"3f3c58f4-4cb1-4c81-89af-bb84ffcfd4f0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update7-istio" deleted
namespace/test-rolling-update7-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:30:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23478" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"6e8b01c5-5174-449e-956c-7a2c6beb6dde"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:30:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23478" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"6e8b01c5-5174-449e-956c-7a2c6beb6dde"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:30:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23478" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"6e8b01c5-5174-449e-956c-7a2c6beb6dde"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:30:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23478" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"6e8b01c5-5174-449e-956c-7a2c6beb6dde"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:30:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23478" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"6e8b01c5-5174-449e-956c-7a2c6beb6dde"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:30:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23478" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"6e8b01c5-5174-449e-956c-7a2c6beb6dde"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:30:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23478" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"6e8b01c5-5174-449e-956c-7a2c6beb6dde"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:30:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23478" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"6e8b01c5-5174-449e-956c-7a2c6beb6dde"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:30:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23478" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"6e8b01c5-5174-449e-956c-7a2c6beb6dde"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:30:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23478" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"6e8b01c5-5174-449e-956c-7a2c6beb6dde"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update7-istio" deleted
namespace/test-rolling-update7-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:32:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23857" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"ade6dd57-a2ac-4b3c-97d1-fd055566f9ce"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:32:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23857" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"ade6dd57-a2ac-4b3c-97d1-fd055566f9ce"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:32:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23857" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"ade6dd57-a2ac-4b3c-97d1-fd055566f9ce"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:32:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23857" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"ade6dd57-a2ac-4b3c-97d1-fd055566f9ce"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:32:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23857" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"ade6dd57-a2ac-4b3c-97d1-fd055566f9ce"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:32:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23857" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"ade6dd57-a2ac-4b3c-97d1-fd055566f9ce"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:32:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23857" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"ade6dd57-a2ac-4b3c-97d1-fd055566f9ce"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:32:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23857" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"ade6dd57-a2ac-4b3c-97d1-fd055566f9ce"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:32:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23857" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"ade6dd57-a2ac-4b3c-97d1-fd055566f9ce"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:32:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"23857" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"ade6dd57-a2ac-4b3c-97d1-fd055566f9ce"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update7-istio" deleted
namespace/test-rolling-update7-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:34:11Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"24273" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"38642dd5-6ce4-4af4-b606-18cb020b1ca5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:34:11Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"24273" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"38642dd5-6ce4-4af4-b606-18cb020b1ca5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:34:11Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"24273" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"38642dd5-6ce4-4af4-b606-18cb020b1ca5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:34:11Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"24273" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"38642dd5-6ce4-4af4-b606-18cb020b1ca5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:34:11Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"24273" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"38642dd5-6ce4-4af4-b606-18cb020b1ca5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:34:11Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"24273" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"38642dd5-6ce4-4af4-b606-18cb020b1ca5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:34:11Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"24273" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"38642dd5-6ce4-4af4-b606-18cb020b1ca5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:34:11Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"24273" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"38642dd5-6ce4-4af4-b606-18cb020b1ca5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:34:11Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"24273" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"38642dd5-6ce4-4af4-b606-18cb020b1ca5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model2\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model2","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update7-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update7-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:34:11Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update7-istio" "resourceVersion":"24273" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update7-istio/seldondeployments/mymodel" "uid":"38642dd5-6ce4-4af4-b606-18cb020b1ca5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update7-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update7-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update7-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update7-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph3svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update7-istio" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update8[ambas] namespace/test-rolling-update8-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:35:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"24698" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"1f5f47df-6820-4f2f-86e6-7e97d7a0cb47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:35:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"24698" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"1f5f47df-6820-4f2f-86e6-7e97d7a0cb47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:35:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"24698" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"1f5f47df-6820-4f2f-86e6-7e97d7a0cb47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:35:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"24698" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"1f5f47df-6820-4f2f-86e6-7e97d7a0cb47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:35:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"24698" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"1f5f47df-6820-4f2f-86e6-7e97d7a0cb47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:35:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"24698" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"1f5f47df-6820-4f2f-86e6-7e97d7a0cb47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:35:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"24698" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"1f5f47df-6820-4f2f-86e6-7e97d7a0cb47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:35:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"24698" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"1f5f47df-6820-4f2f-86e6-7e97d7a0cb47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:35:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"24698" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"1f5f47df-6820-4f2f-86e6-7e97d7a0cb47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:35:53Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"24698" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"1f5f47df-6820-4f2f-86e6-7e97d7a0cb47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update8-ambas" deleted
namespace/test-rolling-update8-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:37:38Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25120" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a373791c-f944-4a2a-9d95-58d9a4dcb381"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:37:38Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25120" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a373791c-f944-4a2a-9d95-58d9a4dcb381"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:37:38Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25120" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a373791c-f944-4a2a-9d95-58d9a4dcb381"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:37:38Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25120" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a373791c-f944-4a2a-9d95-58d9a4dcb381"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:37:38Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25120" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a373791c-f944-4a2a-9d95-58d9a4dcb381"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:37:38Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25120" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a373791c-f944-4a2a-9d95-58d9a4dcb381"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:37:38Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25120" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a373791c-f944-4a2a-9d95-58d9a4dcb381"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:37:38Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25120" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a373791c-f944-4a2a-9d95-58d9a4dcb381"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:37:38Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25120" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a373791c-f944-4a2a-9d95-58d9a4dcb381"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:37:38Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25120" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a373791c-f944-4a2a-9d95-58d9a4dcb381"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update8-ambas" deleted
namespace/test-rolling-update8-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:39:20Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25540" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a499e04e-fcd5-4e83-b123-af37f289e284"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:39:20Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25540" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a499e04e-fcd5-4e83-b123-af37f289e284"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:39:20Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25540" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a499e04e-fcd5-4e83-b123-af37f289e284"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:39:20Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25540" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a499e04e-fcd5-4e83-b123-af37f289e284"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:39:20Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25540" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a499e04e-fcd5-4e83-b123-af37f289e284"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:39:20Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25540" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a499e04e-fcd5-4e83-b123-af37f289e284"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:39:20Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25540" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a499e04e-fcd5-4e83-b123-af37f289e284"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:39:20Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25540" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a499e04e-fcd5-4e83-b123-af37f289e284"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:39:20Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25540" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a499e04e-fcd5-4e83-b123-af37f289e284"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:39:20Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25540" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a499e04e-fcd5-4e83-b123-af37f289e284"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update8-ambas" deleted
namespace/test-rolling-update8-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:41:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25953" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"7f452712-9f05-4ea5-9424-50b6d8dc9acf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:41:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25953" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"7f452712-9f05-4ea5-9424-50b6d8dc9acf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:41:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25953" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"7f452712-9f05-4ea5-9424-50b6d8dc9acf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:41:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25953" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"7f452712-9f05-4ea5-9424-50b6d8dc9acf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:41:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25953" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"7f452712-9f05-4ea5-9424-50b6d8dc9acf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:41:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25953" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"7f452712-9f05-4ea5-9424-50b6d8dc9acf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:41:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25953" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"7f452712-9f05-4ea5-9424-50b6d8dc9acf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:41:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25953" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"7f452712-9f05-4ea5-9424-50b6d8dc9acf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:41:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25953" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"7f452712-9f05-4ea5-9424-50b6d8dc9acf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:41:03Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"25953" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"7f452712-9f05-4ea5-9424-50b6d8dc9acf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update8-ambas" deleted
namespace/test-rolling-update8-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:42:47Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"26389" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a35be765-0560-4274-a63f-42c046656833"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:42:47Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"26389" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a35be765-0560-4274-a63f-42c046656833"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:42:47Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"26389" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a35be765-0560-4274-a63f-42c046656833"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:42:47Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"26389" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a35be765-0560-4274-a63f-42c046656833"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:42:47Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"26389" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a35be765-0560-4274-a63f-42c046656833"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:42:47Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"26389" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a35be765-0560-4274-a63f-42c046656833"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:42:47Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"26389" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a35be765-0560-4274-a63f-42c046656833"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:42:47Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"26389" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a35be765-0560-4274-a63f-42c046656833"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:42:47Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"26389" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a35be765-0560-4274-a63f-42c046656833"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:42:47Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-ambas" "resourceVersion":"26389" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-ambas/seldondeployments/mymodel" "uid":"a35be765-0560-4274-a63f-42c046656833"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update8-ambas" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update8[istio] namespace/test-rolling-update8-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:44:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"26822" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bd0ac36d-65c6-468f-9cec-74abc7a4eb6f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:44:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"26822" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bd0ac36d-65c6-468f-9cec-74abc7a4eb6f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:44:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"26822" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bd0ac36d-65c6-468f-9cec-74abc7a4eb6f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:44:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"26822" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bd0ac36d-65c6-468f-9cec-74abc7a4eb6f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:44:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"26822" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bd0ac36d-65c6-468f-9cec-74abc7a4eb6f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:44:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"26822" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bd0ac36d-65c6-468f-9cec-74abc7a4eb6f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:44:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"26822" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bd0ac36d-65c6-468f-9cec-74abc7a4eb6f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:44:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"26822" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bd0ac36d-65c6-468f-9cec-74abc7a4eb6f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:44:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"26822" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bd0ac36d-65c6-468f-9cec-74abc7a4eb6f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:44:34Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"26822" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bd0ac36d-65c6-468f-9cec-74abc7a4eb6f"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update8-istio" deleted
namespace/test-rolling-update8-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:46:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27257" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"883e65d3-a243-42e7-ac6c-e845829c9266"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:46:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27257" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"883e65d3-a243-42e7-ac6c-e845829c9266"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:46:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27257" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"883e65d3-a243-42e7-ac6c-e845829c9266"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:46:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27257" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"883e65d3-a243-42e7-ac6c-e845829c9266"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:46:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27257" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"883e65d3-a243-42e7-ac6c-e845829c9266"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:46:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27257" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"883e65d3-a243-42e7-ac6c-e845829c9266"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:46:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27257" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"883e65d3-a243-42e7-ac6c-e845829c9266"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:46:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27257" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"883e65d3-a243-42e7-ac6c-e845829c9266"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:46:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27257" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"883e65d3-a243-42e7-ac6c-e845829c9266"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:46:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27257" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"883e65d3-a243-42e7-ac6c-e845829c9266"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update8-istio" deleted
namespace/test-rolling-update8-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:47:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27647" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"a9d09092-8184-4e06-a01a-765b21e604f5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:47:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27647" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"a9d09092-8184-4e06-a01a-765b21e604f5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:47:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27647" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"a9d09092-8184-4e06-a01a-765b21e604f5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:47:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27647" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"a9d09092-8184-4e06-a01a-765b21e604f5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:47:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27647" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"a9d09092-8184-4e06-a01a-765b21e604f5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:47:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27647" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"a9d09092-8184-4e06-a01a-765b21e604f5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:47:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27647" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"a9d09092-8184-4e06-a01a-765b21e604f5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:47:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27647" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"a9d09092-8184-4e06-a01a-765b21e604f5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:47:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27647" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"a9d09092-8184-4e06-a01a-765b21e604f5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:47:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"27647" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"a9d09092-8184-4e06-a01a-765b21e604f5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update8-istio" deleted
namespace/test-rolling-update8-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:49:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28038" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"17b2b50d-c966-4326-85c9-7413285b1c87"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:49:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28038" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"17b2b50d-c966-4326-85c9-7413285b1c87"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:49:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28038" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"17b2b50d-c966-4326-85c9-7413285b1c87"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:49:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28038" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"17b2b50d-c966-4326-85c9-7413285b1c87"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:49:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28038" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"17b2b50d-c966-4326-85c9-7413285b1c87"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:49:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28038" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"17b2b50d-c966-4326-85c9-7413285b1c87"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:49:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28038" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"17b2b50d-c966-4326-85c9-7413285b1c87"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:49:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28038" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"17b2b50d-c966-4326-85c9-7413285b1c87"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:49:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28038" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"17b2b50d-c966-4326-85c9-7413285b1c87"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:49:29Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28038" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"17b2b50d-c966-4326-85c9-7413285b1c87"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update8-istio" deleted
namespace/test-rolling-update8-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:51:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bb404001-7b62-43ed-ac7d-0fa4c8d05e13"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:51:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bb404001-7b62-43ed-ac7d-0fa4c8d05e13"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:51:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bb404001-7b62-43ed-ac7d-0fa4c8d05e13"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:51:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bb404001-7b62-43ed-ac7d-0fa4c8d05e13"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:51:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bb404001-7b62-43ed-ac7d-0fa4c8d05e13"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:51:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bb404001-7b62-43ed-ac7d-0fa4c8d05e13"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:51:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bb404001-7b62-43ed-ac7d-0fa4c8d05e13"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:51:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bb404001-7b62-43ed-ac7d-0fa4c8d05e13"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:51:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bb404001-7b62-43ed-ac7d-0fa4c8d05e13"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"2Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"2Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update8-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update8-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:51:12Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update8-istio" "resourceVersion":"28447" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update8-istio/seldondeployments/mymodel" "uid":"bb404001-7b62-43ed-ac7d-0fa4c8d05e13"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update8-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update8-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update8-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update8-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph4svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update8-istio" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update9[ambas] namespace/test-rolling-update9-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:52:54Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"28854" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"403ea5f1-53b9-4fe8-92cd-ef181f0c8e15"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:52:54Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"28854" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"403ea5f1-53b9-4fe8-92cd-ef181f0c8e15"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:52:54Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"28854" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"403ea5f1-53b9-4fe8-92cd-ef181f0c8e15"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:52:54Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"28854" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"403ea5f1-53b9-4fe8-92cd-ef181f0c8e15"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:52:54Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"28854" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"403ea5f1-53b9-4fe8-92cd-ef181f0c8e15"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:52:54Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"28854" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"403ea5f1-53b9-4fe8-92cd-ef181f0c8e15"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:52:54Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"28854" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"403ea5f1-53b9-4fe8-92cd-ef181f0c8e15"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:52:54Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"28854" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"403ea5f1-53b9-4fe8-92cd-ef181f0c8e15"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:52:54Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"28854" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"403ea5f1-53b9-4fe8-92cd-ef181f0c8e15"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:52:54Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"28854" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"403ea5f1-53b9-4fe8-92cd-ef181f0c8e15"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update9-ambas" deleted
namespace/test-rolling-update9-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:54:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29291" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"1d85dd9b-8c5b-4b7c-9234-c2d377ea4ce0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:54:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29291" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"1d85dd9b-8c5b-4b7c-9234-c2d377ea4ce0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:54:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29291" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"1d85dd9b-8c5b-4b7c-9234-c2d377ea4ce0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:54:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29291" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"1d85dd9b-8c5b-4b7c-9234-c2d377ea4ce0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:54:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29291" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"1d85dd9b-8c5b-4b7c-9234-c2d377ea4ce0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:54:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29291" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"1d85dd9b-8c5b-4b7c-9234-c2d377ea4ce0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:54:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29291" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"1d85dd9b-8c5b-4b7c-9234-c2d377ea4ce0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:54:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29291" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"1d85dd9b-8c5b-4b7c-9234-c2d377ea4ce0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:54:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29291" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"1d85dd9b-8c5b-4b7c-9234-c2d377ea4ce0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:54:36Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29291" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"1d85dd9b-8c5b-4b7c-9234-c2d377ea4ce0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update9-ambas" deleted
namespace/test-rolling-update9-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:56:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29673" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"6fcc8e47-701d-4e9b-9ceb-e0ffd3ba2ab0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:56:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29673" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"6fcc8e47-701d-4e9b-9ceb-e0ffd3ba2ab0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:56:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29673" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"6fcc8e47-701d-4e9b-9ceb-e0ffd3ba2ab0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:56:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29673" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"6fcc8e47-701d-4e9b-9ceb-e0ffd3ba2ab0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:56:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29673" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"6fcc8e47-701d-4e9b-9ceb-e0ffd3ba2ab0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:56:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29673" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"6fcc8e47-701d-4e9b-9ceb-e0ffd3ba2ab0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:56:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29673" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"6fcc8e47-701d-4e9b-9ceb-e0ffd3ba2ab0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:56:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29673" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"6fcc8e47-701d-4e9b-9ceb-e0ffd3ba2ab0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:56:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29673" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"6fcc8e47-701d-4e9b-9ceb-e0ffd3ba2ab0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:56:13Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"29673" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"6fcc8e47-701d-4e9b-9ceb-e0ffd3ba2ab0"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update9-ambas" deleted
namespace/test-rolling-update9-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:57:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30092" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"fadc9cbb-5d21-4b94-bf36-64dd2672f7f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:57:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30092" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"fadc9cbb-5d21-4b94-bf36-64dd2672f7f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:57:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30092" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"fadc9cbb-5d21-4b94-bf36-64dd2672f7f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:57:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30092" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"fadc9cbb-5d21-4b94-bf36-64dd2672f7f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:57:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30092" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"fadc9cbb-5d21-4b94-bf36-64dd2672f7f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:57:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30092" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"fadc9cbb-5d21-4b94-bf36-64dd2672f7f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:57:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30092" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"fadc9cbb-5d21-4b94-bf36-64dd2672f7f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:57:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30092" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"fadc9cbb-5d21-4b94-bf36-64dd2672f7f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:57:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30092" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"fadc9cbb-5d21-4b94-bf36-64dd2672f7f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:57:58Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30092" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"fadc9cbb-5d21-4b94-bf36-64dd2672f7f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update9-ambas" deleted
namespace/test-rolling-update9-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:59:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30508" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"734d58e2-d426-4cae-a2f1-d583e848c0a1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:59:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30508" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"734d58e2-d426-4cae-a2f1-d583e848c0a1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:59:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30508" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"734d58e2-d426-4cae-a2f1-d583e848c0a1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:59:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30508" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"734d58e2-d426-4cae-a2f1-d583e848c0a1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:59:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30508" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"734d58e2-d426-4cae-a2f1-d583e848c0a1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:59:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30508" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"734d58e2-d426-4cae-a2f1-d583e848c0a1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:59:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30508" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"734d58e2-d426-4cae-a2f1-d583e848c0a1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:59:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30508" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"734d58e2-d426-4cae-a2f1-d583e848c0a1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:59:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30508" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"734d58e2-d426-4cae-a2f1-d583e848c0a1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T13:59:40Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-ambas" "resourceVersion":"30508" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-ambas/seldondeployments/mymodel" "uid":"734d58e2-d426-4cae-a2f1-d583e848c0a1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update9-ambas" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update9[istio] namespace/test-rolling-update9-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:01:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"30919" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"98f2f1b1-c0c2-44e1-8643-31234cde31cf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:01:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"30919" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"98f2f1b1-c0c2-44e1-8643-31234cde31cf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:01:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"30919" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"98f2f1b1-c0c2-44e1-8643-31234cde31cf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:01:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"30919" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"98f2f1b1-c0c2-44e1-8643-31234cde31cf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:01:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"30919" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"98f2f1b1-c0c2-44e1-8643-31234cde31cf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:01:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"30919" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"98f2f1b1-c0c2-44e1-8643-31234cde31cf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:01:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"30919" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"98f2f1b1-c0c2-44e1-8643-31234cde31cf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:01:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"30919" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"98f2f1b1-c0c2-44e1-8643-31234cde31cf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:01:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"30919" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"98f2f1b1-c0c2-44e1-8643-31234cde31cf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:01:22Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"30919" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"98f2f1b1-c0c2-44e1-8643-31234cde31cf"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update9-istio" deleted
namespace/test-rolling-update9-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:03:06Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31353" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"a6afddcb-447d-40f0-92b5-eb8e9f8a2ce1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:03:06Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31353" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"a6afddcb-447d-40f0-92b5-eb8e9f8a2ce1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:03:06Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31353" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"a6afddcb-447d-40f0-92b5-eb8e9f8a2ce1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:03:06Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31353" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"a6afddcb-447d-40f0-92b5-eb8e9f8a2ce1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:03:06Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31353" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"a6afddcb-447d-40f0-92b5-eb8e9f8a2ce1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:03:06Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31353" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"a6afddcb-447d-40f0-92b5-eb8e9f8a2ce1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:03:06Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31353" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"a6afddcb-447d-40f0-92b5-eb8e9f8a2ce1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:03:06Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31353" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"a6afddcb-447d-40f0-92b5-eb8e9f8a2ce1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:03:06Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31353" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"a6afddcb-447d-40f0-92b5-eb8e9f8a2ce1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:03:06Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31353" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"a6afddcb-447d-40f0-92b5-eb8e9f8a2ce1"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update9-istio" deleted
namespace/test-rolling-update9-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:04:49Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31772" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"0944805e-2424-4ad2-b6f6-b0891b4f51fe"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:04:49Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31772" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"0944805e-2424-4ad2-b6f6-b0891b4f51fe"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:04:49Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31772" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"0944805e-2424-4ad2-b6f6-b0891b4f51fe"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:04:49Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31772" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"0944805e-2424-4ad2-b6f6-b0891b4f51fe"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:04:49Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31772" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"0944805e-2424-4ad2-b6f6-b0891b4f51fe"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:04:49Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31772" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"0944805e-2424-4ad2-b6f6-b0891b4f51fe"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:04:49Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31772" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"0944805e-2424-4ad2-b6f6-b0891b4f51fe"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:04:49Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31772" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"0944805e-2424-4ad2-b6f6-b0891b4f51fe"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:04:49Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31772" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"0944805e-2424-4ad2-b6f6-b0891b4f51fe"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:04:49Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"31772" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"0944805e-2424-4ad2-b6f6-b0891b4f51fe"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update9-istio" deleted
namespace/test-rolling-update9-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:06:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32185" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"4665003a-49e1-4546-9c0e-8474a9b51c47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:06:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32185" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"4665003a-49e1-4546-9c0e-8474a9b51c47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:06:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32185" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"4665003a-49e1-4546-9c0e-8474a9b51c47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:06:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32185" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"4665003a-49e1-4546-9c0e-8474a9b51c47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:06:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32185" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"4665003a-49e1-4546-9c0e-8474a9b51c47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:06:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32185" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"4665003a-49e1-4546-9c0e-8474a9b51c47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:06:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32185" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"4665003a-49e1-4546-9c0e-8474a9b51c47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:06:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32185" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"4665003a-49e1-4546-9c0e-8474a9b51c47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:06:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32185" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"4665003a-49e1-4546-9c0e-8474a9b51c47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:06:31Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32185" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"4665003a-49e1-4546-9c0e-8474a9b51c47"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update9-istio" deleted
namespace/test-rolling-update9-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:08:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32612" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"afa9b611-fbd1-46a7-a0da-2781670d297e"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:08:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32612" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"afa9b611-fbd1-46a7-a0da-2781670d297e"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:08:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32612" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"afa9b611-fbd1-46a7-a0da-2781670d297e"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:08:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32612" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"afa9b611-fbd1-46a7-a0da-2781670d297e"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:08:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32612" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"afa9b611-fbd1-46a7-a0da-2781670d297e"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:08:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32612" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"afa9b611-fbd1-46a7-a0da-2781670d297e"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:08:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32612" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"afa9b611-fbd1-46a7-a0da-2781670d297e"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:08:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32612" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"afa9b611-fbd1-46a7-a0da-2781670d297e"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:08:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32612" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"afa9b611-fbd1-46a7-a0da-2781670d297e"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model1\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}},{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"model2\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model2\",\"type\":\"MODEL\"}],\"endpoint\":{\"type\":\"REST\"},\"name\":\"model1\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model1","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}},{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"model2","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[{"children":[],"endpoint":{"type":"REST"},"name":"model2","type":"MODEL"}],"endpoint":{"type":"REST"},"name":"model1","type":"MODEL"},"name":"mymodel","replicas":1}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update9-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update9-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:08:14Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update9-istio" "resourceVersion":"32612" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update9-istio/seldondeployments/mymodel" "uid":"afa9b611-fbd1-46a7-a0da-2781670d297e"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update9-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update9-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update9-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update9-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph5svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update9-istio" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update10[ambas] namespace/test-rolling-update10-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:10:01Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33043" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"1d1aa091-8cab-43c3-acca-1b66327f18ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:10:01Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33043" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"1d1aa091-8cab-43c3-acca-1b66327f18ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:10:01Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33043" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"1d1aa091-8cab-43c3-acca-1b66327f18ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:10:01Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33043" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"1d1aa091-8cab-43c3-acca-1b66327f18ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:10:01Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33043" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"1d1aa091-8cab-43c3-acca-1b66327f18ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:10:01Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33043" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"1d1aa091-8cab-43c3-acca-1b66327f18ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:10:01Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33043" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"1d1aa091-8cab-43c3-acca-1b66327f18ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:10:01Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33043" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"1d1aa091-8cab-43c3-acca-1b66327f18ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:10:01Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33043" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"1d1aa091-8cab-43c3-acca-1b66327f18ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:10:01Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33043" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"1d1aa091-8cab-43c3-acca-1b66327f18ca"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update10-ambas" deleted
namespace/test-rolling-update10-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:11:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33431" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"93d31cb7-af11-4627-bd51-6df9634af17a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:11:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33431" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"93d31cb7-af11-4627-bd51-6df9634af17a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:11:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33431" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"93d31cb7-af11-4627-bd51-6df9634af17a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:11:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33431" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"93d31cb7-af11-4627-bd51-6df9634af17a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:11:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33431" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"93d31cb7-af11-4627-bd51-6df9634af17a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:11:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33431" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"93d31cb7-af11-4627-bd51-6df9634af17a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:11:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33431" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"93d31cb7-af11-4627-bd51-6df9634af17a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:11:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33431" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"93d31cb7-af11-4627-bd51-6df9634af17a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:11:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33431" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"93d31cb7-af11-4627-bd51-6df9634af17a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:11:37Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33431" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"93d31cb7-af11-4627-bd51-6df9634af17a"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update10-ambas" deleted
namespace/test-rolling-update10-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:13:19Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33841" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"d65b2c48-ee17-41b9-b2a7-7845bd71ada5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:13:19Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33841" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"d65b2c48-ee17-41b9-b2a7-7845bd71ada5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:13:19Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33841" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"d65b2c48-ee17-41b9-b2a7-7845bd71ada5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:13:19Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33841" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"d65b2c48-ee17-41b9-b2a7-7845bd71ada5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:13:19Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33841" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"d65b2c48-ee17-41b9-b2a7-7845bd71ada5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:13:19Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33841" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"d65b2c48-ee17-41b9-b2a7-7845bd71ada5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:13:19Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33841" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"d65b2c48-ee17-41b9-b2a7-7845bd71ada5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:13:19Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33841" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"d65b2c48-ee17-41b9-b2a7-7845bd71ada5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:13:19Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33841" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"d65b2c48-ee17-41b9-b2a7-7845bd71ada5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:13:19Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"33841" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"d65b2c48-ee17-41b9-b2a7-7845bd71ada5"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update10-ambas" deleted
namespace/test-rolling-update10-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:15:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34253" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"8e4a88f9-166e-410b-a165-84de81f9be8d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:15:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34253" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"8e4a88f9-166e-410b-a165-84de81f9be8d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:15:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34253" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"8e4a88f9-166e-410b-a165-84de81f9be8d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:15:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34253" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"8e4a88f9-166e-410b-a165-84de81f9be8d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:15:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34253" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"8e4a88f9-166e-410b-a165-84de81f9be8d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:15:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34253" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"8e4a88f9-166e-410b-a165-84de81f9be8d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:15:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34253" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"8e4a88f9-166e-410b-a165-84de81f9be8d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:15:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34253" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"8e4a88f9-166e-410b-a165-84de81f9be8d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:15:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34253" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"8e4a88f9-166e-410b-a165-84de81f9be8d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:15:02Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34253" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"8e4a88f9-166e-410b-a165-84de81f9be8d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update10-ambas" deleted
namespace/test-rolling-update10-ambas created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:16:44Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34667" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"752967ae-dbde-400b-b418-388dd991c51b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:16:44Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34667" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"752967ae-dbde-400b-b418-388dd991c51b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:16:44Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34667" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"752967ae-dbde-400b-b418-388dd991c51b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:16:44Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34667" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"752967ae-dbde-400b-b418-388dd991c51b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:16:44Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34667" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"752967ae-dbde-400b-b418-388dd991c51b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:16:44Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34667" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"752967ae-dbde-400b-b418-388dd991c51b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:16:44Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34667" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"752967ae-dbde-400b-b418-388dd991c51b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:16:44Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34667" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"752967ae-dbde-400b-b418-388dd991c51b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:16:44Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34667" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"752967ae-dbde-400b-b418-388dd991c51b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-ambas"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-ambas\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:16:44Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-ambas" "resourceVersion":"34667" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-ambas/seldondeployments/mymodel" "uid":"752967ae-dbde-400b-b418-388dd991c51b"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-ambas.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-ambas:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-ambas:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update10-ambas" deleted

test_rolling_updates.py::TestRollingHttp::test_rolling_update10[istio] namespace/test-rolling-update10-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:18:27Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35076" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"93a8e2e0-42c5-4472-83f2-7bb662a1b354"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:18:27Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35076" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"93a8e2e0-42c5-4472-83f2-7bb662a1b354"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:18:27Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35076" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"93a8e2e0-42c5-4472-83f2-7bb662a1b354"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:18:27Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35076" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"93a8e2e0-42c5-4472-83f2-7bb662a1b354"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:18:27Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35076" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"93a8e2e0-42c5-4472-83f2-7bb662a1b354"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:18:27Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35076" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"93a8e2e0-42c5-4472-83f2-7bb662a1b354"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:18:27Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35076" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"93a8e2e0-42c5-4472-83f2-7bb662a1b354"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:18:27Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35076" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"93a8e2e0-42c5-4472-83f2-7bb662a1b354"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:18:27Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35076" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"93a8e2e0-42c5-4472-83f2-7bb662a1b354"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:18:27Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35076" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"93a8e2e0-42c5-4472-83f2-7bb662a1b354"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update10-istio" deleted
namespace/test-rolling-update10-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:20:09Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35490" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"db1947ee-e926-4dfa-b588-48dc7135dd50"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:20:09Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35490" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"db1947ee-e926-4dfa-b588-48dc7135dd50"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:20:09Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35490" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"db1947ee-e926-4dfa-b588-48dc7135dd50"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:20:09Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35490" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"db1947ee-e926-4dfa-b588-48dc7135dd50"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:20:09Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35490" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"db1947ee-e926-4dfa-b588-48dc7135dd50"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:20:09Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35490" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"db1947ee-e926-4dfa-b588-48dc7135dd50"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:20:09Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35490" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"db1947ee-e926-4dfa-b588-48dc7135dd50"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:20:09Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35490" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"db1947ee-e926-4dfa-b588-48dc7135dd50"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:20:09Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35490" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"db1947ee-e926-4dfa-b588-48dc7135dd50"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:20:09Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35490" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"db1947ee-e926-4dfa-b588-48dc7135dd50"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update10-istio" deleted
namespace/test-rolling-update10-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:21:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35907" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"6f180125-d5dc-43c5-b289-e644ddf918f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:21:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35907" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"6f180125-d5dc-43c5-b289-e644ddf918f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:21:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35907" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"6f180125-d5dc-43c5-b289-e644ddf918f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:21:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35907" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"6f180125-d5dc-43c5-b289-e644ddf918f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:21:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35907" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"6f180125-d5dc-43c5-b289-e644ddf918f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:21:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35907" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"6f180125-d5dc-43c5-b289-e644ddf918f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:21:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35907" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"6f180125-d5dc-43c5-b289-e644ddf918f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:21:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35907" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"6f180125-d5dc-43c5-b289-e644ddf918f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:21:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35907" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"6f180125-d5dc-43c5-b289-e644ddf918f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:21:51Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"35907" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"6f180125-d5dc-43c5-b289-e644ddf918f6"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update10-istio" deleted
namespace/test-rolling-update10-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:23:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"ed29c950-9280-472b-a804-7db243a915cd"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:23:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"ed29c950-9280-472b-a804-7db243a915cd"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:23:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"ed29c950-9280-472b-a804-7db243a915cd"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:23:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"ed29c950-9280-472b-a804-7db243a915cd"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:23:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"ed29c950-9280-472b-a804-7db243a915cd"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:23:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"ed29c950-9280-472b-a804-7db243a915cd"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:23:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"ed29c950-9280-472b-a804-7db243a915cd"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:23:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"ed29c950-9280-472b-a804-7db243a915cd"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:23:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"ed29c950-9280-472b-a804-7db243a915cd"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:23:33Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36316" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"ed29c950-9280-472b-a804-7db243a915cd"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
namespace "test-rolling-update10-istio" deleted
namespace/test-rolling-update10-istio created
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-complex-model" successfully rolled out
deployment "mymodel-mymodel-svc-orch" successfully rolled out
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:25:18Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36753" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"15951d52-a9a8-417e-810e-2aa98bb6248d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:25:18Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36753" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"15951d52-a9a8-417e-810e-2aa98bb6248d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:25:18Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36753" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"15951d52-a9a8-417e-810e-2aa98bb6248d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:25:18Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36753" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"15951d52-a9a8-417e-810e-2aa98bb6248d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:25:18Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36753" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"15951d52-a9a8-417e-810e-2aa98bb6248d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:25:18Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36753" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"15951d52-a9a8-417e-810e-2aa98bb6248d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:25:18Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36753" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"15951d52-a9a8-417e-810e-2aa98bb6248d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:25:18Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36753" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"15951d52-a9a8-417e-810e-2aa98bb6248d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:25:18Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36753" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"15951d52-a9a8-417e-810e-2aa98bb6248d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
Error from server (InternalError): error when applying patch:
{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1,\"traffic\":50},{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.2\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel-canary\",\"replicas\":1,\"traffic\":50}]}}\n"}},"spec":{"predictors":[{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.1","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel","replicas":1,"traffic":50},{"componentSpecs":[{"spec":{"containers":[{"image":"seldonio/fixed-model:0.2","imagePullPolicy":"IfNotPresent","name":"complex-model","resources":{"requests":{"memory":"1Mi"}}}],"terminationGracePeriodSeconds":1}}],"graph":{"children":[],"endpoint":{"type":"REST"},"name":"complex-model","type":"MODEL"},"name":"mymodel-canary","replicas":1,"traffic":50}]}}
to:
Resource: "machinelearning.seldon.io/v1alpha2, Resource=seldondeployments", GroupVersionKind: "machinelearning.seldon.io/v1alpha2, Kind=SeldonDeployment"
Name: "mymodel", Namespace: "test-rolling-update10-istio"
Object: &{map["apiVersion":"machinelearning.seldon.io/v1alpha2" "kind":"SeldonDeployment" "metadata":map["annotations":map["kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"machinelearning.seldon.io/v1alpha2\",\"kind\":\"SeldonDeployment\",\"metadata\":{\"annotations\":{},\"labels\":{\"app\":\"seldon\"},\"name\":\"mymodel\",\"namespace\":\"test-rolling-update10-istio\"},\"spec\":{\"annotations\":{\"seldon.io/engine-separate-pod\":\"true\"},\"name\":\"mymodel\",\"predictors\":[{\"componentSpecs\":[{\"spec\":{\"containers\":[{\"image\":\"seldonio/fixed-model:0.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"complex-model\",\"resources\":{\"requests\":{\"memory\":\"1Mi\"}}}],\"terminationGracePeriodSeconds\":1}}],\"graph\":{\"children\":[],\"endpoint\":{\"type\":\"REST\"},\"name\":\"complex-model\",\"type\":\"MODEL\"},\"name\":\"mymodel\",\"replicas\":1}]}}\n"] "creationTimestamp":"2021-01-19T14:25:18Z" "generation":'\x01' "labels":map["app":"seldon"] "name":"mymodel" "namespace":"test-rolling-update10-istio" "resourceVersion":"36753" "selfLink":"/apis/machinelearning.seldon.io/v1alpha2/namespaces/test-rolling-update10-istio/seldondeployments/mymodel" "uid":"15951d52-a9a8-417e-810e-2aa98bb6248d"] "spec":map["annotations":map["seldon.io/engine-separate-pod":"true"] "name":"mymodel" "predictors":[map["componentSpecs":[map["spec":map["containers":[map["image":"seldonio/fixed-model:0.1" "imagePullPolicy":"IfNotPresent" "name":"complex-model" "resources":map["requests":map["memory":"1Mi"]]]] "terminationGracePeriodSeconds":'\x01']]] "graph":map["children":[] "endpoint":map["type":"REST"] "name":"complex-model" "type":"MODEL"] "name":"mymodel" "replicas":'\x01']]] "status":map["address":map["url":"http://mymodel-mymodel.test-rolling-update10-istio.svc.cluster.local:8000/api/v1.0/predictions"] "deploymentStatus":map["mymodel-mymodel-0-complex-model":map["availableReplicas":'\x01' "replicas":'\x01'] "mymodel-mymodel-svc-orch":map["availableReplicas":'\x01' "replicas":'\x01']] "replicas":'\x01' "serviceStatus":map["mymodel-mymodel":map["grpcEndpoint":"mymodel-mymodel.test-rolling-update10-istio:5001" "httpEndpoint":"mymodel-mymodel.test-rolling-update10-istio:8000" "svcName":"mymodel-mymodel"] "mymodel-mymodel-complex-model":map["grpcEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9500" "httpEndpoint":"mymodel-mymodel-complex-model.test-rolling-update10-istio:9000" "svcName":"mymodel-mymodel-complex-model"]] "state":"Available"]]}
for: "../resources/graph6svc.json": Internal error occurred: failed calling webhook "v1alpha2.vseldondeployment.kb.io": Post https://seldon-webhook-service.seldon-system.svc:443/validate-machinelearning-seldon-io-v1alpha2-seldondeployment?timeout=30s: EOF
FAILEDnamespace "test-rolling-update10-istio" deleted

test_s2i_java.py::test_build_s2i_image[s2i_image0] SKIPPED
test_s2i_java.py::test_model_rest[s2i_image0] SKIPPED
test_s2i_java.py::test_build_s2i_image[s2i_image1] ca3556046bb81e257c66ead3370a4d2e9c1a4ff6af68e46e3fd488052d753547
jni-model
PASSED
test_s2i_java.py::test_model_rest[s2i_image1] namespace/test-model-rest-s2i-image1 created
deployment "mymodel-default-0-model" successfully rolled out
PASSEDnamespace "test-model-rest-s2i-image1" deleted

test_s2i_python.py::TestPythonS2i::test_build_router ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=c0e7eb420c98e1e6c13bfbda5946c0dc518b403b39b739daeb102e78bf50a7c6
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
d86e25b9c80004382e0e969707e71de57e3cdac13fb0ead65e5e4ca42a911978
router
PASSED
test_s2i_python.py::TestPythonS2i::test_build_model ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=caa72b1b7552eb8d60d4829464171fd2e5e87730dbcba3fe5733fda40163c55e
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
2def1b8b576170781a336a1742b63e54b59b8317331d2379d875c56f818f0a1e
model
PASSED
test_s2i_python.py::TestPythonS2i::test_build_transformer ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=35e7ce6cde984dea5094ae7a4ecb46d82ca3c1a33cb5bc82cfbec68996c6ec74
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
0db36a792cf05fdeed088f6500c4aa463f26ac3c9ac9a5c151d425cf0cd3d6b5
transformer
PASSED
test_s2i_python.py::TestPythonS2i::test_build_combiner ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=1417231363bc1902925b8a8e538827d3376d3b360c6df34340b8927f9ab8b216
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
9c984c29585f2db466501d2b845211caa67381fe77a44a06a2dbc52d9c7df948
combiner
PASSED
test_s2i_python.py::TestPythonS2iK8s::test_model namespace/test-model created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=375ce56921c74ee425b8dd3be0710ded0d6fcd774fb88df8c5307b56119693f5
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/testmodel:0.1" with ID "sha256:d377b559841f9cf80f5b6ed9a0804aa40b1c675dfeca30a40ee9ecd1fca72706" not present on node "kind-worker"
Image: "seldonio/testmodel:0.1" with ID "sha256:d377b559841f9cf80f5b6ed9a0804aa40b1c675dfeca30a40ee9ecd1fca72706" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-model" successfully rolled out
seldondeployment.machinelearning.seldon.io "mymodel" deleted
PASSEDnamespace "test-model" deleted

test_s2i_python.py::TestPythonS2iK8s::test_model_rest_non200 namespace/test-model-rest-non200 created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=c4f49d43430ee7744307cd53df49be12f4ec2a05c4897df57442167334d6ea21
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/testmodel_non200:0.1" with ID "sha256:a7016ac1580bf033c2fc438c3d4d9e2e9b1bf9f2ff1923d1a092a8b02f8127c7" not present on node "kind-worker"
Image: "seldonio/testmodel_non200:0.1" with ID "sha256:a7016ac1580bf033c2fc438c3d4d9e2e9b1bf9f2ff1923d1a092a8b02f8127c7" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mymodel created
deployment "mymodel-mymodel-0-model" successfully rolled out
seldondeployment.machinelearning.seldon.io "mymodel" deleted
PASSEDnamespace "test-model-rest-non200" deleted

test_s2i_python.py::TestPythonS2iK8s::test_input_transformer namespace/test-input-transformer created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=3209f1ef012ae79e2df76d58dc17397527e638edc8004e972a38ce690fe722b2
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/testtransformer:0.1" with ID "sha256:996bb7862a1260e899ce0c6822af01f959464236d0cb760df56549d8315c4307" not present on node "kind-worker"
Image: "seldonio/testtransformer:0.1" with ID "sha256:996bb7862a1260e899ce0c6822af01f959464236d0cb760df56549d8315c4307" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mytrans created
deployment "mytrans-mytrans-0-trans" successfully rolled out
seldondeployment.machinelearning.seldon.io "mytrans" deleted
PASSEDnamespace "test-input-transformer" deleted

test_s2i_python.py::TestPythonS2iK8s::test_output_transformer namespace/test-output-transformer created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=d3ed3371cddd4979db049ef07902f69dd3d2efcf855cd05dd0e4530acf5360d8
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/testtransformer:0.1" with ID "sha256:aff3c68fb3af185e2082cd72c22c987f022ba447b60479233f4818fa0b775c95" not present on node "kind-worker"
Image: "seldonio/testtransformer:0.1" with ID "sha256:aff3c68fb3af185e2082cd72c22c987f022ba447b60479233f4818fa0b775c95" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mytrans created
deployment "mytrans-mytrans-0-model-transformer" successfully rolled out
seldondeployment.machinelearning.seldon.io "mytrans" deleted
PASSEDnamespace "test-output-transformer" deleted

test_s2i_python.py::TestPythonS2iK8s::test_router namespace/test-router created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=751ac71d17c7c428ab4e401ecb2ac8255617c6abdb73583f26cff6246ae04b3c
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/testmodel:0.1" with ID "sha256:7b116b9e5dbeeb57bc83726e8b91dd99fd5c7e16dfb53c3b7f8208451c43c4fb" not present on node "kind-worker"
Image: "seldonio/testmodel:0.1" with ID "sha256:7b116b9e5dbeeb57bc83726e8b91dd99fd5c7e16dfb53c3b7f8208451c43c4fb" not present on node "kind-control-plane"
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=3f487490ee6d7a14bef1134c64ba1acca5494c20148f575ba4e9e59c4190a1da
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/testrouter:0.1" with ID "sha256:363b3ecb9908aff71525e8b6ef44428dacf9e623e9dec6aadc3b53b8196427bc" not present on node "kind-worker"
Image: "seldonio/testrouter:0.1" with ID "sha256:363b3ecb9908aff71525e8b6ef44428dacf9e623e9dec6aadc3b53b8196427bc" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/myrouter created
deployment "myrouter-myrouter-0-model-router" successfully rolled out
seldondeployment.machinelearning.seldon.io "myrouter" deleted
PASSEDnamespace "test-router" deleted

test_s2i_python.py::TestPythonS2iK8s::test_combiner namespace/test-combiner created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=80f45214c18ed020df4a7da7c3bcb66241d0c0a70c9a5b039acba3ca1b98a6aa
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/testmodel:0.1" with ID "sha256:852cc83f0e2275a2422c1163afed28f1b6383ed93caf31d69d8bef6a81644cc8" not present on node "kind-worker"
Image: "seldonio/testmodel:0.1" with ID "sha256:852cc83f0e2275a2422c1163afed28f1b6383ed93caf31d69d8bef6a81644cc8" not present on node "kind-control-plane"
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=dd22c3e136cbdbe230fc782576c1de6f14076a8f5ccaf7fcf1e9e27392625d96
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/testcombiner:0.1" with ID "sha256:c0140ee78855ae0c3f90d64a2cbfbf194969b19fa392f4761edb015bd6c7ae27" not present on node "kind-worker"
Image: "seldonio/testcombiner:0.1" with ID "sha256:c0140ee78855ae0c3f90d64a2cbfbf194969b19fa392f4761edb015bd6c7ae27" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mycombiner created
deployment "mycombiner-mycombiner-0-model-combiner" successfully rolled out
seldondeployment.machinelearning.seldon.io "mycombiner" deleted
PASSEDnamespace "test-combiner" deleted

test_seldon_metadata.py::TestTagsPythonS2i::test_build_modelmetadata_rest ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=6c4c79fdd43fbf492ce370fb4b3c042f5bbad10e59f0bddc4d8bb24dd1985659
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
53174d1fd139cd8586390480226ededb151cdf971cb3f7e34ce9c7850906095a
model-modelmetadata-rest
PASSED
test_seldon_metadata.py::TestTagsPythonS2i::test_build_modelmetadata_grpc ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=20706e21cadf304992633aa7dce835213b7f4ef51e94fd902cc449969cdeaa81
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
10288677d3e7ff5a59a964f3c0fa20518a2ee6f746a169cbcdae67404ba1410d
model-modelmetadata-grpc
PASSED
test_seldon_metadata.py::TestTagsPythonS2iK8s::test_modelmetadata_rest namespace/test-modelmetadata-rest created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=58140312bd95ca6183e9d4f48ba659e8ec1fe02f3fdccb482da8c035949e7ca9
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_metadata_modelmetadata_rest:0.1" with ID "sha256:e30e3d2a5341fb0109f57fcb9aa7b16b0f3a1e1dc07a63ce32706936f79eaa27" not present on node "kind-worker"
Image: "seldonio/test_metadata_modelmetadata_rest:0.1" with ID "sha256:e30e3d2a5341fb0109f57fcb9aa7b16b0f3a1e1dc07a63ce32706936f79eaa27" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mymodel-modelmetadata created
deployment "mymodel-modelmetadata-example-0-my-model" successfully rolled out
PASSEDnamespace "test-modelmetadata-rest" deleted

test_seldon_metadata.py::TestTagsPythonS2iK8s::test_manifestmodelmetadata_rest namespace/test-manifestmodelmetadata-rest created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=5d8d9dec11cd7b74bb14b1382b65630525ef0cb97ca7d5787c6b64526d84af16
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_metadata_manifestmetadata_rest:0.1" with ID "sha256:d794f3000423f473ccead8a4f890a2300267b4b97fddb0c7ce8f3a2f8d0490ca" not present on node "kind-worker"
Image: "seldonio/test_metadata_manifestmetadata_rest:0.1" with ID "sha256:d794f3000423f473ccead8a4f890a2300267b4b97fddb0c7ce8f3a2f8d0490ca" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mymodel-manifestmetadata created
deployment "mymodel-manifestmetadata-example-0-my-model" successfully rolled out
PASSEDnamespace "test-manifestmodelmetadata-rest" deleted

test_seldon_metadata.py::TestTagsPythonS2iK8s::test_modelmetadata_grpc namespace/test-modelmetadata-grpc created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=2a9b42143429312aebea6d56145c4388a759575849b4017090554505b6142350
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_metadata_modelmetadata_grpc:0.1" with ID "sha256:00d4f814b3986168cfa741e508316618d4821fbe83bd83c8031d1f73cf225a52" not present on node "kind-worker"
Image: "seldonio/test_metadata_modelmetadata_grpc:0.1" with ID "sha256:00d4f814b3986168cfa741e508316618d4821fbe83bd83c8031d1f73cf225a52" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mymodel-modelmetadata created
deployment "mymodel-modelmetadata-example-0-my-model" successfully rolled out
PASSEDnamespace "test-modelmetadata-grpc" deleted

test_tags.py::TestTagsPythonS2i::test_build_model_one_rest ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=558629c1cf2b2dc74c8f62311e5706ca2095230a6c50962faa78d8f9f82ba4c7
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
84f53aea176a9b4dd4615beaaf1a68fa03dd14f2ed2d4c3ae97ec3804d92946f
model-one-rest
PASSED
test_tags.py::TestTagsPythonS2i::test_build_model_two_rest ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=f52ebd5f126405e41cfaa95e9de95017ec22bfa31153a9e28031c9daa1d06736
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
f1be86a8bff69a8b5dcbb9b9a68a7c78a1f3bf2ada617707a58d23253529bfa5
model-two-rest
PASSED
test_tags.py::TestTagsPythonS2i::test_build_model_one_grpc ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=4b6bba1d545bd4147545b6ee361d861f21275c6e9b06d87d7f8d0f7b7b77429d
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
a010b54d83b02b07fac9ee533265bae8bf04bd36a07700f98baa4eba27ac0e11
model-one-grpc
PASSED
test_tags.py::TestTagsPythonS2i::test_build_model_two_grpc ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=33101cb7871a1924fcce80fe1f9af0f4d480e9014355e52750aeee533d0408fa
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
da9cc37114b654f92d403ae956b9485ffe5c362ba27bae92138d7f25e9224b74
model-two-grpc
PASSED
test_tags.py::TestTagsPythonS2i::test_build_combiner_rest ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=523ac1ff230c2a46662875d6351773cd173065c127261f8094e2cbc9c6835b29
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
6ed64b04bd7ddae85a31c689d4ed4964740e6c0d2b5dd83161a8ba18e1e3033a
combiner-rest
PASSED
test_tags.py::TestTagsPythonS2i::test_build_combiner_grpc ---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=c15dcc4accbcb610608144273139ecd3f1cd781fa6473fe4e2f658d53e253e32
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
5f8eaa96414985511dcc3a8473ec0adbffb445dd95f80f7bf788d4b8e25cda7d
combiner-grpc
PASSED
test_tags.py::TestTagsPythonS2iK8s::test_model_single_rest namespace/test-model-single-rest created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=12ff2130458a03c1f5d22cd640e1a7509aa14fffb9a73b9a2b364d22579658f8
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_one_rest:0.1" with ID "sha256:09552609b9da4e31149d84232673db47dc678bac8a1a2fcffa1f96d65cd440e3" not present on node "kind-worker"
Image: "seldonio/test_tags_one_rest:0.1" with ID "sha256:09552609b9da4e31149d84232673db47dc678bac8a1a2fcffa1f96d65cd440e3" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mymodel-tags-single created
deployment "mymodel-tags-single-mymodel-tags-single-0-model" successfully rolled out
seldondeployment.machinelearning.seldon.io "mymodel-tags-single" deleted
PASSEDnamespace "test-model-single-rest" deleted

test_tags.py::TestTagsPythonS2iK8s::test_model_graph_rest namespace/test-model-graph-rest created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=bc54a2c9878c525c42be08c67693a3b831270ca9f5a457ea6fe6ef18bfec95ff
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_one_rest:0.1" with ID "sha256:ad7cfdfd04d393746fe06b702cb52da25155d036ecad0115a320cff317385db6" not present on node "kind-worker"
Image: "seldonio/test_tags_one_rest:0.1" with ID "sha256:ad7cfdfd04d393746fe06b702cb52da25155d036ecad0115a320cff317385db6" not present on node "kind-control-plane"
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=03b18e1d90adba6a9b9a49523b302d4faadf75125a0553fced337a391575b9df
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_two_rest:0.1" with ID "sha256:dbcb0068c0e7dae7ad2e64be2df38ea51b74739f645555d985a2f2ec20fb2dc8" not present on node "kind-worker"
Image: "seldonio/test_tags_two_rest:0.1" with ID "sha256:dbcb0068c0e7dae7ad2e64be2df38ea51b74739f645555d985a2f2ec20fb2dc8" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mymodel-tags-graph created
deployment "mymodel-tags-graph-mymodel-tags-graph-0-model-one-model-two" successfully rolled out
seldondeployment.machinelearning.seldon.io "mymodel-tags-graph" deleted
PASSEDnamespace "test-model-graph-rest" deleted

test_tags.py::TestTagsPythonS2iK8s::test_model_combiner_rest namespace/test-model-combiner-rest created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=88284b33a95d62377cb23b7b3cd9835ff411e2fa0fe7af7579c9d9ba6ccb7690
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_one_rest:0.1" with ID "sha256:32c2919315ecbdcb51617c45b53e89c5de3a629ac37a816aed4f5ec7972d32e2" not present on node "kind-worker"
Image: "seldonio/test_tags_one_rest:0.1" with ID "sha256:32c2919315ecbdcb51617c45b53e89c5de3a629ac37a816aed4f5ec7972d32e2" not present on node "kind-control-plane"
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=cc6917b31be38a997064c710eb39bc13ba3f7a71537e1103d72e37fd251ad006
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_two_rest:0.1" with ID "sha256:32ce479a7a8f77db58050855c1d74bef9fe6662191f55aad0ed63774b9010ce3" not present on node "kind-worker"
Image: "seldonio/test_tags_two_rest:0.1" with ID "sha256:32ce479a7a8f77db58050855c1d74bef9fe6662191f55aad0ed63774b9010ce3" not present on node "kind-control-plane"
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=32404e26c8ed4955b2bd07e3007dcf34bd2371fb911b26ddac1d4a834ab01625
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_combiner_rest:0.1" with ID "sha256:abf60aebe29fa1a07fb4af5bcdd363ae7e9811c9a53b059ac7617d0012dc0983" not present on node "kind-worker"
Image: "seldonio/test_tags_combiner_rest:0.1" with ID "sha256:abf60aebe29fa1a07fb4af5bcdd363ae7e9811c9a53b059ac7617d0012dc0983" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mymodel-tags-combiner created
deployment "seldon-a8d2256d87a7c13f898df7d6478eb475" successfully rolled out
seldondeployment.machinelearning.seldon.io "mymodel-tags-combiner" deleted
PASSEDnamespace "test-model-combiner-rest" deleted

test_tags.py::TestTagsPythonS2iK8s::test_model_single_grpc namespace/test-model-single-grpc created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=7693d410aeb3cf6bc4f92f086e1b1ca2e43699c55d957ea6351f8be7ab1a0e9e
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_one_grpc:0.1" with ID "sha256:dec6b860e832b6b04caedcf6d0ae69464cd1484d120e2f153b225d1e7827879c" not present on node "kind-worker"
Image: "seldonio/test_tags_one_grpc:0.1" with ID "sha256:dec6b860e832b6b04caedcf6d0ae69464cd1484d120e2f153b225d1e7827879c" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mymodel-tags-single created
deployment "mymodel-tags-single-mymodel-tags-single-0-model" successfully rolled out
seldondeployment.machinelearning.seldon.io "mymodel-tags-single" deleted
PASSEDnamespace "test-model-single-grpc" deleted

test_tags.py::TestTagsPythonS2iK8s::test_model_graph_grpc namespace/test-model-graph-grpc created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=df87de2a188164c5c82f8a9bf6cba9ebb1ec20b2a192ec7d15a57eb4cfbc1034
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_one_grpc:0.1" with ID "sha256:7f00e3abc43d9b559bbca0081f38b664b6fdeba05c3a4779b0fd0195fa786fae" not present on node "kind-worker"
Image: "seldonio/test_tags_one_grpc:0.1" with ID "sha256:7f00e3abc43d9b559bbca0081f38b664b6fdeba05c3a4779b0fd0195fa786fae" not present on node "kind-control-plane"
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=4396090d228883118a1cb61b05ba92cae8306c6127e597a2fca742b124a632f9
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_two_grpc:0.1" with ID "sha256:baa8f3cb58e417ef0abccd4573fb6bf7a6e506341f6688c7e20855a0fd1f66f9" not present on node "kind-worker"
Image: "seldonio/test_tags_two_grpc:0.1" with ID "sha256:baa8f3cb58e417ef0abccd4573fb6bf7a6e506341f6688c7e20855a0fd1f66f9" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mymodel-tags-graph created
deployment "mymodel-tags-graph-mymodel-tags-graph-0-model-one-model-two" successfully rolled out
seldondeployment.machinelearning.seldon.io "mymodel-tags-graph" deleted
PASSEDnamespace "test-model-graph-grpc" deleted

test_tags.py::TestTagsPythonS2iK8s::test_model_combiner_grpc namespace/test-model-combiner-grpc created
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=4480f81ef7d33a93ae6de242d84a2acbed6b4b9484a30b80a6bfb1d1a07e9d6c
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_one_grpc:0.1" with ID "sha256:cee70a08bbbd1f78ba28e74b1333fb39f3603b941e17e9068eaed3886da55b4a" not present on node "kind-worker"
Image: "seldonio/test_tags_one_grpc:0.1" with ID "sha256:cee70a08bbbd1f78ba28e74b1333fb39f3603b941e17e9068eaed3886da55b4a" not present on node "kind-control-plane"
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=2728820485ad7d9c5bca496754cc2b8e2e8ca64111cffa295c314d6680477741
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_two_grpc:0.1" with ID "sha256:5603e040862bea919a02cd96d96c04808a44522560850c1b222915696dafee39" not present on node "kind-worker"
Image: "seldonio/test_tags_two_grpc:0.1" with ID "sha256:5603e040862bea919a02cd96d96c04808a44522560850c1b222915696dafee39" not present on node "kind-control-plane"
---> Installing application source...
Collecting pip-licenses
Downloading https://files.pythonhosted.org/packages/89/05/3044295a5cf87c895022e915d888abdaa2ae7bdce741af462c9300fbebb3/pip_licenses-3.2.0-py3-none-any.whl
Collecting PTable (from pip-licenses)
Downloading https://files.pythonhosted.org/packages/ab/b3/b54301811173ca94119eb474634f120a49cd370f257d1aae5a4abaf12729/PTable-0.9.2.tar.gz
Building wheels for collected packages: PTable
Building wheel for PTable (setup.py): started
Building wheel for PTable (setup.py): finished with status 'done'
Created wheel for PTable: filename=PTable-0.9.2-cp37-none-any.whl size=22906 sha256=5fa143fcd102316ade4c4d24f04544388f8f33527a0fd8fe3e1ac389f1e77a1d
Stored in directory: /root/.cache/pip/wheels/22/cc/2e/55980bfe86393df3e9896146a01f6802978d09d7ebcba5ea56
Successfully built PTable
Installing collected packages: PTable, pip-licenses
Successfully installed PTable-0.9.2 pip-licenses-3.2.0
created path: ./licenses/license_info.csv
created path: ./licenses/license.txt
Build completed successfully
Image: "seldonio/test_tags_combiner_grpc:0.1" with ID "sha256:2303008c59ac42360c05ecd22b4f388618c14b51d3840e0f12bef08694144247" not present on node "kind-worker"
Image: "seldonio/test_tags_combiner_grpc:0.1" with ID "sha256:2303008c59ac42360c05ecd22b4f388618c14b51d3840e0f12bef08694144247" not present on node "kind-control-plane"
seldondeployment.machinelearning.seldon.io/mymodel-tags-combiner created
deployment "seldon-a8d2256d87a7c13f898df7d6478eb475" successfully rolled out
FAILEDnamespace "test-model-combiner-grpc" deleted


=================================== FAILURES ===================================
_________________ TestRollingHttp.test_rolling_update5[ambas] __________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f3719d21c88>
namespace = 'test-rolling-update5-ambas', api_gateway = 'localhost:8003'

    def test_rolling_update5(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace)
        logging.warning("Initial request")
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph6.json -n {namespace}")

test_rolling_updates.py:39: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:35 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:35 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:35 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:35 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:35 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
_________________ TestRollingHttp.test_rolling_update5[istio] __________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f36ac223e48>
namespace = 'test-rolling-update5-istio', api_gateway = 'localhost:8004'

    def test_rolling_update5(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace)
        logging.warning("Initial request")
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph6.json -n {namespace}")

test_rolling_updates.py:39: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:35 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:35 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:35 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:35 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:35 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
_________________ TestRollingHttp.test_rolling_update6[ambas] __________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f3719b93048>
namespace = 'test-rolling-update6-ambas', api_gateway = 'localhost:8003'

    def test_rolling_update6(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1svc.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace, expected_deployments=2)
        logging.warning("Initial request")
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph2svc.json -n {namespace}")

test_rolling_updates.py:70: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:66 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:66 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:66 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:66 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:66 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
_________________ TestRollingHttp.test_rolling_update6[istio] __________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f3719cf6f98>
namespace = 'test-rolling-update6-istio', api_gateway = 'localhost:8004'

    def test_rolling_update6(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1svc.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace, expected_deployments=2)
        logging.warning("Initial request")
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph2svc.json -n {namespace}")

test_rolling_updates.py:70: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:66 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:66 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:66 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:66 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:66 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
_________________ TestRollingHttp.test_rolling_update7[ambas] __________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f3719b83e80>
namespace = 'test-rolling-update7-ambas', api_gateway = 'localhost:8003'

    def test_rolling_update7(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1svc.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace, expected_deployments=2)
        logging.warning("Initial request")
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph3svc.json -n {namespace}")

test_rolling_updates.py:101: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:97 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:97 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:97 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:97 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:97 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
_________________ TestRollingHttp.test_rolling_update7[istio] __________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f3719b219e8>
namespace = 'test-rolling-update7-istio', api_gateway = 'localhost:8004'

    def test_rolling_update7(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1svc.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace, expected_deployments=2)
        logging.warning("Initial request")
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph3svc.json -n {namespace}")

test_rolling_updates.py:101: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:97 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:97 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:97 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:97 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:test_rolling_updates.py:97 Initial request
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
_________________ TestRollingHttp.test_rolling_update8[ambas] __________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f3719c43e48>
namespace = 'test-rolling-update8-ambas', api_gateway = 'localhost:8003'

    def test_rolling_update8(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1svc.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace, expected_deployments=2)
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph4svc.json -n {namespace}")

test_rolling_updates.py:131: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
_________________ TestRollingHttp.test_rolling_update8[istio] __________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f3719acdf28>
namespace = 'test-rolling-update8-istio', api_gateway = 'localhost:8004'

    def test_rolling_update8(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1svc.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace, expected_deployments=2)
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph4svc.json -n {namespace}")

test_rolling_updates.py:131: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
_________________ TestRollingHttp.test_rolling_update9[ambas] __________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f3719b21748>
namespace = 'test-rolling-update9-ambas', api_gateway = 'localhost:8003'

    def test_rolling_update9(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1svc.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace, expected_deployments=2)
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph5svc.json -n {namespace}")

test_rolling_updates.py:155: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
_________________ TestRollingHttp.test_rolling_update9[istio] __________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f3719acd828>
namespace = 'test-rolling-update9-istio', api_gateway = 'localhost:8004'

    def test_rolling_update9(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1svc.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace, expected_deployments=2)
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph5svc.json -n {namespace}")

test_rolling_updates.py:155: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
_________________ TestRollingHttp.test_rolling_update10[ambas] _________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f3719c09d30>
namespace = 'test-rolling-update10-ambas', api_gateway = 'localhost:8003'

    def test_rolling_update10(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1svc.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace, expected_deployments=2)
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph6svc.json -n {namespace}")

test_rolling_updates.py:179: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
_________________ TestRollingHttp.test_rolling_update10[istio] _________________

self = <test_rolling_updates.TestRollingHttp object at 0x7f3719bba198>
namespace = 'test-rolling-update10-istio', api_gateway = 'localhost:8004'

    def test_rolling_update10(self, namespace, api_gateway):
        retry_run(f"kubectl apply -f ../resources/graph1svc.json -n {namespace}")
        wait_for_status("mymodel", namespace)
        wait_for_rollout("mymodel", namespace, expected_deployments=2)
        r = initial_rest_request("mymodel", namespace, endpoint=api_gateway)
        assert r.status_code == 200
        assert r.json()["data"]["tensor"]["values"] == [1.0, 2.0, 3.0, 4.0]
>       retry_run(f"kubectl apply -f ../resources/graph6svc.json -n {namespace}")

test_rolling_updates.py:179: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

cmd = 'kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio'
attempts = 10, sleep = 5

    def retry_run(cmd, attempts=10, sleep=5):
        for i in range(attempts):
            ret = run(cmd, shell=True)
            if ret.returncode == 0:
                logging.info(f"Successfully ran command: {cmd}")
                break
            logging.warning(f"Unsuccessful command but retrying: {cmd}")
            time.sleep(sleep)
>       assert ret.returncode == 0, f"Non-zero return code in retry_run for {cmd}"
E       AssertionError: Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio

seldon_e2e_utils.py:169: AssertionError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
WARNING  root:seldon_e2e_utils.py:167 Unsuccessful command but retrying: kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
________________ TestTagsPythonS2iK8s.test_model_combiner_grpc _________________

self = <test_tags.TestTagsPythonS2iK8s object at 0x7f3719b0d2e8>
namespace = 'test-model-combiner-grpc', s2i_python_version = '1.6.0-dev'

    def test_model_combiner_grpc(self, namespace, s2i_python_version):
        create_push_s2i_image(s2i_python_version, "one", "grpc")
        create_push_s2i_image(s2i_python_version, "two", "grpc")
        create_push_s2i_image(s2i_python_version, "combiner", "grpc")
        retry_run(
            f"kubectl apply -f ../resources/tags_combiner_grpc.json -n {namespace}"
        )
        wait_for_status("mymodel-tags-combiner", namespace)
        wait_for_rollout("mymodel-tags-combiner", namespace)
        r = initial_grpc_request("mymodel-tags-combiner", namespace)
        arr = np.array([[1, 2, 3]])
        r = grpc_request_ambassador(
>           "mymodel-tags-combiner", namespace, API_AMBASSADOR, data=arr
        )

test_tags.py:226: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
seldon_e2e_utils.py:518: in grpc_request_ambassador
    raise e
seldon_e2e_utils.py:513: in grpc_request_ambassador
    response = stub.Predict(request=request, metadata=metadata)
/usr/local/lib/python3.6/site-packages/grpc/_channel.py:826: in __call__
    return _end_unary_response_blocking(state, call, False, None)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

state = <grpc._channel._RPCState object at 0x7f3719b0df28>
call = <grpc._cython.cygrpc.SegregatedCall object at 0x7f371995ed48>
with_call = False, deadline = None

    def _end_unary_response_blocking(state, call, with_call, deadline):
        if state.code is grpc.StatusCode.OK:
            if with_call:
                rendezvous = _MultiThreadedRendezvous(state, call, None, deadline)
                return state.response, rendezvous
            else:
                return state.response
        else:
>           raise _InactiveRpcError(state)
E           grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
E           	status = StatusCode.UNAVAILABLE
E           	details = "upstream connect error or disconnect/reset before headers. reset reason: connection termination"
E           	debug_error_string = "{"created":"@1611068638.480918622","description":"Error received from peer ipv4:127.0.0.1:8003","file":"src/core/lib/surface/call.cc","file_line":1061,"grpc_message":"upstream connect error or disconnect/reset before headers. reset reason: connection termination","grpc_status":14}"
E           >

/usr/local/lib/python3.6/site-packages/grpc/_channel.py:729: _InactiveRpcError
------------------------------ Captured log call -------------------------------
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
WARNING  root:seldon_e2e_utils.py:186 Failed to find status - sleeping
===Flaky Test Report===

test_namespace_update[1.0.2] passed 1 out of the required 1 times. Success!
test_namespace_update[1.1.0] passed 1 out of the required 1 times. Success!
test_rolling_update5[ambas] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:39>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update5[ambas] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:39>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update5[ambas] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:39>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update5[ambas] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:39>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update5[ambas] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:39>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update5[istio] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:39>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update5[istio] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:39>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update5[istio] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:39>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update5[istio] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:39>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update5[istio] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6.json -n test-rolling-update5-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:39>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update6[ambas] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:70>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update6[ambas] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:70>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update6[ambas] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:70>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update6[ambas] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:70>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update6[ambas] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:70>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update6[istio] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:70>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update6[istio] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:70>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update6[istio] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:70>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update6[istio] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:70>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update6[istio] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph2svc.json -n test-rolling-update6-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:70>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update7[ambas] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:101>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update7[ambas] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:101>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update7[ambas] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:101>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update7[ambas] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:101>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update7[ambas] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:101>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update7[istio] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:101>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update7[istio] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:101>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update7[istio] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:101>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update7[istio] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:101>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update7[istio] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph3svc.json -n test-rolling-update7-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:101>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update8[ambas] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:131>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update8[ambas] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:131>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update8[ambas] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:131>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update8[ambas] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:131>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update8[ambas] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:131>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update8[istio] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:131>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update8[istio] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:131>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update8[istio] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:131>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update8[istio] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:131>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update8[istio] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph4svc.json -n test-rolling-update8-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:131>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update9[ambas] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:155>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update9[ambas] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:155>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update9[ambas] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:155>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update9[ambas] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:155>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update9[ambas] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:155>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update9[istio] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:155>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update9[istio] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:155>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update9[istio] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:155>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update9[istio] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:155>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update9[istio] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph5svc.json -n test-rolling-update9-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:155>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update10[ambas] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:179>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update10[ambas] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:179>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update10[ambas] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:179>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update10[ambas] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:179>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update10[ambas] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-ambas
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:179>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update10[istio] failed (4 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:179>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update10[istio] failed (3 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:179>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update10[istio] failed (2 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:179>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update10[istio] failed (1 runs remaining out of 5).
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:179>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]
test_rolling_update10[istio] failed; it passed 0 out of the required 1 times.
	<class 'AssertionError'>
	Non-zero return code in retry_run for kubectl apply -f ../resources/graph6svc.json -n test-rolling-update10-istio
	[<TracebackEntry /workspace/source/testing/scripts/test_rolling_updates.py:179>, <TracebackEntry /workspace/source/testing/scripts/seldon_e2e_utils.py:169>]

===End Flaky Test Report===
===== 13 failed, 35 passed, 3 skipped, 61 deselected in 8866.57s (2:27:46) =====
make: *** [Makefile:168: test_sequential] Error 1
Test returned errors
kind delete cluster
Deleting cluster "kind" ...
Stopping Docker: dockerProgram process in pidfile '/var/run/docker-ssd.pid', 1 process(es), refused to die.
[31m
Pipeline failed on stage 'end-to-end' : container 'step-test-end-to-end'. The execution of the pipeline has stopped.[0m
