apiVersion: mlops.seldon.io/v1alpha1
kind: Server
metadata:
  annotations:
    {{ .Values.mlserver.annotations | toYaml }}
  labels:
    {{ .Values.mlserver.labels | toYaml }}
  name: mlserver
  namespace: '{{ .Release.Namespace }}'
spec:
  maxReplicas: {{ .Values.mlserver.maxReplicas }}
  minReplicas: {{ .Values.mlserver.minReplicas }}
  podSpec: {{ toJson .Values.mlserver.podSpec }}
  replicas: {{ .Values.mlserver.replicas }}
  serverConfig: mlserver
  statefulSetPersistentVolumeClaimRetentionPolicy:
    whenDeleted: {{ .Values.mlserver.statefulSetPersistentVolumeClaimRetentionPolicy.whenDeleted
      }}
    whenScaled: {{ .Values.mlserver.statefulSetPersistentVolumeClaimRetentionPolicy.whenScaled
      }}
